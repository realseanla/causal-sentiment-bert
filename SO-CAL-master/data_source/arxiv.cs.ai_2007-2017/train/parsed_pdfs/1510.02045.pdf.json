{
  "name" : "1510.02045.pdf",
  "metadata" : {
    "source" : "CRF",
    "title" : "Budget Constraints in Prediction Markets",
    "authors" : [ "Nikhil Devanur", "Zhiyi Huang", "David M. Pennock" ],
    "emails" : [ ],
    "sections" : [ {
      "heading" : null,
      "text" : "We give a detailed characterization of optimal trades under budget constraints in a prediction market with a cost-function-based automated market maker. We study how the budget constraints of individual traders affect their ability to impact the market price. As a concrete application of our characterization, we give sufficient conditions for a property we call budget additivity: two traders with budgets B and B′ and the same beliefs would have a combined impact equal to a single trader with budget B +B′. That way, even if a single trader cannot move the market much, a crowd of like-minded traders can have the same desired effect. When the set of payoff vectors associated with outcomes, with coordinates corresponding to securities, is affinely independent, we obtain that a generalization of the heavily-used logarithmic market scoring rule is budget additive, but the quadratic market scoring rule is not. Our results may be used both descriptively, to understand if a particular market maker is affected by budget constraints or not, and prescriptively, as a recipe to construct markets."
    }, {
      "heading" : "1 INTRODUCTION",
      "text" : "A prediction market is a central clearinghouse for people with differing opinions about the likelihood of an event— say Hillary Clinton to win the 2016 U.S. Presidential election—to trade monetary stakes in the outcome with one another. At equilibrium, the price to buy a contract paying $1 if Clinton wins reflects a consensus of sorts on the probability of the event. At that price, and given the wagers already placed, no agent is willing to push the price further up or down. Prediction markets have a good track record of forecast accuracy in many domains [11, 19].\nThe design of combinatorial markets spanning multiple\nlogically-related events raises many interesting questions. What information can be elicited—the full probability distribution, or specific properties of the distribution? What securities can the market allow traders to buy and sell? How can the market support and ensure a variety of trades? For example, in addition to the likelihood of Clinton winning the election, we may want to elicit information about the distribution of her electoral votes.1 If we create one security for each possible outcome between 0 and 538, each paying $1 iff Clinton gets exactly that many electoral votes, the market is called complete, allowing us to elicit a full probability distribution. Alternatively, if we create just two securities, one paying out $x if Clinton wins x electoral votes, and the other paying out $x2, we cannot elicit a full distribution, but we can still elicit the mean and variance of the number of electoral votes.\nWhen agents are constrained in how much they can trade only by risk aversion, prediction market prices can be interpreted as a weighted average of traders’ beliefs [2, 20], a natural reflection of the “wisdom of the crowd” with a good empirical track record [14] and theoretical support [2]. However, when agents are budget constrained, discontinuities and idiosyncratic results can arise [7, 16] that call into question whether the equilibrium prices can be trusted to reflect any kind of useful aggregation.\nWe consider prediction markets with an automated market maker [1, 4, 13] that maintains standing offers to trade every security at some price. Unlike a peer-to-peer exchange, all transactions route through the market maker. The common market makers have bounded loss and are (myopically) incentive compatible: the best (immediate) strategy is for a trader to move the market prices of all securities to equal his own belief. The design of such an automated market maker boils down to choosing a convex cost function [1]. This amount of design freedom presents an opportunity to seek cost functions that satisfy additional desiderata such as computational tractability [1, 6].\n1 A U.S. Presidential candidate receives a number of electoral votes between 0 and 538. The candidate who receives a plurality of electoral votes wins the election.\nar X\niv :1\n51 0.\n02 04\n5v 1\n[ cs\n.G T\n] 7\nO ct\n2 01\nMost of the literature assumes either risk-neutral or riskaverse traders with unbounded budgets. In this paper, we consider how agents with budget constraints trade in such markets, a practical reality in almost all prediction markets denominated in both real and virtual currencies. Our results help with a systematic study of the market’s liquidity parameter, or the parameter controlling the sensitivity of prices to trading volume. Setting the liquidity is a nearly universal practical concern and, at present, is more (black) art than science. We adopt the notion of the “natural budget constraint” introduced by Fortnow and Sami [8]: the agent is allowed only those trades for which the maximum loss for any possible outcome does not exceed the budget.\nThe main contribution of this paper is a rich, geometric characterization of the impact of budget constraints. Price vectors, outcomes and trader beliefs are embedded in the space of the same dimension as the number of securities. Outcome vectors enumerate security payoffs; belief vectors enumerate the traders’ expectations of payoffs. We consider, for a fixed belief, the locus of the resulting price vectors of an optimal trade as a function of the budget. We show that the price vector moves in the convex hull of the belief and the set of tight outcomes, in a direction that is perpendicular to the set of tight outcomes. We also introduce the concept of budget additivity: two agents with budgets B and B′ and the same beliefs have the same power to move the prices as a single agent with the same belief and budgetB+B′. An absence of budget additivity points to an inefficiency in incorporating information from the traders. We show that budget additivity is a non-trivial property by giving examples of market makers that do not satisfy budget additivity. We give a set of sufficient conditions on the market maker and the set of securities offered which guarantee budget additivity. Further, for two of the most commonly used market makers (the quadratic and logarithmic market scoring rules), we show sufficient conditions on the set of securities that guarantee budget additivity.\nOf greatest practical interest is the application of our results to markets consisting of several independent questions, with each question priced according to a separate logarithmic market scoring rule. This setup constitutes a de facto industry standard, and the companies that use (or used) it include Inkling Markets,2 Consensus Point,3 Microsoft and Yahoo! [17]. Our Theorems 5.6 and 5.8 show that these markets are budget additive.\nPreviously, Fortnow and Sami [8] considered a different question: do budget-constrained bidders always move the market prices in the direction of their beliefs? They showed that the answer to this is no: there always exist market prices, beliefs and budgets such that the direction of price movement is not towards the belief. We give a richer char-\n2inklingmarkets.com 3www.consensuspoint.com\nacterization of how the market prices move in the presence of budget constraints, by charting the path the prices take with increasing budgets. The impossibility result of Fortnow and Sami [8] can be easily derived from our characterization (see Appendix D).4\nA designer of a prediction market has a lot of freedom but little guidance, and our results can be used both descriptively and prescriptively. As a descriptive tool, our results enable us to analyze commonly used market makers and understand if budget constraints hamper information aggregation in these markets. As a prescriptive tool, our results can be used to construct markets that are budget additive. In particular, we speculate that budget additivity simplifies the choice of the liquidity parameter in the markets, because it allows considering trader budgets in aggregate.\nProof overview and techniques. Our analysis borrows heavily from techniques in convex analysis and builds on the notion of Bregman divergence. We use the special case of Euclidean distance (corresponding to a quadratic market scoring rule) to form our geometric intuition which we then extend to arbitrary Bregman divergences. For the sake of an example, consider a complete market over a finite set of outcomes, where the market prices lie in a simplex, exactly coinciding with the set of probability distributions over outcomes. Every possible outcome imposes a constraint on the set of prices to which a trader can move the market, because the trader is not allowed to exceed the budget if that outcome occurs. The prices satisfying this constraint form a ball with the outcome at its center. The set of feasible prices to which the trader can move the market is therefore the intersection of these balls (see Figure 1).\nThe key structural result we obtain is the chart of the price movement. Suppose that there is an infinite sequence of agents with infinitesimally small budgets all with the same belief. What is the path along which the prices move from some initial values? This is determined by the agents’ belief and the set of budget constraints that are tight at any point, corresponding to the highest risk outcomes (outcomes with the highest potential loss). We show that the price vector can always be written as a convex combination of these highest risk outcomes and the agents’ belief. Further, the market prices move in a direction that is perpendicular to the affine space of these outcomes.\nThe agents’ belief partitions the simplex interior into regions, where each region is the interior of the convex hull of the agent belief and a particular subset of outcomes. For a region that is full-dimensional, every interior point can be uniquely written as a convex combination of the agent belief and all except one outcome. Assume that the current price vector lies in this region. In the anticipation of the further development, we call this outcome profitable and others risky. Motivated by the characterization above, we\n4The full version of this paper on arXiv includes the appendix.\nmove perpendicular to the risky outcomes in the direction towards the agents’ belief. As a result, we increase the risk of risky outcomes (equally for all outcomes), while getting closer to the one profitable outcome (and hence increasing its profit). The characterization then guarantees that the prices along this path are indeed those chosen by traders at increasing budgets, because the risky outcomes yield tight constraints.\nWe would like the same to be true for the lower dimensional regions as well; that is, for the set of tight constraints to be exactly the corresponding set of outcomes defining the convex hull. In fact, this property is sufficient to guarantee budget additivity. The markets for which the tight constraints are exactly the minimal set of outcomes that define the region the price lies in are budget additive. (We conjecture that the converse holds as well.) The entire path is then as follows: w.l.o.g. you start at a full-dimensional region, move along the perpendicular until you hit the boundary of the region and you are in a lower-dimensional region, move along the perpendicular in this lower-dimensional region, and so on until you reach the belief (see Figure 1). The set of tight constraints is monotonically decreasing. We show that such markets are characterized by a certain acute angles assumption on the set of possible outcomes. Loosely speaking, this assumption guarantees that outcomes outside the minimal set behave as the profitable outcome in the above example.\nOther related work. There is a rich literature on scoring rules and prediction markets. Two of the most studied scoring rules are the quadratic scoring rule [3] and the logarithmic market scoring rule [13]. We consider costfunction-based prediction markets [4, 12], a fully general class under reasonable assumptions [1, 5]. Their equivalence with proper scoring rules has been implicitly noted by Gneiting and Raftery [10]. Several authors have studied relationships between utility functions and price dynamics in prediction markets, drawing a parallel to online learning [2, 5, 9]. Our analysis touches on the problem of setting the\nmarket maker’s liquidity parameter [15, 17], which determines how (in)sensitive prices are to trading volume. With budget additivity, the market designer can optimize liquidity according to aggregate budgets, without worrying about how budgets are partitioned among traders."
    }, {
      "heading" : "2 PRELIMINARIES",
      "text" : "Securities and payoffs. Consider a probability space with a finite set of outcomes Ω ⊆ Rn. A security is a financial instrument whose payoff depends on the realization of an outcome in Ω. In other words, the payoff of a security is a random variable of the probability space. We consider trading with n securities corresponding to n coordinates of the outcomes ω ∈ Ω. A security can be traded before the realization is observed with the intention that the price of a security serves as a prediction for the expected payoff, i.e., the expected value of the corresponding coordinate.\nCost function, prices and utilities. An automated market maker always offers to trade securities, for the right price. In fact the price vector is the current prediction of the market maker for the expectation of ω. A cost function based market maker is based on a differentiable convex cost function, C : Rn → R. It is a scalar function of an n-dimensional vector q ∈ Rn representing the number of outstanding shares5 for our n securities. We also refer to q as the state of the market.\nThe vector of instantaneous prices of the securities is simply the gradient of C at q, denoted by p(q) := ∇C(q). The prices of securities change continuously as the securities are traded, so it is useful to consider the cost of trading a given quantity of securities. The cost of buying δ ∈ Rn units of securities (where a negative value corresponds to selling) is determined by the path integral∫ π p(q̄) · dq̄ = C(q + δ) − C(q), where π is any smooth 5We allow trading fractions of a security. Negative values correspond to short-selling.\ncurve from q to q + δ.\nWhen the outcome ω is realized, the vector of δ units of securities pays off an amount of δ · ω. Thus, the realized utility of a trader whose trade δ moved the market state from q to q′ = q + δ is\nU(q′, ω; q) := (q′ − q) · ω − C(q′) + C(q) .\nWe make a standard assumption that the maximum achievable utility, which is also the maximum loss of the market maker, is bounded by a finite constant (in Section 4, we introduce a standard approach to check this easily). LetM be the convex hull of the payoff vectors,M := conv(Ω). It is easy to see thatM contains exactly the vectors µ ∈ Rn which can be realized as expected payoffs E[ω] for some probability distribution over Ω. For a trader who believes that E[ω] = µ, the expected utility takes form\nU(q′, µ; q) := E [U(q′, ω; q)] = (q′−q)·µ−C(q′)+C(q) .\nThroughout, we consider a single myopic trader who trades as if he were the last to trade. A key property satisfied by expected utility is path independence: for any q, q̄, q′ ∈ Rn, U(q′, µ; q̄) + U(q̄, µ; q) = U(q′, µ; q), that is, riskneutral traders have no incentive to split their trades. For a risk-neutral trader, q′ ∈ Rn is an optimal action if and only if µ = ∇C(q′) = p(q′) (this follows from the first-order optimality conditions). In other words, the trader is incentivized to move the market to the prices corresponding to his belief as long as such prices exist. In general, there may be multiple states yielding the same prices, so the inverse map p−1(µ) returns a set, which can be empty if no state yields the price vector µ.\nCommonly-used cost functions include the quadratic cost, logarithmic market-scoring rule (LMSR) and the logpartition function. They are described in detail in Appendix A. The quadratic cost is defined by C(q) = 12‖q‖ 2 2\nand p(q) = q. Log-partition function is defined as C(q) = ln( ∑ ω∈Ω e\nq·ω). It subsumes LMSR as a special case for the complete market with the outcomes corresponding to vertices of the simplex. The prices under log-partition cost correspond to the expected value of ω under the distribution Pq(ω) = e q·ω−C(q) over Ω, i.e., p(q) = EPq [ω].\nBudget constraints. Trading in prediction markets needs an investment of capital. It is possible that an agent loses money on the trade, in particular U(q′, ω; q) could be negative for some ω. One restriction on how an agent trades could be that he is unable to sustain a big loss, due to a budget constraint. We consider the notion of natural budget constraint defined by Fortnow and Sami [8] which states that the loss of the agent is at most his budget, for all ω ∈ Ω. Given a starting market state q0 and a budget of B ≥ 0, a trader with the belief µ ∈M then solves the problem:\nmax q∈Rn U(q, µ; q0) s.t. U(q, ω; q0) ≥ −B ∀ω ∈ Ω . (2.1)\nFor quadratic costs, each constraint corresponds to a sphere with one of the outcomes at its center, so the feasible region is an intersection of these spheres. We will later see that this generalizes to an intersection of balls w.r.t. a Bregman divergence for general costs.\nIn general, there may be multiple q optimizing this objective. In the following definition we introduce notation for various solution sets we will be analyzing. The belief µ is fixed throughout most of the discussion, so we suppress the dependence on µ. Definition 2.1 (Solution sets). Let Q̂(B; q0) denote the set of solutions of Convex Program (2.1) for a fixed initial state and budget. Let Q̂(q0) = ⋃ B≥0 Q̂(B; q0) denote the set of solutions of (2.1) for a fixed initial state across all budgets. Let Q̂(ν; q0) = p−1(ν) ∩ Q̂(q0) denote the set of states q that optimize (2.1) for some budget B and yield the market price vector ν.\nThe next theorem shows that solutions for a fixed initial state and budget always yield the same price vector. It is proved in Appendix B. Theorem 2.2. If q, q′ ∈ Q̂(B; q0), then p(q) = p(q′).\nGeometry of linear spaces. We finish this section by reviewing a few standard geometric definitions we use in next sections. Let X ⊆ Rn. Then aff(X) denotes the affine hull of the set X (i.e., the smallest affine space including X). We write X⊥ to denote the orthogonal complement of X: X⊥ := {u ∈ Rn : u · (x′ − x) = 0 for all x, x′ ∈ X}. We use the convention ∅⊥ = Rn. A set K ∈ Rn is called a cone if it is closed under multiplication by positive scalars. If a cone is convex, it is also closed under addition. Since Ω is finite, the realizable setM = conv(Ω) is a polytope. Its boundary can be decomposed into faces. More precisely, X ⊆ Ω, X 6= ∅, forms a face of M if X is the set of maximizers over Ω of some linear function.6 We also view X = ∅ as a face of M. With this definition, for any two faces X , X ′, also their intersection X ∩X ′ is a face."
    }, {
      "heading" : "3 CHARACTERIZING SOLUTION SETS",
      "text" : "We start with the optimality (KKT) conditions for the Convex Program (2.1), as characterized by the next lemma. One of the key conditions is that the solution prices must be in the convex hull of the belief µ and all the ω’s for which the budget constraints are tight. The set of tight constraints is always a face of the polytopeM. We allow an empty set as a face, which corresponds to the case when none of the constraints are tight and the solution prices coincide with µ. The proof follows by analyzing KKT conditions (see Appendix C of the full version for details).\n6Strictly speaking, this is the definition of an exposed face, but all faces of a polytope are exposed, so the distinction does not matter here. The exposed face is typically defined to be conv(X), but in this paper, it is more convenient to work with X directly.\nLemma 3.1 (KKT lemma). Let q0 ∈ Rn. Then q ∈ Q̂(B; q0) if and only if there exists a face X ⊆ Ω such that the following conditions hold:\n(a) U(q, x; q0) = U(q, x′; q0), or equivalently (q − q0) · (x′ − x) = 0, for all x, x′ ∈ X (b) U(q, ω; q0) ≥ U(q, x; q0), or equivalently (q − q0) · (ω − x) ≥ 0, for all x ∈ X , ω ∈ Ω\\X (c) p(q) ∈ conv(X ∪ {µ}) (d) B = −U(q, x; q0) for all x ∈ X if X 6= ∅, or\nB ≥ maxω∈Ω[−U(q, ω; q0)] if X = ∅\nwhere conditions (a) and (b) hold vacuously for X = ∅.\nThe condition (a) requires that q − q0 be orthogonal to the active setX . The set of points satisfying conditions (a) and (c) will be called the Bregman perpendicular and will be defined in the next section. The condition (b) is a statement about acuteness of the angle between q − q0 (the perpendicular) and the outcomes. It will be the basis of our acute angles assumption. The condition (d) just states how the budget is related to the active set X .\nWitness cones and minimal faces. We now introduce some notation to help us state reinterpretations of the conditions in Lemma 3.1. First of all, given a face X , what is the set of q’s that satisfy conditions (a) and (b)? This is captured by what we call the witness cone.\nDefinition 3.2. The witness cone for a face X ⊆ Ω is defined as K(X) := {u ∈ Rn : u · (ω − x) ≥ 0 for all x ∈ X,ω ∈ Ω} if X 6= ∅, and K(X) := Rn if X = ∅.\nThe following two properties of witness cones are immediate from the definition:\n• Anti-monotonicity: if X ⊆ X ′, then K(X) ⊇ K(X ′). • Orthogonality: K(X) ⊆ X⊥.\nA state q satisfies conditions (a) and (b) for a given face X if and only if q−q0 ∈ K(X). Now given a state q, consider the set of faces that could satisfy condition (c). This set has a useful structure, namely that there is a unique minimal face (proved in Appendix C of the full version).\nDefinition 3.3. Given a price vector ν ∈ M, the minimal face for ν is the minimal face X (under inclusion) s.t. ν ∈ conv(X ∪ {µ}). The minimal face for ν is denoted as Xν .\nWith the existence of a minimal face and the antimonotonicity of the witness sets, it follows that if q and X satisfy conditions (a), (b) and (c), then so do q and Xp(q). Thus we obtain the following version of Lemma 3.1 (proved in Appendix C of the full version).\nTheorem 3.4 (Characterization of Solution Sets). q ∈ Q̂(q0) if and only if q ∈ [q0 +K(Xp(q))].\nUsing Theorem 3.4, we immediately obtain a characterization of when a price vector ν could be the price vector of an optimal solution to (2.1).\nCorollary 3.5. Q̂(ν; q0) = p−1(ν) ∩ [q0 + K(Xν)]. In particular, ν is the price vector of an optimal solution to (2.1) if and only if p−1(ν) ∩ [q0 +K(Xν)] 6= ∅.\nWe now study an example using the above characterization. More examples can be found in Appendix E of the full version.\nExample 3.6 (Quadratic cost on an obtuse triangle; see Example E.2 in the full version for details). Consider the following outcome space, belief, and the sequence of market states (depicted in Figure 2):\nω1 = (0.0, 0.0) q0 = ν0 = 11 14ω2 + 3 14ω3 ω2 = (1.8, 0.0) q1 = ν1 = 1 3ω2 + 2 3µ ω3 = (6.0, 4.2) q2 = ν2 = 1 9ω1 + 8 9µ\nµ = qµ = (2.7, 1.8) q3 = ν3 ≈ 119ω1 + 18 19µ\nUsing the KKT lemma, we can show for j = 1, 2, 3, that qj = νj is an optimal action at qj−1 = νj−1 under belief µ, with the corresponding budgets as:\nω1 ω2 ω3 U(q1, ·; q0) 0.45 −0.09 −0.09 B01 = 0.09 U(q2, ·; q1) −0.56 −0.56 1.12 B12 = 0.56 U(q3, ·; q2) −0.565 −0.28 . . . 0.82 . . . B23 = 0.565 U(qµ, ·; q0) −1.215 −1.215 2.565 B0µ = 1.215\nThe above table also shows that the budget B0µ = 1.215 suffices to move directly from q0 to qµ. However, note that the sum B01 + B12 + B23 = 1.215 = B0µ, but ν3 6= µ, i.e., after the sequence of optimal actions with budgetsB01, B12, and B23, the market is still not at the belief shared by all agents, even though with the budget B0µ, it would have reached it.\nBudget additivity. The above example suggests that multiple traders with the same belief may have less power in moving the market state towards their belief compared to a single trader with the same belief and the combined budget. Since prediction markets aim to efficiently aggregate information from agents, it is natural to ask under what conditions multiple traders with the same beliefs do have a combined impact equal to a single trader with the combined budget.\nNext, we formally define this property as budget additivity. We then define the Euclidean version of the acute angles condition that we show is sufficient for budget additivity.\nDefinition 3.7 (Budget additivity). We say that a prediction market is budget additive onM′ ⊆M if for all beliefs µ ∈ M′ and all initial states q0 ∈ p−1(M′) the following holds: For any budgets B,B′ ≥ 0 and any sequence of solutions q ∈ Q̂(B; q0) and q′ ∈ Q̂(B′; q), we have p(q), p(q′) ∈ M′ and q′ ∈ Q̂(B +B′; q0).\nIn other words, the market is budget additive if the sequence of optimal actions of two agents with the same be-\nlief and budgetsB andB′ is also an optimal action of a single agent with the same belief and a larger budget B +B′. Thanks to Theorem 2.2 we then also obtain that the price vector following the sequence of optimal actions by the two agents is the same as the price vector after the optimal action by an agent with the combined budget (all with the same beliefs).\nWe now state the acute angles assumption for the Euclidean case, to give an intuition. Our acute angles assumption (Definition 5.1) is a generalization of this. We later show that the acute angles property is sufficient for budget additivity (Theorem 5.2). Definition 3.8. We say that the Euclidean acute angles hold for a face X , if the angle between any point ν̄ ∈ M, its projection on the affine hull of X and any payoff ω ∈ Ω is non-obtuse (the angle is measured at the projection).\nBased on the above example, one may hypothesize that the obtuse angles are to blame for the lack of budget additivity. In the following sections we will show that this is indeed the case, but that the notion of obtuse/acute angles depends on the Bregman divergence. In particular, the above example would have been budget-additive if we used the logpartition cost instead of the quadratic cost."
    }, {
      "heading" : "4 BREGMAN DIVERGENCE AND PERPENDICULARS",
      "text" : "We will see next that the utility function U can be written as the difference of two terms measuring the distance between the belief and the market state before and after the trade. This distance measure is the mixed Bregman divergence.7 To define the Bregman divergence, first let C∗ : Rn → (−∞,∞] be the convex conjugate of C defined as C∗(ν) := supq′∈Rn [q\n′ · ν − C(q′)] . Since C∗ is a supremum of linear functions, it is convex lower semicontinuous. Up to a constant, it characterizes the maximum achievable utility on an outcome ω for a fixed initial state q\n7Our notion of Bregman divergence is more general than typically assumed in the literature.\nas supq′∈Rn U(q ′, ω; q) = C∗(ω)+\n[ C(q)−q·ω ] . The term\nin the brackets is always finite, but C∗ might be positive infinite. We make a standard assumption that C∗(ω) < ∞ for all ω ∈ Ω, i.e., that the maximum achievable utility, which is also the maximum loss of the market maker, is bounded by a finite constant. By convexity, this implies that C∗(µ) < ∞ for all µ ∈ M. The Bregman divergence derived from C is a function D : Rn × Rn → (−∞,∞] measuring the maximum expected utility under belief µ at a state q\nD(q, µ) := C(q) +C∗(µ)− q ·µ = supq′∈Rn U(q′, µ; q) .\nFrom the convexity ofC andC∗ and the definition ofC∗, it is clear that: (i) D is convex and lower semi-continuous in each argument separately; (ii) D is non-negative; and (iii) D is zero iff p(q) = ∇C(q) = µ. By the bounded loss assumption, Bregman divergence is finite on µ ∈ M. For µ ∈M, we can write\nU(q′, µ; q) = D(q, µ)−D(q′, µ) . (4.1)\nThus, maximizing the expected utility is the same as minimizing the Bregman divergence between the state q′ and the belief µ. From Eq. (4.1) it is also clear that each constraint in (2.1) is equivalent to D(q, ω) ≤ D(q0, ω) + B, and the geometric interpretation is that the agent seeks to find the state closest to his belief, within the intersection of Bregman balls\nFor the quadratic cost, we have C∗(ν) = 12‖ν‖ 2 and D(q, ν) = 12‖q − ν‖ 2, i.e., the Bregman divergence coincides with the Euclidean distance squared. For logpartition cost, we have C∗(ν) = ∑ ω∈Ω Pν(ω) lnPν(ω) where Pν is the distribution maximizing entropy among P satisfying EP [ω] = ν. The Bregman divergence is the KLdivergence between Pq and Pν : D(q, ν) = KL(Pν‖Pq).\nConvex analysis. We overview a few standard definitions and results from convex analysis. For X ⊆ Rn, we write riX for the relative interior of X (i.e., the interior relative to the affine hull). For a convex function F : Rn → (−∞,∞], we define its effective domain\nas domF := {u ∈ Rn : F (u) < ∞} (i.e., the set of points where it is finite). The subdifferential of F at a point u is the set ∂F (u) := {v ∈ Rn : F (u′) ≥ F (u) + (u′ − u) · v for all u′ ∈ Rn}. We say that F is subdifferentiable at u if ∂F (u) 6= ∅. A standard result of convex analysis states that F is always subdifferentiable on a superset of ri domF . If F is not only convex, but also lower semi-continuous, then ∂F and ∂F ∗ are inverses in the sense that v ∈ ∂F (u) iff u ∈ ∂F ∗(v). If F is differentiable everywhere on Rn, then F ∗ is strictly convex on ri domF ∗.\nLet im p := {p(q) : q ∈ Rn} denote the set of prices that can be expressed by market states. The implications for our setting are that: (i) C∗ is subdifferentiable on im p; (ii) p−1(ν) = ∂C∗(ν) for all ν ∈ Rn; (iii) all beliefs in ri domC∗ can be expressed by some state q; (iv) C∗ is strictly convex on ri domC∗, and similarly D(q, ν) is strictly convex on ri domC∗ as a function of the second argument."
    }, {
      "heading" : "Assumptions on the cost function.",
      "text" : "• Convexity and differentiability on Rn. C is convex and differentiable on Rn. • Finite loss.M⊆ domC∗, i.e., C∗ is finite onM. • Inclusion of the relative interior. riM⊆ ri domC∗.\nThe first two assumptions are standard. The third assumption is a regularity condition that we require in our results. Here we briefly discuss how it compares with the finite loss assumption. While the two assumptions look similar, neither of them implies the other. For example, if domC∗ is an n-dimensional simplex and M is one of its lower dimensional faces, which are lower dimensional simplices, then the finite loss assumption holds, but the inclusion assumption does not. Similarly, for n = 1 and M = [0, 1], the inclusion assumption is satisfied by the conjugate C∗(ν) = 1/ν + 1/(1 − ν) on ν ∈ (0, 1) and C∗(ν) = ∞ on ν 6∈ (0, 1), but this conjugate does not satisfy the finite loss assumption.\nWe do not view the inclusion assumption as very restrictive, since it is satisfied by many common cost functions. For instance, it always holds when C is constructed as in [1], because their construction guarantees domC∗ = M. However, the inclusion assumption might not hold for cost functions that allow arbitrage (e.g., [6]).\nOur main result relies on strict convexity of C∗ on ri domC∗, so some of our statements will require that the market prices and beliefs lie in that set. The inclusion assumption above guarantees that at the minimum riM ⊆ ri domC∗, but the boundary of M is not necessarily included. To allow some generality beyond riM, we define the set\nM̃ :=\n{ M ifM⊆ ri domC∗\nriM otherwise.\nIn either case we obtain that M̃ ⊆ ri domC∗ ⊆ im p, i.e., beliefs in M̃ can be expressed by some state q. For the quadratic cost, M̃ = M. For the log-partition cost, M̃ = riM.\nPerpendiculars. We now define the notion of a Bregman perpendicular to an affine space. This is a constructive definition. It plays a central role in the definition of the acute angles assumption, and also in the proof of the main result (Theorem 5.2). We will see that the set of optimal price vectors for different budgets is a sequence of Bregman perpendiculars. Naturally, perpendiculars are closely related to the conditions in Lemma 3.1; in particular to the set of q’s that satisfy conditions (a) and (c) for a given face X .\nFor quadratic costs, Bregman perpendiculars coincide with the usual Euclidean perpendiculars. Consider an affine space and a point not in it. A projection of the point onto the space is the point in the space that is closest in Euclidean distance to the given point. Now consider moving this affine space towards the projected point. The locus of the projection as we move the space is the perpendicular to the space through the given point. We extend this definition to arbitrary Bregman divergences by defining the projection using the corresponding Bregman divergence.\nA Bregman perpendicular is determined by three geometric objects within the affine hull aff(domC∗). The first of these is an affine space, say A0 ⊆ aff(domC∗). The second is a point a1 ∈ aff(domC∗)\\A0. The affine space A = aff(A0 ∪ {a1}) ⊆ aff(domC∗) will be the ambient space that will contain the perpendicular. Define parallel spaces to A0 in A, for an arbitrary point a0 ∈ A0, as Aλ := A0 +λ(a1− a0) for λ ∈ R. Note that the definition of Aλ is independent of the choice of a0. The third geometric object is a market state q ∈ Rn such that p(q) ∈ A. For technical reasons, we will define a perpendicular at q rather than a more natural notion, which would be at p(q). Our reason for switching into q-space is that inner products, defining optimality of the Bregman projection, are between elements of q-space and ν-space (the two spaces coincide for Euclidean distance). For all λ ∈ R define a Bregman projection of q onto Aλ as\nνλ := argmin ν∈Aλ D(q, ν) .\nSince D(q, ν) is bounded from below and lower semicontinuous, the minimum is always attained (but it may be equal to ∞). If it is attained at more than one point, we choose an arbitrary minimizer. Whenever we can choose νλ ∈ ri domC∗, this νλ must be the unique minimizer by strict convexity of D(q, ·) on ri domC∗, and the minimum is finite. We use these νλ’s to define the perpendicular:\nDefinition 4.1. Given A0, a1 and q as above, the a1perpendicular to A0 at q is a map γ : λ 7→ νλ defined over λ ∈ Λ := {λ ∈ R : νλ ∈ ri domC∗}. We call Λ the domain of the perpendicular. We define a total order on\nνλ, νλ′ ∈ im γ as νλ νλ′ iff λ ≤ λ′.\nIn Appendix F.2 of the full version, we show that perpendiculars are continuous maps. The name perpendicular is justified by the following proposition which matches our Euclidean intuition that the perpendiculars can be obtained by intersecting the ambient space A with the affine space which passes through q and is orthogonal to A0. It also shows that the perpendicular corresponds to the set of prices that satisfy conditions (a) and (c) with the convex hull relaxed to the affine hull (when A0 is the affine hull of face X , point a1 coincides with µ and q is the initial state). Recall that for an arbitrary set X ⊆ Rn, its orthogonal complement is defined as X⊥ := {u : u · (x′ − x) = 0 for all x, x′ ∈ X}. Proposition 4.2. Let γ be the a1-perpendicular to A0 at q, and let A = aff(A0 ∪ {a1}). The following two statements are equivalent for any ν′ ∈ Rn:\n(i) ν′ ∈ im γ (ii) ν′ ∈ A ∩ (ri domC∗), p−1(ν′) ∩ (q +A⊥0 ) 6= ∅\nProposition 4.2 is proved in Appendix F of the full version. The perpendiculars have the following closure property which is useful for showing budget additivity (also proved in Appendix F of the full version):\nProposition 4.3. Under the assumptions of Proposition 4.2, γ is also the a1-perpendicular to A0 at any q′ ∈ p−1(im γ) ∩ (q +A⊥0 )."
    }, {
      "heading" : "5 BUDGET ADDITIVITY",
      "text" : "We now state the acute angles property which links the Bregman perpendicular and Corollary 3.5, and is sufficient for budget additivity.\nDefinition 5.1. We say that the acute angles hold for a face X , if for every µ-perpendicular γ to X at q, such that µ ∈ M̃ and q ∈ p−1(M̃), the following holds: If ν′ ∈ im γ and ν′ p(q), then p−1(ν′) ∩ [q +K(X)] 6= ∅.\nThe motivation for the name “acute angles” comes from the Euclidean distance case, where this assumption is equivalent to Definition 3.8 (see Proposition G.1 in the full version). The acute angles property is non-trivial and we have seen that without this property, budget additivity need not hold; we conjecture that it is also a necessary condition. After stating the main theorem, we analyze in more detail when the acute angles are satisfied by the quadratic and log-partition costs.\nWe now state the main result, that the acute angles are sufficient for budget additivity:\nTheorem 5.2 (Sufficient conditions for budget additivity). If acute angles hold for every face X ⊆ Ω, then the prediction market is budget additive on M̃.\nSufficient conditions for acute angles. We next give the sufficient conditions when the acute angles hold for the quadratic and log-partition cost functions. We also show that the acute angles hold for all one-dimensional outcome spaces, and that they are preserved by taking direct sums of markets. Recall that a set K ∈ Rn is called a cone if it is closed under multiplication by positive scalars. A cone is called acute, if x · y ≥ 0 for all x, y ∈ K. An affine cone with the vertex a0 is a set K′ of the form a0 + K where K is a cone.\nTheorem 5.3 (Sufficient condition for quadratic cost). Let X be a face and A′ be the affine space a0 + X⊥ for an arbitrary a0 ∈ aff(X). Acute angles hold for the face X and the quadratic cost if and only if the projection of Ω (or, equivalently,M) onA′ is contained in an affine acute cone with the vertex a0.\nCorollary 5.4. Acute angles hold for the quadratic cost and a hypercube Ω = {0, 1}n. Corollary 5.5. Acute angles hold for the quadratic cost and simplex Ω = {ei : i ∈ [n]} where [n] = {1, 2, . . . , n} and ei is the i-th vector of the standard basis in Rn. Theorem 5.6 (Log-partition over affinely independent outcomes). If the set Ω is affinely independent then acute angles assumption is satisfied for the log-partition cost.\nTheorem 5.7 (One-dimensional outcome spaces). Acute angles hold for any cost function ifM is a line segment.\nLet Ω1 ⊆ Rn1 and Ω2 ⊆ Rn2 be outcome spaces with costs C1 andC2. We define the direct sum of Ω1 and Ω2 to be the outcome space Ω = Ω1 × Ω2 with the cost C : Rn1+n2 → R defined as C(q1, q2) = C1(q1) + C2(q2). Theorem 5.8 (Acute angles for direct sums). If acute angles hold for Ω1 with cost C1, and Ω2 with cost C2, then they also hold for their direct sum.\nAs a direct consequence of this theorem, we obtain that the log-partition cost function satisfies the acute angles assumption on a hypercube. More generally, any direct sum of costs on line segments satisfies the acute angles. This means that all cost-based prediction markets consisting of independent binary questions are budget additive, regardless of costs used to price individual questions.\nAs mentioned in the introduction, a vast number of deployed cost-based prediction markets consists of independent questions (not necessarily binary), each priced according to an LMSR (i.e., a log-partition cost on a simplex). Theorems 5.6 and 5.8 imply that this industry standard is budget additive."
    }, {
      "heading" : "5.1 Proof of Theorem 5.2",
      "text" : "In this section we sketch the proof of Theorem 5.2 (for a complete proof see Appendix H of the full version). We proceed in several steps. Let ν0 = p(q0). Assuming acute\nangles, we begin by constructing an oriented curve L joining ν0 with µ, by sequentially choosing portions of perpendiculars for monotonically decreasing active sets. We then show that budget additivity holds for any solutions with prices in L, and finally show that the curve L is the locus of the optimal prices of solutions Q̂(q0), as well as optimal prices of solutions Q̂(q) for any q ∈ Q̂(q0).\nPart 1: Construction of the solution path L. In this part, we construct:\n• a sequence of prices ν0, ν1, . . . , νk with ν0 = p(q0) and νk = µ • a sequence of oriented curves `0, . . . , `k−1 where each `i goes from νi to νi+1 • a monotone sequence of sets Ω ⊇ X0 ⊃ X1 ⊃ · · · ⊃ Xk = ∅, such that the following minimality property holds: Xi is the minimal face for all ν ∈ (im `i)\\{νi+1} for i ≤ k − 1, and Xk is the minimal face for νk. • a sequence of states q1, . . . , qk−1 such that qi ∈ p−1(νi) ∩ [qi−1 +K(Xi−1)]\nThe curves `i will be referred to as segments. The curve obtained by concatenating the segments `0 through `k−1 will be called the solution path and denoted L. In the special case that ν0 = µ, we have k = 0, X0 = ∅ and L is a degenerate curve with imL = {µ}.\nIf ν0 6= µ, we construct the sequence of segments iteratively. Let X0 6= ∅ be the minimal face such that ν0 ∈ conv(X0 ∪ {µ}). By the minimality, µ 6∈ aff(X0). Let γ be the µ-perpendicular to aff(X0) at q0. The curve γ passes through ν0 and eventually reaches the boundary of conv(X0 ∪ {µ}) at some ν1 by continuity of γ (see Theorem F.3). Let segment `0 be the portion of γ going from ν0 to ν1.\nThis construction gives us the first segment `0. There are two possibilities:\n1. ν1 = µ; in this case we are done; 2. ν1 lies on a lower-dimensional face of conv(X0 ∪ {µ}); in this case, we pick some q1 ∈ p−1(ν1)∩ [q0 + K(X0)], which can be done by the acute angles assumption, and use the above construction again, starting with q1, and obtaining a new set X1 ⊂ X0 and a new segment `1; and iterate.\nThe above process eventually ends, because with each iteration, the size of the active set decreases. This construction yields monotonicity of Xi and the minimality property.\nThe above construction yields a specific sequence of qi ∈ p−1(νi) ∩ [qi−1 + K(Xi−1)]. We show in Appendix H of the full version that actually qi ∈ p−1(νi) ∩ (q0 + X⊥i−1) and that the construction of L is independent of the choice of q1, q2, . . . , qk−1.\nPart 2: Budget additivity for points on L. Let ν, ν′ ∈\nimL such that ν ν′. Let q ∈ Q̂(ν; q0) and q′ ∈ Q̂(ν′; q) such that q ∈ Q̂(B; q0) and q′ ∈ Q̂(B′; q). In this part we show that q′ ∈ Q̂(B +B′; q0).\nFirst, consider the case that ν′ = µ. To see that q′ ∈ Q̂(B + B′; q0), first note that the constraints of Convex Program (2.1) hold, because U(q′, ω; q0) = U(q′, ω; q) + U(q, ω; q0) ≥ −B′ − B for all ω by path independence of the utility function. As noted in the introduction, in the absence of constraints, the utility U(q̄, µ; q0) is maximized at any q̄ with p(q̄) = µ. Thus, q′ is a global maximizer of the utility and satisfies the constraints, so q′ ∈ Q̂(B +B′; q0). If ν = µ, we must also have ν′ = µ and the statement holds by previous reasoning.\nIn the remainder, we only analyze the case ν ν′ ≺ µ. This means that ν ∈ (im `i)\\{νi+1} and ν′ ∈ (im `j)\\{νj+1} for i ≤ j. By Theorem 3.4, we therefore must have q ∈ [q0 + K(Xi)] and q′ ∈ [q + K(Xj)]. By anti-monotonicity of witness cones, K(Xj) ⊇ K(Xi) and hence, q′ ∈ [q0 +K(Xj)], yielding q′ ∈ Q̂(ν′; q0).\nWe now argue that the budgets add up. Let x ∈ Xj ⊆ Xi. By Lemma 3.1, we obtain that q ∈ Q̂(B; q0) for B = −U(q, x; q0), and q′ ∈ Q̂(B′; q) for B′ = −U(q′, x; q), and finally q′ ∈ Q̂(B̄; q0) for B̄ = −U(q′, x; q0). However, by path independence of the utility function\nB̄ = −U(q′, x; q0) = −U(q′, x; q)−U(q, x; q0) = B′+B.\nPart 3: L as the locus of all solutions. See Appendix H of the full version for the proof that\nQ̂(q0) = ⋃ ν∈imL Q̂(ν; q0) .\nPart 3’: L as the locus of solutions starting at a midpoint. Let ν ∈ imL and q ∈ Q̂(ν; q0). Since Q̂(ν; q0) ⊆ p−1(ν) ∩ (q0 + X⊥ν ), Part 1’ (Appendix H of the full version) yields that the solution path L′ for q coincides with the portion of L starting at ν. Applying the proof of Part 3 to L′, we obtain\nQ̂(q) = ⋃ ν′∈imL:ν′ ν Q̂(ν ′; q) .\nPart 4: Proof of the theorem. Let B,B′ ≥ 0 and q ∈ Q̂(B; q0) and q′ ∈ Q̂(B′; q). From Parts 3 and 3’, we know that q ∈ Q̂(ν; q0) and q′ ∈ Q̂(ν′; q) for some ν, ν′ ∈ imL such that ν ν′. By Part 2, we therefore obtain that q′ ∈ Q̂(B +B′; q0), proving the theorem."
    }, {
      "heading" : "A EXAMPLES OF COST FUNCTIONS",
      "text" : "Example A.1 (Quadratic cost). The first example of a cost function, applicable to arbitrary outcome sets Ω, is the quadratic cost function defined by C(q) = 12‖q‖\n2. In this case, p(q) = q, and U(q′, µ; q) = 12‖q−µ‖ 2− 12‖q ′−µ‖2. It is clear that the expected utility is maximized when p(q′) = q′ = µ.\nConvex conjugate and Bregman divergence: C∗(ν) = 1 2‖ν‖ 2 and D(q, ν) = 12‖q − ν‖ 2, i.e., the Bregman divergence is a monotone transformation of the Euclidean distance. Example A.2 (LMSR). Our second example is Hanson’s logarithmic market-scoring rule (LMSR) [12, 13], which is applied to complete markets whose outcomes coincide with basis vectors, i.e., Ω = {ei : i ∈ [n]} where ei denotes the i-th basis vector and [n] denotes the set {1, . . . , n}. In this case M is the simplex in Rn and beliefs µ are in one-toone correspondence with probability distributions over Ω. The LMSR cost function is\nC(q) = ln (∑n i=1 e q[i] )\nwhere q[i] denotes the i-th coordinate of q. The price vector is\np(q)[i] = ∂C(q)\n∂q[i] = eq[i]∑n j=1 e q[j] = eq[i]−C(q) .\nFor µ ∈M, the expected utility function takes form\nU(q′, µ; q) = n∑ i=1 µ[i] ( ln p(q′)[i]− ln p(q)[i] )\n= KL(µ‖p(q))− KL(µ‖p(q′)) , where KL(µ‖ν) = ∑n i=1 µ[i] ln(µ[i]/ν[i]) is the KLdivergence. KL-divergence is not symmetric, but it is nonnegative, and zero only if the arguments are equal. Thus, the expected utility is clearly maximized if and only if µ = p(q′).\nConvex conjugate and Bregman divergence: C∗(ν) = ∞ if ν is not a probability measure on Ω, and C∗(ν) =∑n i=1 ν[i] ln ν[i] otherwise, with the convention 0 ln 0 = 0. The Bregman divergence is D(q, ν) = KL(ν‖p(q)). Example A.3 (Log-partition cost). Next example is the log-partition function, which is applicable to arbitrary outcome sets Ω and which generalizes LMSR:\nC(q) = ln (∑ ω∈Ω e q·ω) .\nLet Pq be the probability measure over Ω defined by\nPq(ω) = e q·ω−C(q) .\nThe prices then correspond to expected values of ω under Pq:\np(q) = ∑ ω∈Ω Pq(ω)ω .\nFor µ ∈M, let Pµ denote the distribution of maximum entropy among P with EP [ω] = µ (this distribution is unique and always exists). Note that we are overloading notation on Pq and Pν and use the “type” of the subscript to indicate which probability distribution we have in mind. The expected utility function can be written as\nU(q′, µ; q) = (q′ − q) · E ω∼Pµ [ω]− C(q′) + C(q)\n= E ω∼Pµ [lnPq′(ω)− lnPq(ω)]\n= E ω∼Pµ\n[ ln ( Pµ(ω)\nPq(ω)\n) − ln ( Pµ(ω)\nPq′(ω) )] = KL(Pµ‖Pq)− KL(Pµ‖Pq′) .\nA standard duality result shows that the infimum of KL(Pµ‖Pq′) over the set {Pq′ : q′ ∈ Rn} is zero. If there exists q′ attaining this minimum, we must have Pµ = Pq′ and thus µ = p(q′). We argue that the converse is true as well. Let q′, q′′ be such that Pq′ = Pµ and p(q′) = p(q′′) = µ. Then by convexity of C, we have C(q′′)− C(q′) = (q′′ − q′) · p(q′). Therefore,\nKL(Pq′‖Pq′′) = (q′ − q′′) · p(q′)− C(q′) + C(q′′) = 0 ,\ni.e., Pq′ = Pq′′ = Pµ. Hence, for any q ∈ Rn, Pq is exactly the distribution of maximum entropy among those P that satisfy EP [ω] = p(q). In other words, Pp(q) = Pq .\nConvex conjugate and Bregman divergence: C∗(ν) = ∞ if there is no distribution P on Ω such that EP [ω] = ν, and C∗(ν) = ∑ ω∈Ω Pν(ω) lnPν(ω) otherwise. The Bregman divergence D(q, ν) = KL(Pν‖Pq) = KL(Pν‖Pp(q))."
    }, {
      "heading" : "B PROOF OF THEOREM 2.2",
      "text" : "Proof of Theorem 2.2. Throughout this proof we use concepts of convex conjugacy and Bregman divergence introduced in Section 4. LetB ≥ 0 and B := {q : U(q, ω; q0) ≥ −B for all ω ∈ Ω} be the set of states satisfying the constraints of Convex Program (2.1). Using the definition of utility function, we can rewrite Convex Program (2.1) as\nmax q∈Rn\n[(q − q0) · µ− C(q) + C(q0)− IB(q)] (B.1)\nwhere IB(·) is the convex indicator function, equal to 0 on the set B and ∞ outside it. Since the cost function C is convex on Rn, and B is closed, convex and non-empty, Fenchel’s Duality Theorem [18, Theorem 31.1] implies that the supremum of the above objective equals the following minimum\nmin ν∈Rn\n[C∗(ν)− q0 · µ+ C(q0) + I∗B(µ− ν)] (B.2)\nand this minimum is attained at some ν̂ ∈ Rn. Now, let q̂ ∈ Q̂(B; q0) be a solution of Eq. (B.1). By Fenchel’s\nDuality, the gap between the objectives of Eq. (B.2) and Eq. (B.1) at ν̂ and q̂ must be zero:\n0 = C∗(ν̂)− q0 · µ+ C(q0) + I∗B(µ− ν̂) − (q̂ − q0) · µ+ C(q̂)− C(q0) + IB(q̂)\n= C∗(ν̂)− q̂ · ν̂ + C(q̂) + I∗B(µ− ν̂)− q̂ · (µ− ν̂) + IB(q̂)\n= D(q̂, ν̂) + [ I∗B(µ− ν̂)− ( q̂ · (µ− ν̂)− IB(q̂) )] .\nThe term in the brackets is non-negative from the definition of the convex conjugate. Since D(q̂, ν̂) is also nonnegative, we obtain that it must be zero, i.e., p(q̂) = ν̂. Since this reasoning is independent of the choice q̂ ∈ Q̂(B; q0), the theorem follows."
    }, {
      "heading" : "C OPTIMALITY CONDITIONS AND THE MINIMAL FACE",
      "text" : "This appendix discusses arbitrage-free initialization, provides proofs of optimality conditions (Lemma 3.1 and Theorem 3.4), and shows that minimal faces are well defined."
    }, {
      "heading" : "C.1 Arbitrage-free initialization",
      "text" : "Throughout the paper we assume that the initial state q0 is arbitrage-free in the sense that a trader with no budget prefers to stay in q0:\nDefinition C.1. We say that the initial state q0 is arbitragefree with respect to µ ∈ M if q0 is an optimal state at budget zero, i.e., q0 ∈ Q̂(0; q0).\nThis corresponds to the assumption that a trader cannot extract a positive expected profit without risking some capital. Below we show that the condition is easily ensured for both the log-partition and quadratic cost.\nThe assumption of arbitrage-free initialization was added after the paper was published in the Proceedings of the 31st Conference on Uncertainty in Artificial Intelligence, 2015. For the sake of consistency with the published version, we have only made corrections in Appendix. Without arbitrage-free initialization, Lemma 3.1 and its corollaries fail to hold forB = 0. The main text requires the following four corrections:\nLemma 3.1: Let q0 be arbitrage-free. Then q ∈ Q̂(B; q0) if and only if . . .\nTheorem 3.4: Let q0 be arbitrage-free. Then q ∈ Q̂(q0) if and only if . . .\nCorollary 3.5: Let q0 be arbitrage-free. Then Q̂(ν; q0) = p−1(ν) ∩ [q0 +K(Xν)]. In particular, . . .\nDefinition 3.7: . . . if for all beliefs µ ∈ M′ and all arbitrage-free initial states q0 ∈ p−1(M′) . . .\nBelow we show that regardless of q0, any q ∈ Q̂(q0) is arbitrage-free. This property is useful in proving our main result (Theorem 5.2). We also derive necessary and sufficient conditions for arbitrage-free initialization. In particular, we show that any q0 is arbitrage-free for the logpartition cost, and any q0 with p(q0) ∈M is arbitrage-free for the quadratic cost.\nProposition C.2. Any q ∈ Q̂(q0) is arbitrage-free for any q0 ∈ Rn.\nProof. Let q ∈ Q̂(B; q0) for some B ≥ 0 and let q′ ∈ Q̂(0; q). We will use path independence to show that also q ∈ Q̂(0; q). To begin, note that the budget constraints satisfied by q and q′ are\nU(q, ω; q0) ≥ −B for all ω ∈ Ω, U(q′, ω; q) ≥ 0 for all ω ∈ Ω.\nBy path independence, we therefore have, for all ω ∈ Ω,\nU(q′, ω; q0) = U(q ′, ω; q) + U(q, ω; q0) ≥ −B ,\nso q′ satisfies the budget constraints forB at the initial state q0. Since q is optimal for the budget B and the initial state q0, we must have\nU(q′, µ; q0) ≤ U(q, µ; q0) .\nPath independence then gives\nU(q′, µ; q) = U(q′, µ; q0)−U(q, µ; q0) ≤ 0 = U(q, µ; q) .\nSince q′ ∈ Q̂(0; q) and q is a feasible action for the budget zero and the initial state q, we must have U(q′, µ; q) = 0 = U(q, µ; q) and thus q ∈ Q̂(0; q).\nProposition C.3. If q0 is arbitrage-free then p(q0) ∈M.\nProof. For a contradiction, assume p(q0) 6∈ M. We will show that there exists a state q′ such that U(q′, ν; q0) ≥ ε for all ν ∈ M and some ε > 0. This will imply that the budget constraints for B = 0 are satisfied for q′ and also that U(q′, µ; q0) ≥ ε. This contradicts the optimality of q0 because U(q0, µ; q0) = 0.\nTo proceed, consider the optimization\nsup q∈Rn min ν∈M U(q, ν; q0)\n= min ν∈M sup q∈Rn U(q, ν; q0) (C.1)\n= min ν∈M sup q∈Rn\n[q · ν − q0 · ν − C(q) + C(q0)]\n= min ν∈M\n[C∗(ν)− q0 · ν + C(q0)] (C.2)\n= min ν∈M D(q0, ν) (C.3)\n= D(q0, ν̂) (C.4)\nwhere we use Sion’s minimax theorem in Eq. (C.1), the definition of conjugate in Eq. (C.2), and denote the minimizer of Eq. (C.3) as ν̂ in Eq. (C.4). By assumption, p(q0) 6∈ M and thus p(q0) 6= ν̂. This implies that D(q0, ν̂) > 0, so the value of the initial supremum is greater than zero. Therefore, there must exist q′ such that minν∈M U(q\n′, ν; q0) =: ε > 0, yielding the desired contradiction.\nWhile p(q0) ∈ M is a necessary condition for arbitragefree initialization, it is not sufficient. For example, consider n = 1, M = [0, 1], and the cost function C(q) = max{0, q2/2}. Here, q0 = −1 is not arbitrage-free for any µ ∈ (0, 1], even though p(q0) = 0 ∈ M. We next present a technical lemma followed by two sufficient conditions.\nLemma C.4. Let q0 be such that p(q0) ∈ M and let q ∈ Q̂(0; q0). Then p(q) = p(q0), and for any decomposition of p(q0) into a convex combination over ω, i.e., for any weights cω ≥ 0 such that p(q0) = ∑ ω∈Ω cωω and∑\nω∈Ω cω = 1, we have cωU(q, ω; q0) = 0 for all ω.\nProof. Budget constraints on q ∈ Q̂(0; q0) imply that\nU(q, ω; q0) ≥ 0 for all ω ∈ Ω. (C.5)\nFor a given set of weights cω write\n0 ≤ ∑ ω cωU(q, ω; q0) = U ( q, ∑ ω cωω; q0 ) (C.6)\n= U(q, p(q0); q0)\n= q · p(q0)− q0 · p(q0)− C(q) + C(q0) = q · p(q0)− C∗ ( p(q0) ) − C(q)\n= −D ( q, p(q0) ) .\nSince Bregman divergence is non-negative, we obtain that D(q, p(q0)) = 0 and thus p(q) = p(q0). From Eq. (C.6), we then also obtain that each of the terms cωU(q, ω; q0) must equal zero, because cω ≥ 0 and utilities are nonnegative by Eq. (C.5).\nProposition C.5. The state q0 is arbitrage-free if either of the following conditions holds:\n(a) p(q0) ∈ riM; (b) p(q0) ∈M and C is strictly convex."
    }, {
      "heading" : "Proof.",
      "text" : "Part (a). Let q ∈ Q̂(0; q0). It suffices to show that U(q, µ; q0) ≤ U(q0, µ; q0) = 0. To begin, note that since p(q0) ∈ riM, we can write p(q0) as a positive convex combination of ω ∈ Ω, i.e., p(q0) = ∑ ω∈Ω cωω where\ncω > 0 and ∑ ω∈Ω cω = 1. By Lemma C.4, we obtain that cωU(q, ω; q0) = 0 for all ω and hence U(q, ω; q0) = 0 for all ω. Since µ is a convex combination of ω, the linearity of utility in the second argument yields U(q, µ; q0) = 0.\nPart (b). We again appeal to Lemma C.4. Let q ∈ Q̂(0; q0). Then by Lemma C.4, we have that p(q) = p(q0), and the strict convexity of C yields q = q0.\nPart (a) implies that every q0 ∈ Rn is arbitrage-free for the log-partition cost. Part (b) implies that every q0 such that p(q0) ∈M is arbitrage-free for the quadratic cost."
    }, {
      "heading" : "C.2 Proofs of Lemma 3.1 and Theorem 3.4",
      "text" : "Proof of Lemma 3.1. We prove the revised version of the lemma with the additional assumption that q0 is arbitragefree (see Appendix C.1). First consider B = 0 and assume q ∈ Q̂(B; q0). Since q0 is arbitrage-free, we have p(q0) ∈ M, so it can be written as a convex combination of ω ∈ Ω, say p(q0) = ∑ ω cωω. By Lemma C.4 we therefore obtain that each of the terms cωU(q, ω; q0) must equal zero. Thus, whenever cω > 0, we necessarily have U(q, ω; q0) = 0. Let S := {ω ∈ Ω : cω > 0}. Note that for any x, x′ ∈ S we have (q−q0)·(x′−x) = U(q, x′; q0)−U(q, x; q0) = 0. Since S is non-empty, we can pick an arbitrary s ∈ S and define X := {ω ∈ Ω : (q − q0) · (ω − s) = 0}. We next argue thatX satisfies conditions (a)–(d) and then show that it is actually a face. Conditions (a) and (d) follow from the definition ofX and the fact that U(q, s; q0) = 0. Condition (b) follows because q satisfies budget constraints for B = 0. Finally, condition (c) follows because S ⊆ X . To see that X is a face, note that condition (b) actually shows that X is exactly the set of minimizers of the linear function (q − q0) · ω over ω ∈ Ω.\nNow, consider B > 0. We begin by forming a Lagrangian of Convex Program (2.1), with non-negative multipliers λ = (λω)ω∈Ω:\nL(q, λ) = U(q, µ; q0) + ∑ ω λω (U(q, ω; q0) +B) .\nSince the utilities are convex and finite over q ∈ Rn, and q0 is feasible with all of the constraints satisfied with strict inequalities, KKT conditions are both necessary and sufficient for optimality [18, Corollary 28.3.1]. KKT conditions state that q and λ solve the above problem if and only if the following hold:\n• primal feasibility: U(q, ω; q0) ≥ −B for all ω ∈ Ω; • dual feasibility: λ ≥ 0; • first-order optimality: ∇1L(q, λ) = 0; • complementary slackness: λω (U(q, ω; q0) +B) = 0;\nfor all ω ∈ Ω.\nWe next show that KKT conditions imply (a)–(d). Assume that KKT conditions hold. Let X be the set of outcomes with tight constraints, i.e., X = {x ∈ Ω : U(q, x; q0) = −B}. For this X , the conditions (a) and (b) hold by primal feasibility and our definition ofX . Note that we have either X = ∅ or X = argminx∈Ω(q − q0) · x, i.e., X is a face of M. If X 6= ∅, then (d) follows from our definition of X . If\nX = ∅, then (d) follows by primal feasibility. We prove (c) by analyzing first-order optimality. First note that:\n∇1U(q, ν; q0) = ν −∇C(q) = ν − p(q) .\nThus, first-order optimality is equivalent to ∇1U(q, µ; q0) + ∑ ω λω∇1U(q, ω; q0) = 0\nµ− p(q) + ∑ ω λω(ω − p(q)) = 0\np(q) = µ+\n∑ ω λωω\n1 + ∑ ω λω .\nBy complementary slackness, λω = 0 for ω ∈ Ω\\X , so this shows (c).\nFor the converse, assume that (a)–(d) hold. In particular, by (c), let p(q) = cµµ + ∑ ω∈X cωω where cµ, cω ≥ 0\nand cµ + ∑ ω∈X cω = 1. If cµ > 0, then we obtain that KKT conditions hold for the given q and λω = cω/cµ for ω ∈ X and λω = 0 for ω ∈ Ω\\X . Since KKT conditions are sufficient for optimality [18, Theorem 28.3], we obtain q ∈ Q̂(B; q0).\nIf cµ = 0, we actually have p(q) ∈ conv(X) and X 6= ∅. Thus, from (a) and (d),\nB = ∑ ω∈X cω [−U(q, ω; q0)] = −U ( q, ∑ ω∈X cωω; q0 ) = −U ( q, p(q); q0 ) (C.7)\n= −q · p(q) + q0 · p(q) + C(q)− C(q0) (C.8) = −C∗ ( p(q) ) + q0 · p(q)− C(q0) (C.9)\n= −D ( q0, p(q) ) . (C.10)\nBy non-negativity of Bregman divergence, Eq. (C.10) can only hold if B = 0 and p(q0) = p(q). Feasibility of q follows by (d) and (b). To see that q is also optimal, first note that U(q, ω; q0) ≥ 0 for all ω. Since µ is a convex combination of ω, the linearity of U in the second argument implies U(q, µ; q0) ≥ 0. However, by arbitrage-free initialization, q0 is optimal and U(q0, µ; q0) = 0, so we must have U(q, µ; q0) = 0 and q optimal as well.\nProof of Theorem 3.4. We prove the revised version of the theorem with the additional assumption that q0 is arbitragefree (see Appendix C.1). If q ∈ [q0 + K(Xp(q)) then we have q ∈ Q̂(q0) by Lemma 3.1 with X = Xp(q). For the converse, assume that q ∈ Q̂(q0). Lemma 3.1 then implies that there exists a face X such that q ∈ [q0 + K(X)] and p(q) ∈ conv(X ∪ {µ}). By minimality of Xp(q), we must have Xp(q) ⊆ X . By anti-monotonicity of witness cones, we then have q ∈ [q0 +K(Xp(q))], finishing the proof."
    }, {
      "heading" : "C.3 Minimal face",
      "text" : "Proposition C.6. Fix µ ∈ M. Then for any ν ∈ M, there exists the minimal face Xν with the following property: for\nany face X such that ν ∈ conv(X ∪ {µ}), we must have Xν ⊆ X .\nProof. If ν = µ then Xν = ∅ and the statement holds. Otherwise, consider the ray ρ from µ towards ν, and let ν′ be the last point on the ray that is contained inM. Let Xν be the unique face such that ν′ lies in the relative interior of conv(Xν).8 We will argue that this face satisfies the condition stated in the proposition. Let X be any face such that ν ∈ conv(X ∪ {µ}). Then ν = λµ + (1 − λ)νX for νX ∈ conv(X) and λ ∈ [0, 1). Since νX ∈ M, it must lie on the ray ρ at some point between ν and ν′. We next argue than ν′ ∈ conv(X). Suppose not, this means that ν′ 6= νX , and νX maximizes some linear function, say u · ν̄, over ν̄ ∈M, and u · ν′ < u · νX , i.e.,\nu · (νX − ν′) > 0 .\nSince ν 6= µ and ν′ 6= νX , and the points µ, ν, νX , ν′ lie on the ray ρ (in that order), there exists η > 0 such that µ− νX = η(νX − ν′) and thus\nu · (µ− νX) = ηu · (νX − ν′) > 0\nimplying that u · µ > u · νX and contradicting the assumption that νX is the maximizer. Thus, ν′ ∈ conv(X). By a similar reasoning, we can also show that for any x ∈ Xν , we must have x ∈ X . Again, for the sake of contradiction assume that there is u such that ν′ is a maximizer of u · ν̄ over ν̄ ∈ M, but x is not. Then x 6= ν′, and since ν′ ∈ ri conv(Xν), for sufficiently small η, we have ν′′ := ν′+η(ν′−x) ∈M, and u ·ν′′ > u ·ν′ contradicting the maximizer property of ν′. Thus, Xν ⊆ X .\nD IMPOSSIBILITY RESULT OF FORTNOW AND SAMI\nWe can use the KKT lemma (Lemma 3.1) and the continuity of the perpendiculars (Theorem F.3) to derive the impossibility result of Fortnow and Sami [8]. The result states that in the presence of budget constraints, there is no market scoring rule guaranteeing that the market prices move towards the agent belief along the connecting straight line (unless aff(M) is a line or a point).\nOur construction is based on the observation that according to the KKT lemma, the solutions q must lie on a perpendicular at q0, and the continuity of the perpendiculars implies that p(q) is arbitrarily close to p(q0) for a small enough budget. In particular, if p(q0) lies in the relative interior of conv(Xp(q0) ∪ {µ}) then we can assure that so does p(q), and this property does not change with small perturbations\n8The existence of such a unique face follows by the standard result stating that relative interiors of conv(X) across non-empty faces X form a disjoint partition of M.\nof µ—in particular, q remains a solution to the budget constrained optimization. Thus, the direction of movement of market prices is independent of small changes in µ.\nThis informal reasoning can be turned into the following formal argument. Assume the dimension of aff(M) is d ≥ 2. Choose µ ∈ riM and a face X such that aff(X) is of dimension d − 1, so conv(X ∪ {µ}) is of dimension d. Pick q0 such that p(q0) lies in ri conv(X ∪{µ}), which assures that X is the minimal face for p(q0). Let ν0 denote p(q0). Consider the µ-perpendicular to X at q0. By continuity of perpendiculars, we can pick a point ν ν0 on the perpendicular which is arbitrarily close to ν0 and, in particular, which still lies in ri conv(X ∪ {µ}), so its minimal face is stillX . Pick q ∈ q0+X⊥ such that p(q) = ν, which is possible by Proposition 4.2. We next show that actually q ∈ q0 +K(X), which implies that q is a solution to budget constrained optimization (by Theorem 3.4).\nLet u be the normal to aff(X) within aff(M) such thatM lies in the non-negative half-space, i.e., all ν′ ∈ M can be expressed in the form ν′ = a′+ t′u where a′ ∈ aff(X) and t′ ≥ 0. Thus, we can write\nν0 = a0 + t0u ,\nν = aν + tνu ,\nω = aω + tωu for all ω ∈ Ω ,\nfor some a0, aν , aω ∈ aff(X) and t0, tν , tω ≥ 0. By convexity\n0 ≤ (q − q0) · (ν − ν0) = (q − q0) · [aν − a0 + (tν − t0)u] = (q − q0) · (tν − t0)u (D.1)\nwhere Eq. (D.1) follows because (q− q0) ⊥ aff(X). Since ν ν0 along the perpendicular, we have that tν > t0 and so Eq. (D.1) implies\n0 ≤ (q − q0) · u .\nThus, for any ω ∈ Ω and x ∈ X ,\n(q − q0) · (ω − x) = (q − q0) · (aω − x+ tωu) = tω(q − q0) · u ≥ 0 ,\nshowing that q ∈ q0 +K(X), i.e., q ∈ Q̂(q0). If ν0, ν and µ are not on a straight line, we are done. Otherwise, slightly move µ within the affine space parallel to aff(X), so that X remains the minimal face for ν and thus q remains a solution, but ν0, ν and µ are no longer on a straight line."
    }, {
      "heading" : "E BUDGET ADDITIVITY: EXAMPLES",
      "text" : "Using the KKT lemma, we illustrate on examples that budget additivity sometimes holds and sometimes does not.\nRecall that budget additivity states that if several agents have the same belief and limited budgets, the sequence of their actions is equivalent to the action of a single agent with the same belief and the sum of the budgets. In the first example, we give an illustration of when this property holds. In the second example, we show how this property can be violated, and the single agent with the sum of budgets has more power in the market.\nExample E.1 (Quadratic cost on a square). Consider the following outcome space and belief:\nω00 = (0, 0)\nω01 = (0, 1)\nω10 = (1, 0)\nω11 = (1, 1)\nµ = (0.9, 0.3)\nFurther, consider the following market states:\nq0 = ν0 = (0.5, 0.1) q1 = ν1 = (0.6, 0.2) = 1 3ω00 + 2 3µ qµ = µ\nThe divergence of these states (and the belief µ) from individual outcomes is:\n1 2‖· − ·‖ 2 ω00 ω01 ω10 ω11 ν0 0.13 0.53 0.13 0.53 ν1 0.2 0.5 0.1 0.4 µ 0.45 0.65 0.05 0.25\nWith these in hand, we can now use the KKT lemma and show that q1 = ν1 is an optimal action at q0 = ν0 under belief µ for a specific budget. Since q1 is a convex combination of ω00 and µ, we need to show that the only tight budget constraint is due to ω00. We also calculate budgets required to move from q0 and q1 to qµ:\nω00 ω01 ω10 ω11 U(q1, ·; q0) −0.07 0.03 0.03 0.13 B01 = 0.07 U(qµ, ·; q0) −0.32 −0.12 0.08 0.28 B0µ = 0.32 U(qµ, ·; q1) −0.25 −0.15 0.05 0.15 B1µ = 0.25\nHence, a sequence of moves with budgets B01 and B1µ is equivalent to a single move with the budget B0µ = B01 + B1µ. While we have shown this only for a specific sequence of budgets, results of Section 5 show that for the quadratic cost on a square, budget additivity holds for any sequence of budgets and any belief µ ∈M. Example E.2 (Quadratic cost on an obtuse triangle.). Now, we work out an example where the budget additivity does not hold. Consider the following outcome space and belief:\nω1 = (0.0, 0.0)\nω2 = (1.8, 0.0)\nω3 = (6.0, 4.2)\nµ= (2.7, 1.8)\nFurther, consider the following set of market states:\nq0 = ν0 = (2.7, 0.9) q1 = ν1 = (2.4, 1.2) = 1 3ω2 + 2 3µ q2 = ν2 = (2.4, 1.6) = 1 9ω1 + 8 9µ\nq3 = ν3 = ( 0.9 √ 105 13 , 0.6 √ 105 13 ) = ( 1− 13 √ 105 13 ) ω1 + ( 1 3 √ 105 13 ) µ ≈ 119ω1 + 18 19µ\nqµ = µ\nThe divergence of these states (and the belief µ) from individual outcomes is:\n1 2‖· − ·‖ 2 ω1 ω2 ω3 ν0 4.05 0.81 10.89 ν1 3.6 0.9 10.98 ν2 4.16 1.46 9.86 ν3 4.725 1.74 . . . 9.04 . . . µ 5.265 2.025 8.325\nAgain as before, we can use the KKT lemma and show for j = 1, 2, 3, that qj = νj is an optimal action at qj−1 = νj−1 under belief µ, with the corresponding budgets as:\nω1 ω2 ω3 U(q1, ·; q0) 0.45 −0.09 −0.09 B01 = 0.09 U(q2, ·; q1) −0.56 −0.56 1.12 B12 = 0.56 U(q3, ·; q2) −0.565 −0.28 . . . 0.82 . . . B23 = 0.565 U(qµ, ·; q0) −1.215 −1.215 2.565 B0µ = 1.215\nThe above table also shows that the budget B0µ = 1.215 suffices to move directly from q0 to qµ. However, note that the sum\nB01 +B12 +B23 = 1.215 = B0µ ,\nbut ν3 6= µ, i.e., after the sequence of optimal actions with budgets B01, B12, and B23, the market is still not at the belief shared by all agents, even though with the budget B0µ, it would have reached it. Note that it is possible to achieve budget additivity by using log-partition cost instead of quadratic cost (Theorem 5.6)."
    }, {
      "heading" : "F PERPENDICULARS",
      "text" : ""
    }, {
      "heading" : "F.1 Proofs of Propositions 4.2 and 4.3",
      "text" : "Proof of Proposition 4.2. We will show that condition (i) is equivalent to condition (ii) by analyzing the first order optimality conditions. Consider the problem\nmin ν′∈Aλ\nD(q, ν′) (F.1)\nused to define νλ. Assume that the minimum is attained at some ν′ ∈ ri domC∗. Thus, ν′ ∈ A ∩ (ri domC∗). Since D(q, ν′) is subdifferentiable at ν′, the first order optimality implies that (\n∂2D(q, ν ′) ) ∩A⊥λ 6= ∅ . (F.2)\nSince ∂2D(q, ν′) = ∂C∗(ν′)−q = p−1(ν′)−q, andA⊥λ = A⊥0 , we have\np−1(ν′) ∩ (q +A⊥0 ) 6= ∅ ,\nproving that (i)⇒(ii). Conversely, assume that ν′ ∈ A ∩ (ri domC∗) and p−1(ν′) ∩ (q + A⊥0 ) 6= ∅. Then we can pick λ such that ν′ ∈ Aλ, and for this λ, we obtain that condition (F.2) holds and hence ν′ solves problem (F.1). Since ν′ ∈ ri domC∗, we obtain that ν′ ∈ im γ.\nProof of Proposition 4.3. Let γ′ be the a1-perpendicular to A0 at q′. Since the ambient space A for both perpendiculars is the same, by Proposition 4.2(ii), it suffices to show that q + A⊥0 = q\n′ + A⊥0 . However, this follows by the assumption of the theorem, since q′ − q ∈ A⊥0 ."
    }, {
      "heading" : "F.2 Continuity of perpendiculars",
      "text" : "In this section, we prove two important properties of perpendiculars: (a) they are continuous maps; (b) intersections of perpendiculars with compact convex sets correspond to compact sets of market states up to certain “irrelevant displacements”. To define these irrelevant displacements, let L be the linear space parallel to aff(domC∗). Then the displacements of market state within L⊥ are irrelevant in the sense that they have no effect on the Bregman divergence and hence by Eq. (4.1) also no effect on the utility function. Specifically, D(q + u, ν) = D(q, ν) for all u ∈ L⊥ (see next proposition). For instance, for LMSR over a simplex, the irrelevant displacements are of the form λ~1 where λ ∈ R and ~1 is the all-ones vector. Proposition F.1. Let L be the linear space parallel to aff(domC∗). Then for all q ∈ Rn and u ∈ L⊥\nD(q + u, ν) = D(q, ν) .\nProof. If ν 6∈ domC∗ then the statement obviously holds. Pick ν ∈ domC∗, q ∈ Rn and u ∈ L⊥. By the Mean Value Theorem, we can write\nC(q + u)− C(q) = u · ∇C(q̄)\nfor some q̄. Let ν̄ := ∇C(q̄) ∈ domC∗. Then we can write\nD(q + u, ν)−D(q, ν) = C(q + u)− C(q)− u · ν = u · (ν̄ − ν) = 0\nsince u ⊥ (ν̄ − ν).\nThe following result of Rockafellar [18] will be instrumental in proving continuity properties of the perpendicular. It is paraphrased for our setting. The notation int refers to the topological interior of the set.\nTheorem F.2 (Theorem 24.7 of Rockafellar [18]). Let G : Rn → (−∞,∞] be a lower semi-continuous convex function, and let K be a non-empty, closed and bounded subset of int(domG). Then the set\n∂G(K) = ⋃ u∈K ∂G(u)\nis non-empty, closed and bounded.\nNow we are ready to state and prove the continuity of perpendiculars:\nTheorem F.3. Let γ be the a1-perpendicular to A0 at q, and K ⊆ ri domC∗ be a closed bounded convex set intersecting im γ.\n(a) The map γ is continuous and Λ is open. (b) The intersection M := {(ν, q) : ν ∈ (im γ) ∩K, q ∈\np−1(ν)} can be written as M = C + (0⊕L⊥) where C is compact and ⊕ denotes a direct sum of vector spaces.\nProof. Throughout the proof, let F (ν) := D(q, ν) = C(q) + C∗(ν) − q · ν. Note that F is strictly convex on ri domC∗. We will be also making frequent use of the fact that F is continuous on ri domC∗ (because C∗ is continuous on ri domC∗ by Theorem 10.1 of Rockafellar [18]). Let ‖·‖ denote the usual Euclidean norm. Let a0 = argmina∈A0‖a1 − a‖, i.e., (a1 − a0) ∈ A ⊥ 0 . Let A = aff(A0 ∪ {a1}) and recall that\nAλ = A0 + λ(a1 − a0)\nand νλ = argmin\nAλ\nF (ν) .\nWe use the notation B(ν, r;M) := {ν′ ∈ M : ‖ν′ − ν‖ ≤ r} for the Euclidean ball relative to set M , and S(ν, r;M) := {ν′ ∈M : ‖ν′− ν‖ = r} for the Euclidean sphere relative to set M .\nPart (a). We need to show that γ is continuous. Let λ ∈ Λ, i.e., νλ ∈ ri domC∗. Choose a sufficiently small r > 0 such that the ball B := B(νλ, r;A) is contained in ri domC∗. To show the continuity of γ and openness of Λ, it suffices to show that if λ′ is close enough to λ then νλ′ ∈ B. Let ε = r/ √\n2. Consider the sphere Sλ := S(νλ, ε;Aλ) ⊆ ri domC∗. This sphere is a compact set, so F attains the minimum on Sλ. By strict convexity of F and the optimality of νλ, this minimum must be bounded away from F (νλ). Thus, there exists δ > 0 such that\nF (ν) ≥ F (νλ) + δ for all ν ∈ Sλ . (F.3)\nLet δ′ = δ/3. Since F is continuous on ri domC∗, it is uniformly continuous on B and thus there exists ε′ ∈ (0, ε]\nsuch that\n|F (ν′)− F (ν)| ≤ δ′\nfor all ν, ν′ ∈ B such that ‖ν′ − ν‖ ≤ ε′. (F.4)\nLet Bλ := B(νλ, ε;Aλ) be the closed ball with Sλ as the border. For any λ′, let Sλ′ := Sλ+(λ′−λ)(a1−a0) ⊆ Aλ′ and similarly Bλ′ . Let ν̃λ′ = νλ+(λ′−λ)(a1−a0) ∈ Aλ′ . Note that if |λ′ − λ| ≤ ε′, then Bλ′ ⊆ B, because√ (λ′ − λ)2 + ε2 ≤ ε √ 2 = r. So we can use the above uniform continuity result and write:\n• F (ν′) ≥ F (νλ)+δ−δ′ = F (νλ)+2δ′ for all ν′ ∈ Sλ′ by Eqs. (F.3) and (F.4) • F (ν̃λ′) ≤ F (νλ) + δ′ by Eq. (F.4)\nBy convexity of F , this means that νλ′ ∈ Bλ′ . This proves that νλ′ ∈ B provided that |λ′ − λ| ≤ ε′, thus proving the continuity of γ at λ.\nPart (b). We first show that the set M is closed and then that it is bounded, except for directions in 0 ⊕ L⊥. Since K ⊆ ri domC∗, we can use Proposition 4.2 to write the set M as\nM = {(ν′, q′) : ν′ ∈ Rn, q′ ∈ ∂C∗(ν′)} ∩ ( Rn × (q +A⊥0 ) ) ∩ (K × Rn) , (F.5)\nwhere we used the identity p−1(ν′) = ∂C∗(ν′) valid for all ν′. The closedness follows, because the set of pairs {(ν′, q′) : ν′ ∈ Rn, q′ ∈ ∂C∗(ν′)} is closed [18, Theorem 24.4].\nDenote the projections of M on its two components as"
    }, {
      "heading" : "M1 := {ν′ : (ν′, q′) ∈M for some q′} ,",
      "text" : ""
    }, {
      "heading" : "M2 := {q′ : (ν′, q′) ∈M for some ν′} .",
      "text" : "To show boundedness, we only need to analyze M2 since M1 ⊆ K. By Eq. (F.5), it in fact suffices to show that the set ∂C∗(K) = ⋃ ν∈K ∂C\n∗(ν) is bounded except for directions in L⊥. We would like to appeal to Theorem F.2, but we cannot do it directly, because it is stated for the interior rather than the relative interior. For ν ∈ ri domC∗, we have ∂C∗(ν) 6= ∅, and using the fact that C∗(ν) =∞ over ν + (L⊥\\{0}), we obtain that\n∂C∗(ν) = S + L⊥\nfor some set S ⊆ L. This set S coincides with subdifferential when C∗(ν) is only viewed as a function over aff(domC∗). By applying Theorem F.2 to this restriction, we then indeed obtain that\n∂C∗(K) = C + L⊥\nfor a non-empty closed and bounded set C. Note that L⊥ ⊆ A⊥0 , so L⊥ survives taking the intersection in Eq. (F.5) and hence part (b) of the theorem follows."
    }, {
      "heading" : "G PROOFS OF SUFFICIENT CONDITIONS FOR ACUTE ANGLES",
      "text" : "Proposition G.1. For the quadratic cost, Definition 5.1 is equivalent to Definition 3.8.\nProof. We first show that Definition 5.1 (general acute angles) implies Definition 3.8 (Euclidean acute angles). Assume that the general acute angles hold for X . Let ν̄ ∈ M and ν be its projection on aff(X). If ν̄ = ν then angles between ν̄, ν and ω ∈ Ω are non-obtuse in the sense that (ν̄ − ν) · (ω − ν) ≥ 0. If ν̄ 6= ν, then let γ be the ν̄perpendicular to X at ν (note that p is the identity map, so ν is both a state and the corresponding price vector). Note that ν̄ ν and thus by the general acute angles assumption p−1(ν̄) ∩ [ν + K(X)] 6= ∅. Since p−1(ν̄) = {ν̄}, this is equivalent to\n(ν̄ − ν) · (ω − x) ≥ 0 for all x ∈ X,ω ∈ Ω .\nSince ν ∈ aff(X), we obtain that (ν̄ − ν) · (ω − ν) ≥ 0, i.e., the Euclidean acute angles hold.\nConversely, assume that the Euclidean acute angles hold. Let γ be a µ-perpendicular to a face X for some µ ∈ M and ν′ ν be two points in im γ such that ν ∈ M. We need to show that p−1(ν′) ∩ [ν + K(X)] 6= ∅, which is equivalent to\n(ν′ − ν) · (ω − x) ≥ 0 for all x ∈ X,ω ∈ Ω . (G.1)\nIf ν′ = ν then (G.1) holds. Otherwise, we can write ν′ = ν + uX + λ(µ− ν̂) for an arbitrary ν̂ ∈ aff(X), a suitable λ > 0 and uX from the linear space parallel with aff(X). Pick ν̂ ∈ ri conv(X) (and the corresponding λ and uX ). We claim that there is a small enough η > 0 such that ν̄ := ν̂ + η(ν′ − ν) ∈ M. This follows, because from our previous reasoning,\nν̄ = ν̂ + ηuX + ηλ(µ− ν̂),\nand for sufficiently small η > 0, we have [ν̂+ηλ(µ− ν̂)] ∈ ri conv(X ∪ {µ}) and then also for sufficiently small η, [ν̂ + ηλ(µ− ν̂) + ηuX ] ∈ ri conv(X ∪ {µ}) ⊆M. Thus, by the Euclidean acute angles,\n(ν̄ − ν̂) · (ω − ν̂) ≥ 0 for all ω ∈ Ω.\nSince ν̄ − ν̂ = η(ν′ − ν) and (ν′ − ν) ⊥ (x − ν̂) for all x ∈ X , we also obtain\nη(ν′ − ν) · (ω − x) ≥ 0 for all x ∈ X,ω ∈ Ω\nproving (G.1) and finishing the proof.\nProof of Theorem 5.3. Let L be the linear space parallel to aff(X). First show that the acute angles imply the inclusion of the projection in an acute cone. Note that the inclusion is\neither true for all a0 ∈ aff(X) or none, so we can without loss of generality choose a0 ∈ conv(X). Let ω1, ω2 ∈ Ω and let ω′1 and ω ′ 2 be their projections to A ′, thus\nω′1 − ω1 ∈ L , ω′2 − ω2 ∈ L .\nWe need to show that\n(ω′1 − a0) · (ω′2 − a0) ≥ 0 .\nIf ω1 ∈ aff(X) then ω′1 = a0 and the statement holds. Assume that ω1 6∈ aff(X) and let γ be the ω1-perpendicular to X at a0. Let ω′′1 ∈ im γ be the projection of ω1 on im γ. Thus, we also have\nω′′1 − ω1 ∈ L\nand also ω′′1 a0. Now by the acute angles assumption, ω′′1 − a0 ∈ K(X), i.e., for any x ∈ X ,\n0 ≤ (ω′′1 − a0) · (ω2 − x) .\nCombining this with the previous identities, we obtain\n0 ≤ (ω′′1 − a0) · (ω2 − x) = (ω′′1 − a0) · (ω′2 − a0) = (ω′1 − a0) · (ω′2 − a0)\nwhere the first equality follows because ω′′1 − a0 ∈ L⊥ and\nω′2 − ω2 ∈ L , a0 − x ∈ L ,\nthe second equality follows because ω′2 − a0 ∈ L⊥ and\nω′′1 − ω′1 = [(ω′′1 − ω1)− (ω′1 − ω1)] ∈ L .\nFor the converse, assume that the inclusion of the projection of M in an affine acute cone holds. Let γ be the µperpendicular to X at ν for some µ, ν ∈M and let ν′ ν. We need to show that ν′−ν ∈ K(X). Note that 0 ∈ K(X), so we only analyze ν′ 6= ν. Let µ′ be the projection of µ on im γ and a0 be the intersection of im γ with aff(X). Note that ν′ − ν = η(µ′ − a0) for a suitable η > 0, so it suffices to show that µ′ − a0 ∈ K(X). Pick ω ∈ Ω and x ∈ X and let ω′ be the projection of ω into A′ := a0 + X⊥. Since the projection ofM into A′ is contained in an affine acute cone with the vertex a0, we obtain\n(µ′ − a0) · (ω′ − a0) ≥ 0\nSince ω′ −ω ∈ L and x− a0 ∈ L, whereas µ′ − a0 ∈ L⊥, we obtain\n(µ′ − a0) · (ω − x) ≥ 0\nshowing that the acute angles hold.\nProof of Corollary 5.4. We will show that the assumption of Theorem 5.3 holds. Since the assumption is invariant under rigid transformations, we can just consider the case a0 = 0 ∈ X . In this case, the projection of Ω is a lower\ndimensional hypercube (corresponding to a subset of Ω). Note that Ω lies in the non-negative orthant and the nonnegative orthant is an acute cone with the vertex a0 = 0, so the assumption of Theorem 5.3 holds and hence the acute angles hold for the hypercube.\nProof of Corollary 5.5. Again, by symmetry, it suffices to consider faces of the form X = {ei : i ∈ [k]} for k ∈ {1, . . . , n}. Let a0 = e1. The affine space A′ is described by\nA′ = {a ∈ Rn : (a− e1) · (ei − e1) = 0 for 2 ≤ i ≤ k} = {a ∈ Rn : a[i] = a[1]− 1 for 2 ≤ i ≤ k}\nwhere we use notation a[i] to denote the i-th coordinate. The projection of ej for j > k into A′ is of the form\ne′j = ej + k∑ i=2 αj [i] (ei − e1) ,\nfor some αj [i] ∈ R, i.e.,\ne′j [i] =  − ∑k i′=2 αj [i ′] if i = 1 αj [i] if i ∈ {2, . . . , k} 1 if i = j 0 otherwise.\nThe only solution of the above form that lies in A′ is obtained by setting αj [i] = −1/k, yielding\ne′j [i] =  1− 1/k if i = 1 −1/k if i ∈ {2, . . . , k} 1 if i = j 0 otherwise.\nTherefore, for any pair of projections e′j , e ′ j′ for j, j ′ > k, and j 6= j′, we have\n(e′j − e1) · (e′j′ − e1) = 1/k > 0 ,\nso the projection of Ω is in an acute cone, i.e., acute angles hold.\nProof of Theorem 5.6. We begin by characterizing an a1perpendicular to a face X 6= Ω at q. Let ν := p(q) 6∈ aff(X), so the ambient space of the perpendicular is aff(X ∪ {ν}). Thus, for a given X and q, we will have the same im γ and the same order on ν ∈ im γ for any valid a1 ∈ M̃ which allows to define the a1-perpendicular to X at q. Recall that Pq is the probability measure over Ω defined by\nPq(ω) = e q·ω−C(q)\nand note that Pq(ω) > 0 for all ω ∈ Ω. Recall that ν = ∑ ω∈Ω Pq(ω)ω .\nLet Xc = Ω\\X . Separate ν into components corresponding to x ∈ X and ω ∈ Xc:\nνX = 1\nPq(X) ∑ x∈X Pq(x)x ,\nνXc = 1\nPq(Xc) ∑ ω∈Xc Pq(ω)ω ,\ni.e., ν = Pq(X)νX + Pq(X c)νXc .\nSince νX ∈ aff(X), we have\naff(X ∪ {ν}) = aff(X ∪ {νXc}) . (G.2)\nWe will show that im γ consists exactly of the points (1 − α̃)νX + α̃νXc for α̃ ∈ (0, 1).\nConsider ν′ ∈ im γ and q′ ∈ p−1(ν′)∩ (q+X⊥). For any x′, x ∈ X , we have\n(q′ − q) · (x′ − x) = 0 ,\nso q′ · (x′ − x) = q · (x′ − x) ,\nand hence\nPq′(x ′) Pq′(x) = eq ′·(x′−x) = eq·(x ′−x) = Pq(x ′) Pq(x) .\nSince this holds for arbitrary x, x′ ∈ X , we obtain\nPq′(x) Pq(x) = Pq′(X) Pq(X) for all x ∈ X . (G.3)\nSince ν′ is in the ambient space of the perpendicular, which is aff(X ∪ {ν}), by Eq. (G.2), we obtain\nν′ ∈ aff(X ∪ {νXc}) ,\nso ν′ can be written in the form\nν′ = ∑ x∈X α(x)x+\n( 1−\n∑ x∈X α(x)\n) νXc (G.4)\nfor some α(x) ∈ R for x ∈ X . Also,\nν′ = ∑ x∈X Pq′(x)x+ ∑ ω∈Xc Pq′(ω)ω .\nBy the affine independence of Ω, we therefore must have α(x) = Pq′(x). Plugging this into Eq. (G.4), we obtain\nν′ = (∑ x∈X Pq′(x)x ) + Pq′(X c)νXc\n=\n( Pq′(X)\nPq(X) ∑ x∈X Pq(x)x\n) + Pq′(X c)νXc\n= Pq′(X)νX + Pq′(X c)νXc\nwhere the second equality follows by Eq. (G.3). Thus, indeed ν′ = (1− α̃)νX + α̃νXc for α̃ = Pq′(Xc).\nFor any I ⊆ [0, 1], let\nJI := {(1− α̃)νX + α̃νXc : α̃ ∈ I} .\nSo far we have shown that im γ ⊆ J(0,1); we next argue that J(0,1) ⊆ im γ. We do this by exploiting the continuity properties of γ.\nFor any α̃, note that( (1− α̃)νX + α̃νXc ) ∈ ( aff(X) + α̃(νXc − νX) ) = Aλ\nfor a suitable λ. Let α̃0 and λ0 be the values associated with ν = p(q); note that both are greater than zero. Then, for any λ, the α̃ such that\n(1− α̃)νX + α̃νXc ∈ Aλ\nis obtained as α̃(λ) := α̃0λ/λ0. The domain Λ of γ is an open subset of the real line and therefore it is a union of disjoint open intervals. Let (\n¯ λ, λ̄) be the interval containing\nλ0. For the sake of contradiction assume that α̃( ¯ λ) > 0. Then J[α̃( ¯ λ),α̃0] is a compact subset of riM, and therefore by Theorem F.3, its intersection with im γ should be compact as well. However, by the selection of\n¯ λ, the in-\ntersection equals J(α̃( ¯ λ),α̃0], which is not compact, yielding a contradiction. Similarly, we obtain a contradiction if α̃(λ̄) < 1. Therefore, α̃(\n¯ λ) ≤ 0 and α̃(λ̄) ≥ 1, showing\nthat J(0,1) ⊆ im γ, and hence in fact J(0,1) = im γ.\nNow we are ready to prove the theorem. Let ν′ ∈ im γ such that ν′ ν, and let q ∈ p−1(ν), q′ ∈ p−1(ν′). Use the notation P := Pq and P ′ := Pq′ , and write\n(q′ − q) · (ω − x) = ln\n( eq ′·ω\neq′·x · e\nq·x\neq·ω\n)\n= ln\n( P ′(ω)\nP ′(x) · P (x) P (ω) ) = ln ( P ′(ω)\nP (ω) · P (x) P ′(x)\n) .\nFor ω ∈ Xc, our characterization of the perpendicular implies that P (x) ≥ P ′(x) and P (ω) ≤ P (ω′) since ν′ has a larger (or equal) coefficient α̃ than ν, because it is further (or equally) away from νX . Thus, the above expression is non-negative, yielding the acute angles property.\nProof of Theorem 5.7. Let µ ∈ M̃, q ∈ p−1(M̃) and let im γ be the µ-perpendicular to X at q. Note that the perpendicular is well defined only if X is a singleton, say X = {x}, and µ 6= x. Let {x′} be the other singleton face ofM. Thus, im γ = aff({x, x′}) ∩ (ri domC∗) with the direction from x towards x′. Note that K(X) = {u : u · (x′ − x) ≥ 0}. Let ν = p(q) and let ν′ ν, i.e.,\nν′ − ν = λ(x′ − x) for some λ > 0. Pick q′ ∈ p−1(ν′), which exists, because ν′ ∈ ri domC∗. By convexity, we have\n0 ≤ (q′ − q) · (∇C(q′)−∇C(q)) = (q′ − q) · (ν′ − ν) = λ(q′ − q) · (x′ − x) ,\ni.e., q′ − q ∈ K(X).\nProof of Theorem 5.8. Let M1 = conv(Ω1) and M2 = (conv Ω2). We first argue that M = conv(Ω1 × Ω2) = (conv Ω1) × (conv Ω2) = M1 × M2. For i ∈ {1, 2}, let νi ∈ Mi, i.e., for some probability measure Pi on Ωi, we have Eωi∼Pi [ωi] = νi. Defining the probability measure P on Ω by P (ω1, ω2) = P1(ω1)P2(ω2), we obtain E(ω1,ω2)∼P [(ω1, ω2)] = (ν1, ν2), i.e., (ν1, ν2) ∈ M. Conversely, let (ν1, ν2) ∈ M, i.e., for some measure P on Ω, E(ω1,ω2)∼P [(ω1, ω2)] = (ν1, ν2). But this also means that E(ω1,ω2)∼P [ωi] = νi for i ∈ {1, 2}, so νi ∈ Mi for i ∈ {1, 2}. Thus,M =M1 ×M2.\nWe also have domC = (domC1) × (domC2) and ri domC = (ri domC1)×(ri domC2), which implies that M̃ ⊆ M̃1 × M̃2.\nWe next show that X is a face of M if and only if X = X1 × X2 where X1 is a face of M1 and X2 is a face of M2. A face X ofM is characterized by a vector u and a scalar c such that\nu · x = c for x ∈ X u · ω > c for ω ∈ Ω\\X .\nIf X1 is a face ofM1 characterized by u1 and c1, and X2 is a face ofM2 characterized by u2 and c2, then we immediately obtain that X1 × X2 is a face ofM characterized by u = (u1, u2) and c = c1 + c2. Conversely, assume X is a face ofM characterized by u = (u1, u2) and c. We first show that X is a Cartesian product. We proceed by contradiction and assume that (x1, x2) ∈ X and (x′1, x′2) ∈ X , but (x1, x′2) 6∈ X . By assumption:\nu1 · x1 + u2 · x2 = c u1 · x′1 + u2 · x′2 = c −u1 · x1 − u2 · x′2 < −c\nSumming the above three yields:\nu1 · x′1 + u2 · x2 < c\nwhich is a contradiction withX being a face. By symmetry, we also obtain (x′1, x2) ∈ X , henceX = X1×X2 for some X1 ⊆ Ω1 and X2 ⊆ Ω2. Let (x1, x2) be some element of X . Note that X1 must be a face of M1 characterized by u1 and c1 := u1 · x1, because otherwise, there would exist ω1 ∈ Ω1\\X1 such that u1 · ω1 ≤ c1 = u1 · x1, i.e.,\nu1 · ω1 + u2 · x2 ≤ u1 · x1 + u2 · x2\nwhich would contradict X being a face, since (ω1, x2) 6∈ X . By symmetry, we also obtain that X2 is a face ofM2.\nLet γ be the a-perpendicular toX at q, where a = (a1, a2), X = X1 × X2 and q = (q1, q2). Note that a ∈ M̃, p(q) ∈ M̃ implies that ai ∈ M̃i, pi(qi) ∈ M̃i because M̃ ⊆ M̃1 × M̃2. The optimization of D(q, ν) over Aλ in the definition of the perpendicular decomposes into independent convex problems in ν1 and ν2, because aff(X) = aff(X1)×aff(X2) andD(q, ν) = D1(q1, ν1)+D2(q2, ν2), where D1 and D2 are the divergences derived from C1 and C2. Thus, for any point ν′ ∈ im γ such that ν′ p(q), we obtain that for i ∈ {1, 2} the components ν′i lie on the ai-perpendicular to Xi at qi and ν′i pi(qi). Let x = (x1, x2) ∈ X and ω = (ω1, ω2) ∈ Ω. Then by acute angles assumption, we can choose q′i ∈ p −1 i (ν ′ i) ∩ [qi + K(Xi)]. Let q′ = (q′1, q ′ 2). Note that q\n′ ∈ p−1(ν′). We will argue that also (q′ − q) ∈ K(X):\n(q′ − q) · (ω − x) = ∑\ni∈{1,2}\n(q′i − qi) · (ωi − xi) ≥ 0 ,\nwhere the last inequality follows, because (q′i − qi) ∈ K(Xi). Thus, the acute angles assumption holds for C and Ω."
    }, {
      "heading" : "H PROOF OF THEOREM 5.2",
      "text" : "In this section we give the complete proof of Theorem 5.2, with the revised definition of budget additivity, which requires that q0 be arbitrage-free (see Appendix C.1). The proof proceeds in several steps. Let ν0 = p(q0). Assuming acute angles, we begin by constructing an oriented curve L joining ν0 with µ, by sequentially choosing portions of perpendiculars for monotonically decreasing active sets. We then show that budget additivity holds for any solutions with prices in L, and finally show that the curve L is the locus of the optimal prices of solutions Q̂(q0), as well as optimal prices of solutions Q̂(q) for any q ∈ Q̂(q0).\nPart 1: Construction of the solution pathL In this part, we construct:\n• a sequence of prices ν0, ν1, . . . , νk with ν0 = p(q0) and νk = µ • a sequence of oriented curves `0, . . . , `k−1 where each `i goes from νi to νi+1 • a monotone sequence of sets Ω ⊇ X0 ⊃ X1 ⊃ · · · ⊃ Xk = ∅, such that the following minimality property holds: Xi is the minimal face for all ν ∈ (im `i)\\{νi+1} for i ≤ k − 1, and Xk is the minimal face for νk. • a sequence of states q1, . . . , qk−1 such that qi ∈ p−1(νi) ∩ [qi−1 +K(Xi−1)]\nThe curves `i will be referred to as segments. The curve obtained by concatenating the segments `0 through `k−1\nwill be called the solution path and denoted L. In the special case that ν0 = µ, we have k = 0, X0 = ∅ and L is a degenerate curve with imL = {µ}.\nIf ν0 6= µ, we construct the sequence of segments iteratively. Let X0 6= ∅ be the minimal face such that ν0 ∈ conv(X0 ∪ {µ}). By the minimality, µ 6∈ aff(X0). Let γ be the µ-perpendicular to aff(X0) at q0. The curve γ passes through ν0 and eventually reaches the boundary of conv(X0 ∪ {µ}) at some ν1 by continuity of γ (see Theorem F.3). Let segment `0 be the portion of γ going from ν0 to ν1.\nThis construction gives us the first segment `0. There are two possibilities:\n1. ν1 = µ; in this case we are done; 2. ν1 lies on a lower-dimensional face of conv(X0 ∪ {µ}); in this case, we pick some q1 ∈ p−1(ν1)∩ [q0 + K(X0)], which can be done by the acute angles assumption, and use the above construction again, starting with q1, and obtaining a new set X1 ⊂ X0 and a new segment `1; and iterate.\nThe above process eventually ends, because with each iteration, the size of the active set decreases. This construction yields monotonicity of Xi and the minimality property.\nThe above construction yields a specific sequence of qi ∈ p−1(νi) ∩ [qi−1 +K(Xi−1)]. We will now show that actually qi ∈ p−1(νi) ∩ (q0 + X⊥i−1) and that the construction of L is independent of the specific q1, q2, . . . , qk−1 chosen. To begin, note that from our construction, we can write qi = q0 + u0 + u1 + . . . + ui−1 for some uj ∈ K(Xj) ⊆ X⊥j . Since Xi ⊆ Xj for j = 1, . . . , i− 1, we actually have uj ∈ X⊥i−1, so qi ∈ (q0 + X⊥i−1). Note that X⊥i−1 ⊆ X⊥i , and according to Proposition 4.3, any qi ∈ p−1(νi)∩ (q0 +X⊥i ) yields the same µ-perpendicular to aff(Xi) and hence the same segment `i. By induction it therefore follows that the segments `0, . . . , `k−1 are uniquely determined by our construction regardless of the specific q1, . . . , qk−1.\nPart 1’: The solution path starting at a midpoint Let ν ∈ imL, and q ∈ p−1(ν) ∩ (q0 + X⊥ν ), and let L′ be the solution path if the initial state were q rather than q0. By a similar reasoning as in the previous paragraph, we see that L′ is a restriction of L starting with ν.\nPart 2: Budget additivity for points on L Let ν, ν′ ∈ imL such that ν ν′. Let q ∈ Q̂(ν; q0) and q′ ∈ Q̂(ν′; q) such that q ∈ Q̂(B; q0) and q′ ∈ Q̂(B′; q). Note that by Proposition C.2, q is arbitrage-free. In this part we show that q′ ∈ Q̂(B +B′; q0).\nFirst, consider the case that ν′ = µ. To see that q′ ∈ Q̂(B + B′; q0), first note that the constraints of Convex\nProgram (2.1) hold, because U(q′, ω; q0) = U(q′, ω; q) + U(q, ω; q0) ≥ −B′ − B for all ω by path independence of the utility function. As noted in the introduction, in the absence of constraints, the utility U(q̄, µ; q0) is maximized at any q̄ with p(q̄) = µ. Thus, q′ is a global maximizer of the utility and satisfies the constraints, so q′ ∈ Q̂(B +B′; q0). If ν = µ, we must also have ν′ = µ and the statement holds by previous reasoning.\nIn the remainder, we only analyze the case ν ν′ ≺ µ. This means that ν ∈ (im `i)\\{νi+1} and ν′ ∈ (im `j)\\{νj+1} for i ≤ j. By Theorem 3.4, we therefore must have q ∈ [q0 + K(Xi)] and q′ ∈ [q + K(Xj)]. By anti-monotonicity of witness cones, K(Xj) ⊇ K(Xi) and hence, q′ ∈ [q0 +K(Xj)], yielding\nq′ ∈ Q̂(ν′; q0) .\nWe now argue that the budgets add up. Let x ∈ Xj ⊆ Xi. By Lemma 3.1, we obtain that\nq ∈ Q̂(B; q0) for B = −U(q, x; q0) , q′ ∈ Q̂(B′; q) for B′ = −U(q′, x; q) , q′ ∈ Q̂(B̄; q0) for B̄ = −U(q′, x; q0) .\nHowever, by path independence of the utility function\nB̄ = −U(q′, x; q0) = −U(q′, x; q)−U(q, x; q0) = B′+B.\nPart 3: L as the locus of all solutions In this part we show that Q̂(q0) = ⋃\nν∈imL Q̂(ν; q0) .\nWe will begin by defining sets of budgets for which the optimal price is ν and show that their union across all ν ∈ imL is a closed interval. Since both ν0, µ ∈ imL, this will mean that we have included price vectors across all possible budgets. The statement of Part 3 will then follow by Theorem 2.2.\nLet x ∈ Xk−1 = ⋂k−1 i=0 Xi and let B(q) := −U(q, x; q0). Further, for ν ∈ im `i, let\nBi(ν) := {B(q) : q ∈ p−1(ν) ∩ [q0 +K(Xi)]} .\nFrom Corollary 3.5, we know that for ν ∈ (im `i)\\{νi+1}, Bi(ν) is exactly the set of budgets for which ν is the optimal price vector. The setBi(νi+1) is potentially only a subset of such budgets (corresponding toXi being the tight set, rather than the actual minimal setXi+1). First we show that Bi(ν) is non-empty for ν ∈ im `i. Let ν ∈ im `i. By acute angles assumption, there exists q ∈ p−1(ν)∩ [qi+K(Xi)]. Furthermore, qj ∈ [qj−1 + K(Xj−1)] for j = 1, . . . , i, so we can write q = q0 + u0 + · · · + ui where uj ∈ K(Xj). By anti-monotonicity of witness cones, K(Xj) ⊆ K(Xi)\nfor j = 1, . . . , i, so we actually have uj ∈ K(Xi) and thus q ∈ [q0 +K(Xi)], proving that the set Bi(ν) is non-empty.\nWe will next show that Bi(`i) := ⋃\nν∈im `i\nBi(ν)\nis an interval.\nConsider a fixed ν ∈ im `i. For q ∈ p−1(ν), we have C(q) = q · ν − C∗(ν), i.e., B(q) is linear in q over q ∈ p−1(ν). Since the set p−1(ν) is closed and convex, so is p−1(ν) ∩ [q0 + K(Xi)]. The latter set is also nonempty, hence the set Bi(ν) must be a non-empty closed interval. LetBmini (ν) andB max i (ν) be the lower and upper endpoints ofBi(ν). Since the budget additivity holds along L (by Part 2), we must have thatBmaxi is non-decreasing on `i. Next note that for ν 6= ν′ the setsBi(ν) andBi(ν′) must be disjoint. This implies that Bmaxi is actually increasing and so is Bmini .\nWe next show that Bmaxi is right-continuous on `i. Let M := {(ν, q) : ν ∈ im `i, q ∈ p−1(ν)}. By Theorem F.3, the set M can be written C+(0⊕L⊥) where C is compact. LetM ′ := {(ν, q) : ν ∈ im `i, q ∈ p−1(ν)∩[q0+K(Xi)]}. Since the set [q0 +K(Xi)] is closed, the setM ′ can be written as C′ + (0 ⊕ L⊥) where C′ is compact. To show that Bmaxi is right-continuous, pick ν ∈ im `i and let {ν′t}∞t=1 be a sequence of ν′t ∈ `i, ν′t ν such that limt→∞ ν′t = ν. Pick q′t such that (ν ′ t, q ′ t) ∈ C′ and B(q′t) = Bmaxi (ν′t). By compactness, the sequence {(ν′t, q′t)}∞t=1 must have a cluster point (ν, q) ∈ C′, and by continuity of B, we must have limt→∞B max i (ν ′ t) = limt→∞B(q ′ t) = B(q) ≤ Bmaxi (ν). The right continuity ofBmaxi now follows by monotonicity. By symmetric reasoning, Bmini must be left-continuous.\nNow for the sake of contradiction, assume thatBi(`i) is not an interval, i.e., assume that there is a value B∗ 6∈ Bi(`i) such that some higher and lower values are in Bi(`i). By monotonicity, there must exist ν∗ such thatBmaxi (ν) < B ∗ for ν ≺ ν∗ and Bmini (ν) > B∗ for ν ν∗. However, this means that\nBmini (ν ∗) = lim ν↑ν∗ Bmini (ν ∗) ≤ lim ν↑ν∗ Bmaxi (ν ∗) ≤ B∗\nand\nBmaxi (ν ∗) = lim ν↓ν∗ Bmaxi (ν ∗) ≥ lim ν↓ν∗ Bmini (ν ∗) ≥ B∗\nwhich means that B∗ ∈ Bi(ν∗) yielding a contradiction.\nFinally, note that Bi(νi+1) ⊆ Bi+1(νi+1) for i ≤ k − 1, hence ⋃k−1 i=1 Bi(`i) is an interval as well.\nPart 3’: L as the locus of solutions starting at a midpoint Let ν ∈ imL and q ∈ Q̂(ν; q0). Since Q̂(ν; q0) ⊆ p−1(ν) ∩ (q0 + X⊥ν ), Part 1’ yields that the solution path L′ for q coincides with the portion of L starting at ν. By\nProposition C.2, q is arbitrage-free, so the reasoning of the previous part can be applied to L′, yielding the following statement:\nQ̂(q) = ⋃\nν′∈imL: ν′ ν\nQ̂(ν′; q) .\nPart 4: Proof of the theorem Let B,B′ ≥ 0 and q ∈ Q̂(B; q0) and q′ ∈ Q̂(B′; q). From Parts 3 and 3’, we know that q ∈ Q̂(ν; q0) and q′ ∈ Q̂(ν′; q) for some ν, ν′ ∈ imL such that ν ν′. By Part 2, we therefore obtain that q′ ∈ Q̂(B +B′; q0), proving the theorem."
    } ],
    "references" : [ {
      "title" : "An optimization-based framework for automated market-making",
      "author" : [ "Jacob Abernethy", "Yiling Chen", "Jennifer Wortman Vaughan" ],
      "venue" : "In ACM Conference on Electronic Commerce,",
      "citeRegEx" : "1",
      "shortCiteRegEx" : "1",
      "year" : 2011
    }, {
      "title" : "Learning performance of prediction markets with Kelly bettors",
      "author" : [ "Alina Beygelzimer", "John Langford", "David M. Pennock" ],
      "venue" : "In International Conference on Autonomous Agents and Multiagent Systems,",
      "citeRegEx" : "2",
      "shortCiteRegEx" : "2",
      "year" : 2012
    }, {
      "title" : "Verication of forecasts expressed in terms of probability",
      "author" : [ "GW Brier" ],
      "venue" : "Monthly Weather Review,",
      "citeRegEx" : "3",
      "shortCiteRegEx" : "3",
      "year" : 1950
    }, {
      "title" : "A utility framework for bounded-loss market makers",
      "author" : [ "Yiling Chen", "David M. Pennock" ],
      "venue" : "In Conference on Uncertainty in Artificial Intelligence,",
      "citeRegEx" : "4",
      "shortCiteRegEx" : "4",
      "year" : 2007
    }, {
      "title" : "A new understanding of prediction markets via no-regret learning",
      "author" : [ "Yiling Chen", "Jennifer Wortman Vaughan" ],
      "venue" : "In ACM Conference on Electronic Commerce,",
      "citeRegEx" : "5",
      "shortCiteRegEx" : "5",
      "year" : 2010
    }, {
      "title" : "A tractable combinatorial market maker using constraint generation",
      "author" : [ "Miroslav Dudı́k", "Sébastien Lahaie", "David M. Pennock" ],
      "venue" : "In ACM Conference on Electronic Commerce,",
      "citeRegEx" : "6",
      "shortCiteRegEx" : "6",
      "year" : 2012
    }, {
      "title" : "Consensus of subjective probabilities: The pari-mutuel method",
      "author" : [ "Edmund Eisenberg", "David Gale" ],
      "venue" : "Annals of Mathematical Statistics,",
      "citeRegEx" : "7",
      "shortCiteRegEx" : "7",
      "year" : 1959
    }, {
      "title" : "Multi-outcome and multidimensional market scoring",
      "author" : [ "Lance Fortnow", "Rahul Sami" ],
      "venue" : "rules. CoRR,",
      "citeRegEx" : "8",
      "shortCiteRegEx" : "8",
      "year" : 2012
    }, {
      "title" : "Interpreting prediction markets: a stochastic approach",
      "author" : [ "Rafael Frongillo", "Nicolas Della Penna", "Mark Reid" ],
      "venue" : "In Advances in Neural Information Processing Systems",
      "citeRegEx" : "9",
      "shortCiteRegEx" : "9",
      "year" : 2012
    }, {
      "title" : "Strictly proper scoring rules, prediction, and estimation",
      "author" : [ "Tilmann Gneiting", "Adrian E Raftery" ],
      "venue" : "Journal of the American Statistical Association,",
      "citeRegEx" : "10",
      "shortCiteRegEx" : "10",
      "year" : 2007
    }, {
      "title" : "Prediction without markets",
      "author" : [ "Sharad Goel", "Daniel M. Reeves", "Duncan J. Watts", "David M. Pennock" ],
      "venue" : "In ACM Conference on Electronic Commerce,",
      "citeRegEx" : "11",
      "shortCiteRegEx" : "11",
      "year" : 2010
    }, {
      "title" : "Combinatorial information market design",
      "author" : [ "Robin Hanson" ],
      "venue" : "Information Systems Frontiers,",
      "citeRegEx" : "12",
      "shortCiteRegEx" : "12",
      "year" : 2003
    }, {
      "title" : "Logarithmic market scoring rules for modular combinatorial information aggregation",
      "author" : [ "Robin Hanson" ],
      "venue" : "Journal of Prediction Markets,",
      "citeRegEx" : "13",
      "shortCiteRegEx" : "13",
      "year" : 2007
    }, {
      "title" : "Methods for combining experts’ probability assessments",
      "author" : [ "Robert A. Jacobs" ],
      "venue" : "Neural Computation,",
      "citeRegEx" : "14",
      "shortCiteRegEx" : "14",
      "year" : 1995
    }, {
      "title" : "An axiomatic characterization of adaptive-liquidity market makers",
      "author" : [ "Xiaolong Li", "Jennifer Wortman Vaughan" ],
      "venue" : "In ACM Conference on Electronic Commerce,",
      "citeRegEx" : "15",
      "shortCiteRegEx" : "15",
      "year" : 2013
    }, {
      "title" : "Interpreting the predictions of prediction markets",
      "author" : [ "Charles F. Manski" ],
      "venue" : "Economics Letters,",
      "citeRegEx" : "16",
      "shortCiteRegEx" : "16",
      "year" : 2006
    }, {
      "title" : "A practical liquiditysensitive automated market maker",
      "author" : [ "Abraham Othman", "Tuomas Sandholm", "David M. Pennock", "Daniel M. Reeves" ],
      "venue" : "In ACM Conference on Electronic Commerce,",
      "citeRegEx" : "17",
      "shortCiteRegEx" : "17",
      "year" : 2010
    }, {
      "title" : "Convex Analysis",
      "author" : [ "R. Tyrrell Rockafellar" ],
      "venue" : null,
      "citeRegEx" : "18",
      "shortCiteRegEx" : "18",
      "year" : 1970
    }, {
      "title" : "Prediction markets",
      "author" : [ "Justin Wolfers", "Eric Zitzewitz" ],
      "venue" : "Journal of Economic Perspectives,",
      "citeRegEx" : "19",
      "shortCiteRegEx" : "19",
      "year" : 2004
    } ],
    "referenceMentions" : [ {
      "referenceID" : 10,
      "context" : "Prediction markets have a good track record of forecast accuracy in many domains [11, 19].",
      "startOffset" : 81,
      "endOffset" : 89
    }, {
      "referenceID" : 18,
      "context" : "Prediction markets have a good track record of forecast accuracy in many domains [11, 19].",
      "startOffset" : 81,
      "endOffset" : 89
    }, {
      "referenceID" : 1,
      "context" : "When agents are constrained in how much they can trade only by risk aversion, prediction market prices can be interpreted as a weighted average of traders’ beliefs [2, 20], a natural reflection of the “wisdom of the crowd” with a good empirical track record [14] and theoretical support [2].",
      "startOffset" : 164,
      "endOffset" : 171
    }, {
      "referenceID" : 13,
      "context" : "When agents are constrained in how much they can trade only by risk aversion, prediction market prices can be interpreted as a weighted average of traders’ beliefs [2, 20], a natural reflection of the “wisdom of the crowd” with a good empirical track record [14] and theoretical support [2].",
      "startOffset" : 258,
      "endOffset" : 262
    }, {
      "referenceID" : 1,
      "context" : "When agents are constrained in how much they can trade only by risk aversion, prediction market prices can be interpreted as a weighted average of traders’ beliefs [2, 20], a natural reflection of the “wisdom of the crowd” with a good empirical track record [14] and theoretical support [2].",
      "startOffset" : 287,
      "endOffset" : 290
    }, {
      "referenceID" : 6,
      "context" : "However, when agents are budget constrained, discontinuities and idiosyncratic results can arise [7, 16] that call into question whether the equilibrium prices can be trusted to reflect any kind of useful aggregation.",
      "startOffset" : 97,
      "endOffset" : 104
    }, {
      "referenceID" : 15,
      "context" : "However, when agents are budget constrained, discontinuities and idiosyncratic results can arise [7, 16] that call into question whether the equilibrium prices can be trusted to reflect any kind of useful aggregation.",
      "startOffset" : 97,
      "endOffset" : 104
    }, {
      "referenceID" : 0,
      "context" : "We consider prediction markets with an automated market maker [1, 4, 13] that maintains standing offers to trade every security at some price.",
      "startOffset" : 62,
      "endOffset" : 72
    }, {
      "referenceID" : 3,
      "context" : "We consider prediction markets with an automated market maker [1, 4, 13] that maintains standing offers to trade every security at some price.",
      "startOffset" : 62,
      "endOffset" : 72
    }, {
      "referenceID" : 12,
      "context" : "We consider prediction markets with an automated market maker [1, 4, 13] that maintains standing offers to trade every security at some price.",
      "startOffset" : 62,
      "endOffset" : 72
    }, {
      "referenceID" : 0,
      "context" : "The design of such an automated market maker boils down to choosing a convex cost function [1].",
      "startOffset" : 91,
      "endOffset" : 94
    }, {
      "referenceID" : 0,
      "context" : "This amount of design freedom presents an opportunity to seek cost functions that satisfy additional desiderata such as computational tractability [1, 6].",
      "startOffset" : 147,
      "endOffset" : 153
    }, {
      "referenceID" : 5,
      "context" : "This amount of design freedom presents an opportunity to seek cost functions that satisfy additional desiderata such as computational tractability [1, 6].",
      "startOffset" : 147,
      "endOffset" : 153
    }, {
      "referenceID" : 7,
      "context" : "We adopt the notion of the “natural budget constraint” introduced by Fortnow and Sami [8]: the agent is allowed only those trades for which the maximum loss for any possible outcome does not exceed the budget.",
      "startOffset" : 86,
      "endOffset" : 89
    }, {
      "referenceID" : 16,
      "context" : "This setup constitutes a de facto industry standard, and the companies that use (or used) it include Inkling Markets,2 Consensus Point,3 Microsoft and Yahoo! [17].",
      "startOffset" : 158,
      "endOffset" : 162
    }, {
      "referenceID" : 7,
      "context" : "Previously, Fortnow and Sami [8] considered a different question: do budget-constrained bidders always move the market prices in the direction of their beliefs? They showed that the answer to this is no: there always exist market prices, beliefs and budgets such that the direction of price movement is not towards the belief.",
      "startOffset" : 29,
      "endOffset" : 32
    }, {
      "referenceID" : 7,
      "context" : "The impossibility result of Fortnow and Sami [8] can be easily derived from our characterization (see Appendix D).",
      "startOffset" : 45,
      "endOffset" : 48
    }, {
      "referenceID" : 2,
      "context" : "Two of the most studied scoring rules are the quadratic scoring rule [3] and the logarithmic market scoring rule [13].",
      "startOffset" : 69,
      "endOffset" : 72
    }, {
      "referenceID" : 12,
      "context" : "Two of the most studied scoring rules are the quadratic scoring rule [3] and the logarithmic market scoring rule [13].",
      "startOffset" : 113,
      "endOffset" : 117
    }, {
      "referenceID" : 3,
      "context" : "We consider costfunction-based prediction markets [4, 12], a fully general class under reasonable assumptions [1, 5].",
      "startOffset" : 50,
      "endOffset" : 57
    }, {
      "referenceID" : 11,
      "context" : "We consider costfunction-based prediction markets [4, 12], a fully general class under reasonable assumptions [1, 5].",
      "startOffset" : 50,
      "endOffset" : 57
    }, {
      "referenceID" : 0,
      "context" : "We consider costfunction-based prediction markets [4, 12], a fully general class under reasonable assumptions [1, 5].",
      "startOffset" : 110,
      "endOffset" : 116
    }, {
      "referenceID" : 4,
      "context" : "We consider costfunction-based prediction markets [4, 12], a fully general class under reasonable assumptions [1, 5].",
      "startOffset" : 110,
      "endOffset" : 116
    }, {
      "referenceID" : 9,
      "context" : "Their equivalence with proper scoring rules has been implicitly noted by Gneiting and Raftery [10].",
      "startOffset" : 94,
      "endOffset" : 98
    }, {
      "referenceID" : 1,
      "context" : "Several authors have studied relationships between utility functions and price dynamics in prediction markets, drawing a parallel to online learning [2, 5, 9].",
      "startOffset" : 149,
      "endOffset" : 158
    }, {
      "referenceID" : 4,
      "context" : "Several authors have studied relationships between utility functions and price dynamics in prediction markets, drawing a parallel to online learning [2, 5, 9].",
      "startOffset" : 149,
      "endOffset" : 158
    }, {
      "referenceID" : 8,
      "context" : "Several authors have studied relationships between utility functions and price dynamics in prediction markets, drawing a parallel to online learning [2, 5, 9].",
      "startOffset" : 149,
      "endOffset" : 158
    }, {
      "referenceID" : 14,
      "context" : "Our analysis touches on the problem of setting the market maker’s liquidity parameter [15, 17], which determines how (in)sensitive prices are to trading volume.",
      "startOffset" : 86,
      "endOffset" : 94
    }, {
      "referenceID" : 16,
      "context" : "Our analysis touches on the problem of setting the market maker’s liquidity parameter [15, 17], which determines how (in)sensitive prices are to trading volume.",
      "startOffset" : 86,
      "endOffset" : 94
    }, {
      "referenceID" : 7,
      "context" : "We consider the notion of natural budget constraint defined by Fortnow and Sami [8] which states that the loss of the agent is at most his budget, for all ω ∈ Ω.",
      "startOffset" : 80,
      "endOffset" : 83
    }, {
      "referenceID" : 0,
      "context" : "Similarly, for n = 1 and M = [0, 1], the inclusion assumption is satisfied by the conjugate C∗(ν) = 1/ν + 1/(1 − ν) on ν ∈ (0, 1) and C∗(ν) = ∞ on ν 6∈ (0, 1), but this conjugate does not satisfy the finite loss assumption.",
      "startOffset" : 29,
      "endOffset" : 35
    }, {
      "referenceID" : 0,
      "context" : "For instance, it always holds when C is constructed as in [1], because their construction guarantees domC∗ = M.",
      "startOffset" : 58,
      "endOffset" : 61
    }, {
      "referenceID" : 5,
      "context" : ", [6]).",
      "startOffset" : 2,
      "endOffset" : 5
    }, {
      "referenceID" : 0,
      "context" : "[1] Jacob Abernethy, Yiling Chen, and Jennifer Wortman Vaughan.",
      "startOffset" : 0,
      "endOffset" : 3
    }, {
      "referenceID" : 1,
      "context" : "[2] Alina Beygelzimer, John Langford, and David M.",
      "startOffset" : 0,
      "endOffset" : 3
    }, {
      "referenceID" : 2,
      "context" : "[3] GW Brier.",
      "startOffset" : 0,
      "endOffset" : 3
    }, {
      "referenceID" : 3,
      "context" : "[4] Yiling Chen and David M.",
      "startOffset" : 0,
      "endOffset" : 3
    }, {
      "referenceID" : 4,
      "context" : "[5] Yiling Chen and Jennifer Wortman Vaughan.",
      "startOffset" : 0,
      "endOffset" : 3
    }, {
      "referenceID" : 5,
      "context" : "[6] Miroslav Dudı́k, Sébastien Lahaie, and David M.",
      "startOffset" : 0,
      "endOffset" : 3
    }, {
      "referenceID" : 6,
      "context" : "[7] Edmund Eisenberg and David Gale.",
      "startOffset" : 0,
      "endOffset" : 3
    }, {
      "referenceID" : 7,
      "context" : "[8] Lance Fortnow and Rahul Sami.",
      "startOffset" : 0,
      "endOffset" : 3
    }, {
      "referenceID" : 8,
      "context" : "[9] Rafael Frongillo, Nicolas Della Penna, and Mark Reid.",
      "startOffset" : 0,
      "endOffset" : 3
    }, {
      "referenceID" : 9,
      "context" : "[10] Tilmann Gneiting and Adrian E Raftery.",
      "startOffset" : 0,
      "endOffset" : 4
    }, {
      "referenceID" : 10,
      "context" : "[11] Sharad Goel, Daniel M.",
      "startOffset" : 0,
      "endOffset" : 4
    }, {
      "referenceID" : 11,
      "context" : "[12] Robin Hanson.",
      "startOffset" : 0,
      "endOffset" : 4
    }, {
      "referenceID" : 12,
      "context" : "[13] Robin Hanson.",
      "startOffset" : 0,
      "endOffset" : 4
    }, {
      "referenceID" : 13,
      "context" : "[14] Robert A.",
      "startOffset" : 0,
      "endOffset" : 4
    }, {
      "referenceID" : 14,
      "context" : "[15] Xiaolong Li and Jennifer Wortman Vaughan.",
      "startOffset" : 0,
      "endOffset" : 4
    }, {
      "referenceID" : 15,
      "context" : "[16] Charles F.",
      "startOffset" : 0,
      "endOffset" : 4
    }, {
      "referenceID" : 16,
      "context" : "[17] Abraham Othman, Tuomas Sandholm, David M.",
      "startOffset" : 0,
      "endOffset" : 4
    }, {
      "referenceID" : 17,
      "context" : "[18] R.",
      "startOffset" : 0,
      "endOffset" : 4
    }, {
      "referenceID" : 18,
      "context" : "[19] Justin Wolfers and Eric Zitzewitz.",
      "startOffset" : 0,
      "endOffset" : 4
    }, {
      "referenceID" : 11,
      "context" : "Our second example is Hanson’s logarithmic market-scoring rule (LMSR) [12, 13], which is applied to complete markets whose outcomes coincide with basis vectors, i.",
      "startOffset" : 70,
      "endOffset" : 78
    }, {
      "referenceID" : 12,
      "context" : "Our second example is Hanson’s logarithmic market-scoring rule (LMSR) [12, 13], which is applied to complete markets whose outcomes coincide with basis vectors, i.",
      "startOffset" : 70,
      "endOffset" : 78
    }, {
      "referenceID" : 0,
      "context" : "For example, consider n = 1, M = [0, 1], and the cost function C(q) = max{0, q/2}.",
      "startOffset" : 33,
      "endOffset" : 39
    }, {
      "referenceID" : 7,
      "context" : "3) to derive the impossibility result of Fortnow and Sami [8].",
      "startOffset" : 58,
      "endOffset" : 61
    }, {
      "referenceID" : 17,
      "context" : "The following result of Rockafellar [18] will be instrumental in proving continuity properties of the perpendicular.",
      "startOffset" : 36,
      "endOffset" : 40
    }, {
      "referenceID" : 17,
      "context" : "7 of Rockafellar [18]).",
      "startOffset" : 17,
      "endOffset" : 21
    }, {
      "referenceID" : 17,
      "context" : "1 of Rockafellar [18]).",
      "startOffset" : 17,
      "endOffset" : 21
    }, {
      "referenceID" : 0,
      "context" : "A′ = {a ∈ R : (a− e1) · (ei − e1) = 0 for 2 ≤ i ≤ k} = {a ∈ R : a[i] = a[1]− 1 for 2 ≤ i ≤ k}",
      "startOffset" : 72,
      "endOffset" : 75
    }, {
      "referenceID" : 0,
      "context" : "For any I ⊆ [0, 1], let",
      "startOffset" : 12,
      "endOffset" : 18
    } ],
    "year" : 2015,
    "abstractText" : "We give a detailed characterization of optimal trades under budget constraints in a prediction market with a cost-function-based automated market maker. We study how the budget constraints of individual traders affect their ability to impact the market price. As a concrete application of our characterization, we give sufficient conditions for a property we call budget additivity: two traders with budgets B and B′ and the same beliefs would have a combined impact equal to a single trader with budget B +B′. That way, even if a single trader cannot move the market much, a crowd of like-minded traders can have the same desired effect. When the set of payoff vectors associated with outcomes, with coordinates corresponding to securities, is affinely independent, we obtain that a generalization of the heavily-used logarithmic market scoring rule is budget additive, but the quadratic market scoring rule is not. Our results may be used both descriptively, to understand if a particular market maker is affected by budget constraints or not, and prescriptively, as a recipe to construct markets.",
    "creator" : "LaTeX with hyperref package"
  }
}