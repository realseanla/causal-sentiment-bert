{
  "name" : "1702.08286.pdf",
  "metadata" : {
    "source" : "CRF",
    "title" : "Balancing Lexicographic Fairness and a Utilitarian Objective with Application to Kidney Exchange",
    "authors" : [ "Duncan C. McElfresh", "John P. Dickerson" ],
    "emails" : [ "dmcelfre@math.umd.edu", "john@cs.umd.edu" ],
    "sections" : [ {
      "heading" : "1 Introduction",
      "text" : "Chronic kidney disease is a worldwide problem whose societal burden is likened to that of diabetes (Neuen et al. 2013). Left untreated, it leads to end-stage renal failure and the need for a donor kidney—for which demand far outstrips supply. In the United States alone, the kidney transplant waiting list grew from 58,000 people in 2004 to over 100,000 needy patients (Hart et al. 2016).1\nTo alleviate some of this supply-demand mismatch, kidney exchanges (Rapaport 1986; Roth et al. 2004) allow patients with willing living donors to trade donors for access to compatible or higher-quality organs. In addition to these patient-donor pairs, modern exchanges include non-directed donors, who enter the exchange without a patient in need of a kidney. Exchanges occur in cycle- or chain-like structures, and now account for 10% of living transplants in the United States. Yet, access to a kidney exchange does not guarantee equal access to kidneys themselves; for example, certain classes of patients may be particularly disadvantaged based on health characteristics or other logistical factors. Thus, fairness considerations are an active topic of theoretical and\n1 https://optn.transplant.hrsa.gov/converge/data/\npractical research in kidney exchange and the matching market community in general.\nIntuitively, any enforcement of a fairness constraint or consideration may have a negative effect on overall economic efficiency. A quantification of this tradeoff is known as the price of fairness (Bertsimas et al. 2011). Recent work by Dickerson et al. (2014) adapted this concept to the kidney exchange case, and presented two fair allocation rules that strike a balance between fairness and efficiency. Yet, as we show in this paper, those rules can “fail” unpredictably, yielding an arbitrarily high price of fairness.\nWith this as motivation, we adapt to the kidney exchange case a recent technique for trading off a form of fairness and utilitarianism in a principled manner. This technique is parameterized by a bound on the price of fairness, as opposed to a set of parameters that may result in hard-to-predict final matching behavior, as in past work. We implement our rule in a realistic mathematical programming framework and–on real data from a large, multi-center, fielded kidney exchange–show that our rule effectively balances fairness and efficiency without unwanted outlier behavior."
    }, {
      "heading" : "1.1 Related Work",
      "text" : "We briefly overview related work in balancing efficiency and fairness in resource allocation problem. Bertsimas et al. (2011) define the price of fairness; that is, the relative loss in system efficiency under a fair allocation rule. Hooker and Williams (2012) give a formal method for combining utilitarianism and equity. We direct the reader to those two papers for a greater overview of research in fairness in general resource allocation problems.\nFairness in the context of kidney exchange was first studied by Roth et al. (2005b); they explore concepts like Lorenz dominance in a stylized model, and show that preferring fair allocations can come at great cost. Li et al. (2014) extend this model and present an algorithm to solve for a Lorenz dominant matching. Stability in kidney exchange, a concept intimately related to fairness, was explored by Liu et al. (2014). The use of randomized allocation machanisms to promote fairness in stylized models is theoretically promising (Fang et al. 2015; Aziz et al. 2016; Mattei et al. 2017). Recent work discusses fairness in stylized random graph models of dynamic kidney exchange (Ashlagi et al. 2013; Anderson et al. 2015). None of these papers provide practi-\nar X\niv :1\n70 2.\n08 28\n6v 2\n[ cs\n.G T\n] 7\nS ep\n2 01\n7\ncal models that could be implemented in a fully-realistic and fielded kidney exchange.\nPractically speaking, Yılmaz (2011) explores in simulation equity issues from combining living and deceased donor allocation; that paper is limited to only short length-two kidney swaps, while real exchanges all use longer cycles and chains. Dickerson et al. (2014) introduced two fairness rules explicitly in the context of kidney exchange, and proved bounds on the price of fairness under those rules in a random graph model; we build on that work in this paper, and describe it in greater detail later. That work has been incorporated into a framework for learning to balance efficiency, fairness, and dynamism in matching markets (Dickerson and Sandholm 2015); we note that the fairness rule we present in this paper could be used in that framework as well."
    }, {
      "heading" : "1.2 Our Contributions",
      "text" : "Dickerson et al. (2014) finds that the theoretical price of fairness in kidney exchange is small when only patient-donor pairs participate in the exchange. They did not include nondirected donors (NDDs). However, in modern kidney exchanges, non-directed donors (NDDs) provide many more matches than patient-donor pairs; furthermore, NDDs create more opportunities to expand the fair matching, potentially increasing the price of fairness. Here, we prove that adding NDDs to the theoretical model actually decreases the price of fairness, and that—with enough NDDs—the price of fairness is zero.\nReal kidney exchanges are less dense and more uncertain than the (standard) theoretical model in which we prove our results. Previous approaches to incorporating fairness into kidney exchange have neglected this fact: they have been either ad-hoc—e.g., “priority points” decided on by committee (Kidney Paired Donation Work Group 2013)—or brittle (Roth et al. 2005b; Dickerson et al. 2014), resulting in an unacceptably high price of fairness. This paper provides the first approach to incorporating fairness into kidney exchange in a way that both prioritizes disadvantaged participants, but also comes with acceptable worst-case guarantees on the price of fairness. Our method is easily applied as an objective in the mathematical-programming-based clearing methods used in today’s fielded exchanges; indeed, using real data we show that this method guarantees a limit on efficiency loss.\nSection 1.3 introduces the kidney exchange problem. Section 2 extends work by Ashlagi and Roth (2014) and Dickerson et al. (2014), showing that the price of fairness is small on the canonical random graph model even with NDDs. Section 3 shows that two recent fair allocation rules from the kidney exchange literature (Dickerson et al. 2014) can perform unacceptably poorly in the worst case. Then, Section 4 presents a new allocation rule that allows policymakers to set a limit on efficiency loss, while also favoring disadvantaged patients. Section 5 shows on real data from a large fielded kidney exchange that our method limits efficiency loss while still favoring disadvantaged patients when possible."
    }, {
      "heading" : "1.3 Preliminaries",
      "text" : "A kidney exchange can be represented as a directed compatibility graphG = (V,E), with vertices V = P∪N including both patient donor pairs p ∈ P and non-directed-donors n ∈ N (Roth et al. 2004; Roth et al. 2005a; Roth et al. 2005b; Abraham et al. 2007). A directed edge e is drawn from vertex vi to vj if the donor at vi can give to the patient at vj . Fielded kidney exchanges consist mainly of directed cycles in G, where each patient vertex in the cycle receives the donor kidney of the previous vertex. Modern exchanges also include non-cyclic structures called chains (Montgomery et al. 2006; Rees et al. 2009). Here, an NDD donates her kidney to a patient, whose paired donor donates her kidney to another patient, and so on.\nIn practice, cycles are limited in size, or “capped,” to some small constant L, while chains are limited in size to a much larger constant R—or not limited at all. This is because all transplants in a cycle must execute simultaneously; if a donor whose paired patient had already received a kidney backed out of the donation, then some participant in the market would be strictly worse off than before. However, chains need not be executed simultaneously; if a donor backs out after her paired patient receives a kidney, then the chain breaks but no participant is strictly worse off. We will discuss how these caps affect fairness and efficiency in the coming sections.\nThe goal of kidney exchange programs is to find a matching M—a collection of disjoint cycles and chains in the graph G. The cycles and chains must be disjoint because no donor can give more than one of her kidneys (although ongoing work explores multi-donor kidney exchange (Ergin et al. 2017; Farina et al. 2017)). The clearing problem in kidney exchange is to find a matching M∗ that maximizes some utility function u : M → R, where M is the set of all legal matchings. Real kidney exchanges typically optimize for the maximum weighted cycle cover (i.e., u(M) = ∑ c∈M ∑ e∈c we). This utilitarian objective can favor certain classes of patient-donor pairs while disadvantaging others. This is formalized in the following section."
    }, {
      "heading" : "1.4 The Price of Fairness",
      "text" : "As an example for this paper, we focus on highly-sensitized patients, who have a very low probability of their blood passing a feasibility test with a random donor organ; thus, finding a kidney is often quite hard, and their median waiting time for an organ jumps by a factor of three over less sensitized patients.2 Utilitarian objectives will, in general, marginalize these patients. Sensitization is determined using the Calculated Panel Reactive Antibody (CPRA) level of each patient, which reflects the likelihood that a patient will find a matching donor.\nFormally the sensitization of each patient-donor vertex v be vs ∈ [0, 100], the CPRA level of v’s patient; NDD vertices are not associated with patients, so they do not have sensitization levels. Each patient-donor vertex v ∈ P is considered highly sensitized if vs exceeds threshold τ ∈\n2https://optn.transplant.hrsa.gov/data/\n[0, 100], and lowly-sensitized otherwise. These vertex sets VH and VL are defined as: • Lowly sensitized: VL = {v | v ∈ P : vs < τ} • Highly sensitized: VH = {v | v ∈ P : vs ≥ τ}. By definition, highly-sensitized patients are harder to match than lowly-sensitized patients. Naturally, efficient matching algorithms prioritize easy-to-match vertices in VL, marginalizing VH . Let uf : M → R be a fair utility function. Formally, a utility function is fair when its corresponding optimal match M∗f is viewed as fair, where M ∗ f is defined as:\nM∗f = arg max M∈M uf (M)\nBertsimas et al. (2011) defined the price of fairness to be the “relative system efficiency loss under a fair allocation assuming that a fully efficient allocation is one that maximizes the sum of [participant] utilities.” Caragiannis et al. (2009) defined an essentially identical concept in parallel. Formally, given a fair utility function uf and the utilitarian utility function u, the price of fairness is:\nPOF(M, uf ) = u (M∗)− u\n( M∗f ) u (M∗)\n(1)\nThe price of fairness POF(M, uf ) is the relative loss in (utilitarian) efficiency caused by choosing the fair outcome M∗f rather than the most efficient outcome.\nIn the next section we show that the theoretical price of fairness in kidney exchange is small, even when both cycles and chains are used—thus generalizing an earlier result due to Dickerson et al. (2014) to modern kidney exchanges."
    }, {
      "heading" : "2 The Theoretical Price of Fairness with Chains is Low (or Zero)",
      "text" : "In this section we use the random graph model for kidney exchange introduced by Ashlagi and Roth (2014) to show that the theoretical price of fairness is always small, especially when NDDs are included. A complete description of this model can be found in Appendix A.1. Dickerson et al. (2014) finds that without NDDs, the maximum price of fairness is 2/33. Adding NDDs to this model creates more opportunities to match highly sensitized patients, which could potentially lead to a higher price of fairness. However we find that including chains in this model only decreases the price of fairness; furthermore, when the ratio of NDDs to patient-donor pairs is high enough, the price of fairness is zero."
    }, {
      "heading" : "2.1 Price of Fairness",
      "text" : "Ashlagi and Roth (2014) characterize efficient matchings in a random graph model without chains, and Dickerson et al. (2014) build on this to show that the price of fairness without chains is bounded above by 2/33. Dickerson et al. (2012) extend the efficient matching of Ashlagi and Roth (2014) to include chains, but do not calculate the price of fairness. In this work, we close the remaining gap in theory regarding the price of fairness with chains.\nGiven |P | patient-donor pairs, we parameterize the number of NDDs |N | with β ≥ 0 such that |N | = β|P |. Theorems 1 and 2 state our two main results: adding chains to the random graph model does not increase the price of fairness, and when the fraction of NDDs is high enough (β > 1/8), the price of fairness is zero. The proofs of the following theorems are given in Appendix A. Theorem 1. Adding NDDs to the random graph model (β > 0) does not increase the upper bound on the price of fairness found by Dickerson et al. (2014).\nProof Sketch: We explore every possible efficient matching on the random graph model with chains; only four of these matchings have nonzero price of fairness. For each case, we compare the price of fairness to that of the efficient matching without chains found in Dickerson et al. (2014), and find that the upper bound does not increase. Theorem 2. The price of fairness is zero when β > 1/8.\nProof sketch: For each matching with nonzero price of fairness, β ≤ 1/8. When β > 1/8, a different matching occurs, and the price of fairness is zero.\nTo illustrate these results, we compute the price of fairness when β ∈ [0, 1/8]. These calculations confirm our theoretical results, as shown in Figure 2.1: the price of fairness decreases as β increases, and is zero when β > 1/8.\nThe worst-case price of fairness is small in the random graph model, with or without NDDs. However, real exchange graphs are typically much sparser and less uniform—in reality the price of fairness can be high. In the next section, we discuss two notions of fairness in kidney exchange and determine their worst-case price of fairness.\n3 The Price of Fairness in State-of-the-Art Fair Rules can be Arbitrarily Bad\nThe price of fairness depends on how fairness is defined. This is especially true in real exchanges where the price of fairness can be unacceptably high.\nIn this section, we discuss two kidney-exchange-specific fairness rules introduced by Dickerson et al. (2014): lexicographic fairness and weighted fairness. These rules favor the disadvantaged class, or classes, without considering overall\nloss in efficiency; we will show in the worst case these rules allow the the price of fairness to approach 1 (i.e., total efficiency loss). Proofs of these theorems are in Appendix B."
    }, {
      "heading" : "3.1 Lexicographic Fairness",
      "text" : "As proposed by Dickerson et al. (2014), α-lexicographic fairness assigns nonzero utility only to matchings that award at least a fraction α of the maximum possible fair utility. Letting uH(M) and uL(M) be the utility assigned to only vertices in VH and VL, respectively, the utility function for α-lexicographic fairness is given in Equation (2).\nuα(M) =  uL(M) + uH(M) if uH(M) ≥ α max M′∈M uH(M ′) 0 otherwise. (2)\nTheorems 3 and 4 state that strict lexicographic fairness (α = 1) allows the price of fairness to approach 1. Theorem 3. For any cycle cap L there exists a graph G such that the price of fairness of G under α-lexicographic fairness with 0 < α ≤ 1 is bounded by POF(M, uα) ≥ L−2L . Theorem 4. For any chain cap R there exists a graph G such that the price of fairness of G under the αlexicographic fairness rule with 0 < α ≤ 1 is bounded by POF(M, uα) ≥ R−1R .\nThus, α-lexicographic fairness allows for a price of fairness that approaches 1 as the cycle and chain cap increase."
    }, {
      "heading" : "3.2 Weighted Fairness",
      "text" : "The weighted fairness rule (Dickerson et al. 2014) defines a utility function by first modifying the original edge weights we by a multiplicative factor γ ∈ R such that\nw′e = { (1 + γ)we if e ends in VH we otherwise.\nThen the weighted fairness rule uWF is uWF (M) = ∑ c∈M u′(c),\nwhere u′(c) is the utility of a chain or cycle c with modified edge weights.\nThe modified edge weights prompt the matching algorithm to include more highly-sensitized patients; as in the lexicographic case, we now show that the price of fairness approaches 1 under weighted fairness. Theorem 5. For any cycle cap L and γ ≥ L−1, there exists a graph G such that the price of fairness of G under the weighted fairness rule is bounded by POF(M, uWF ) ≥ L−2L . Theorem 6. For any chain capR and γ ≥ R−1, there exists a graph G such that the price of fairness of G under the weighted fairness rule is bounded by POF(M, uWF ) ≥ R−1R .\nIn the worst case, weighted fairness allows a price of fairness that approaches 1 as the cycle and chain caps increase. The price of fairness also approaches 1 as γ increases. Theorem 7. With no chain cap, there exists a graph G such that the price of fairness of G under the weighted fairness rule is bounded by POF(M, uWF ) ≥ γγ+1 .\nA similar result exists with cycles rather than chains.\nTheorem 8. With no cycle cap there exists a graph G such that the price of fairness of G under the weighted fairness rule is bounded by POF(M, uWF ) ≥ γγ+1 .\nThese bounds show that weighted fairness allows for a price of fairness that approaches 1, i.e., arbitrarily bad, as the cycle cap, chain cap, or γ increase.\nWe have shown that the worst-case prices of fairness approach 1 under both the lexicographic and weighted fairness rules of Dickerson et al. (2014). Next, we propose a rule that favors disadvantaged groups, but also strictly limits the price of fairness using a parameter set by policymakers.\n4 Hybrid Fairness Rule In this section, we present a hybrid fair utility function that balances lexicographic fairness and a utilitarian objective. We generalize the hybrid utility function proposed by Hooker and Williams (2012), which chooses between a Rawlsian (or maximin) objective and a utilitarian objective for multiple classes of agents."
    }, {
      "heading" : "4.1 Utilitarian and Rawlsian Fairness",
      "text" : "Consider two classes of agents that receive utilities u1(X) and u2(X), respectively, for outcome X . The fairness rule introduced by Hooker and Williams (2012) maximizes the utility of the worst-off class, unless this requires taking too many resources from other classes. When the inequality exceeds a threshold ∆ (i.e., |u1(X)−u2(X)| > ∆) they switch to a utilitarian objective that maximizes u1(X)+u2(X). The utility function for this rule is\nu∆(X) =  2 min(u1(X), u2(X)) + ∆ if |u1(X)− u2(X)| ≤ ∆ u1(X) + u2(X)\notherwise.\nThe parameter ∆ is problem-specific, and should be chosen by policymakers. Figure 2(a) shows the level sets of this utility function, with ∆ = 2. This utility function can be generalized by switching to a different fairness rule in the fair region (i.e. when |u1(X) − u2(X)| ≤ ∆). The next section generalizes this rule using lexicographic fairness."
    }, {
      "heading" : "4.2 Hybrid-Lexicographic Rule",
      "text" : "When it is desirable to favor one class of agents g1 over class g2, lexicographic fairness favors g1. We propose a rule that implements lexicographic fairness only when inequality between groups does not exceed ∆. This rule uses two steps: 1) determine whether inequality is small enough to use lexicographic fairness 2) choose the optimal outcome. These steps are outlined below, and formalized in Algorithm 1.\nStep 1: Find all outcomes that maximize a hybrid utility function, and determine whether lexicographic fairness is appropriate.\nWe use a utility function to identify outcomes that satisfy either a lexicographic or utilitarian objective. Equation (3) shows one option for such a utility function, which assigns\nstrict lexicographic utility (α = 1) according to Equation (2) in the fair region, and utilitarian utility otherwise.\nu∆1(X) =  u1(X) + u2(X) if |u1(X)− u2(X)| ≤ ∆ and u1(X) = max X′∈X (u1(X ′)) u1(X) + u2(X) if |u1(X)− u2(X)| > ∆\n0 otherwise. (3)\nwhere X is the set of all possible outcomes. Figure 2(b) shows the contours u∆1. This utility function is clearly too harsh—it assigns zero utility to outcomes in the fair region that do not maximize u1, and its optimal outcomes are not always Pareto efficient. Consider outcomes XF and XL in Figure 2(b). XF is in the fair region but does not maximize u1, so u∆1(XF ) = 0; XL is in the utilitarian region but is less efficient, so u∆1(XL) = u(XL). Under utility function u∆1, the less-efficient outcome XL is chosen over XF .\nTo address this problem we introduce u∆ in Equation (4), which relaxes u∆1. For outcomes in the fair region (that is, with |u1 − u2| ≤ ∆), utility is assigned proportional to u1. As shown in Figure 2(c), the contours of u∆ are continuous.\nu∆(X) =  u1(X) + u2(X)−∆ if u2(X)− u1(X) > ∆ 2u1(X) if |u1(X)− u2(X)| ≤ ∆ u1(X) + u2(X) + ∆ if u1(X)− u2(X) > ∆\n(4)\nLet XOPT be the set of outcomes that maximize u∆. If any outcomes in XOPT are in the utilitarian region , then any utilitarian-optimal outcome is selected. However, if any outcomes in XOPT are in the fair region, then Step 2 must be used. This process is described below, and formalized in Algorithm 1.\nStep 2: If any solution in XOPT is in the fair region, select the lexicographic-optimal solution in the fair region.\nThe utility function u∆ assigns the same utility to all solutions in the fair region with the same u1(X), no matter\nthe value of u2(X). However, if there exist two outcomes XA and XB such that u1(XA) = u1(XB) and u2(XA) > u2(XB), then XA is lexicographically preferred to XB .\nAlgorithm 1 FairMatching Input: Threshold ∆, matchingsM Output: Fair matching M∗\nMOPT ← arg maxM∈M u∆(M) if |MOPT | > 1 then\nSelect a matching M ∈MOPT if M is in the utilitarian region then\nM∗ ←M else M1 ← {M ′ ∈MOPT | u1(M ′) = u1(M)} M∗ ← arg maxM ′∈M1 u2(M ′)\nelse M∗ ←MOPT"
    }, {
      "heading" : "4.3 Hybrid Rule for Several Classes",
      "text" : "We now generalize the hybrid-lexicographic fairness rule to more than two classes. Consider a set P of classes gi, i = 1, . . . , |P|. Let there be an ordering over gi, where ga gb indicates that ga should receive higher priority over gb. WLOG, let the preference ordering over gi be g1 g2 · · · gP . Let ui(X) be the utility received by group i under outcome X . As in the previous section, we 1) use a utility function to determine whether lexicographic fairness is appropriate, then 2) select either a lexicographicor utilitarian-optimal outcome.\nStep 1: To define a utility function, we observe that in Equation (4), in the utilitarian region a positive offset ∆ is added if u1(X) > u2(X), and a negative offset is added otherwise. With |P| classes, each solution in the utilitarian region receives a utility offset of +∆ if u1(X) > ui(X), and −∆ otherwise, for each class i = 2, 3, . . . , |P|. As in the previous section, these offsets ensure continuity in the utility function, and ensure that at least one of the maximizing outcomes will be Pareto optimal.\nu∆(X) =  |P| · u1(X) if maxi(ui(X))−mini(ui(X)) ≤ ∆, u1(X) + ∑|P| i=2(ui(X) + sgn(u1(X)− ui(X))∆)\notherwise (5)\nStep 2: Let XOPT be the set of solutions that maximize u∆. If all optimal solutions are in the utilitarian region, any utilitarian-optimal solution is selected. If any optimal solution is in the fair region, then the lexicographic-optimal solution in the fair region must be selected, subject to the preference ordering g1 g2 · · · g|P|.\nAlgorithm 2 FairMatching for |P| ≥ 2 classes Input: Threshold ∆, matchingsM Output: Fair matching M∗\nMOPT ← arg maxM∈M u∆(M) if |MOPT | > 1 then\nSelect a matching M ∈MOPT if M in utilitarian region then\nM∗ ←M else M1 ← {M ′ ∈MOPT | u1(M ′) = u1(M)} for i = 2, . . . , |P| do Mi ← arg maxM ′∈Mi−1 ui(M ′)\nM∗ ← any matching inM|P| else\nM∗ ←MOPT"
    }, {
      "heading" : "4.4 Price of Fairness for the Hybrid-Lexicographic Rule",
      "text" : "Theorem 9 gives a bound on the price of fairness for the hybrid-lexicographic rule; its proof is given in Appendix B.\nTheorem 9. Assume the optimal utilitarian outcomeXE receives utility u(XE) = uE , with most prioritized class g1 ∈ P receiving utility u1, and Z other classes gi ∈ P such that u1(XE) > ui(XE). Then, POF(M, u∆) ≤ 2((|P|−1)−Z)∆uE ."
    }, {
      "heading" : "4.5 Hybrid Fairness in Kidney Exchange",
      "text" : "The hybrid-lexicographic fairness rule in Equation (4) is easily applied to kidney exchange, with uH and uL the total utility received by highly-sensitized and lowly-sensitized patients, respectively,\nu∆(M) =  uL(M) + uH(M)−∆ if uL(M)− uH(M) > ∆ 2uH(M) if |uL(M)− uH(M)| ≤ ∆ uL(M) + uH(M) + ∆ if uH(M)− uL(M) > ∆\n(6)\nIn the following section, we demonstrate the practical effectiveness of the hybrid-lexicographic rule by testing it on real kidney exchange data.\n5 Experiments In this section, we compare the behavior of α-lexicographic, weighted, and hybrid-lexicographic fairness. All code for these experiemnts are available on GitHub.3 We use each rule to find the optimal fair outcomes for 314 real kidney exchanges from the United Network for Organ Sharing (UNOS), collected between 2010 and 2016. To solve the kidney exchange clearing problem (KEP) we use the PICEF formulation introduced by Dickerson et al. (2016), with cycle cap 3 and various chain caps. In real exchanges, not all recommended edges in a matching result in successful transplants. To reflect this uncertainty, we use the concept of failure-aware kidney exchange introduced in (Dickerson et al. 2013): all edges in the exchange can fail with probability (1 − p); the matching algorithm maximizes expected matching weight, considering edge success probability p."
    }, {
      "heading" : "5.1 Procedure",
      "text" : "For each UNOS exchange graph G, we use the following procedure to implement each fairness rule. We repeat the following procedure for chain caps 0, 3, 10, and 20, and for edge success probabilities p = 0.1n, with n = 1, 2, . . . , 10.\n1. Find the efficient matchingME by solving the to optimality the NP-hard kidney exchange problem (KEP) on G.\n2. Find the fair matching MF by solving the KEP on G′ = (V,E′), where each edge e ∈ E′ has weight 1 if e ends in VH and 0 otherwise.\n3. Weighted Fairness: Find the γ-fair matching Mγ by solving the KEP on Gγ = (V,Eγ), where each edge e ∈ Eγ has weight 1 + γ if e ends in VH and 1 otherwise. After finding Mγ , the reported utilities are calculated using edge weights of E and not E′. We use weight parameters γ = 2n, with n = 0, 1, 2, . . . , 10.\n4. α-Lexicographic Fairness: Find the α-fair matchingMα by solving the KEP on G, with the additional constraint uH(Mα) ≥ αuH(ME). We use parameters α = 0.1n, with n = 0, 1, 2, . . . , 10.\n5. Hybrid-Lexicographic Fairness: Find the ∆-fair matchingM∆ using the α-fair matchingsMα, and Algorithm 1. That is, M∆ = FairMatching(∆,Mα). We use parameters ∆ = 0.1n · u(ME), with n = 0, 1, 2, . . . , 10. Throughout this procedure, we calculate the utility of the\nefficient matching (uE) and the fair matching (uF ) for each UNOS graph, and for each fairness rule—with parameters α ∈ [0, 1], γ ∈ [0, 20], and ∆ ∈ [0, u(ME)].\nThere are two important outcomes of each fairness rule: Price of Fairness (PoF), and fraction of the fair score (%F ). To calculate PoF we use the definition in Equation (1), using uE and uF . We define %F as the fraction of the maximum highly sensitized utility, achieved by M{α,γ,∆}, defined as\n%F (M{α,γ,∆},MF ) = uH(M{α,γ,∆})/uH(MF ).\nPoF and %F indicate the efficiency loss and the fairness of each rule, respectively.\n3https://github.com/duncanmcelfresh/FairKidneyExchange"
    }, {
      "heading" : "5.2 Results and Discussion",
      "text" : "Each fairness rule offers a parameter that balances efficiency and fairness. Two of these rules guarantee a certain outcome: α-lexicographic guarantees fairness, but allows high efficiency loss, while hybrid-lexicographic bounds overall efficiency loss. Weighted fairness makes no guarantees.\nThe price of fairness can be high in real exchanges, especially when edge success probability p is small. In failureaware kidney exchange, cycles and chains of length k receive utility proportional to pk. Fair matchings often use longer cycles and chains than the efficient matching, in order to reach highly sensitized patients; this leads to a high price of fairness when p is small.\nEven when α and γ are small, there are cases when both α-lexicographic and weighted fairness allow for a high PoF. This becomes worse with lower edge probability. Figure 3 shows the worst-case PoF and %F for each rule, for the smallest parameters tested, for a range of edge success probabilities. Appendix C contains results for all parameter values tested.\nHybrid-lexicographic fairness limits PoF within the guaranteed bound of 0.2; this comes at the cost of a low %F—when edge success probability is small, hybridlexicographic fairness awards zero fair utility in the worst case. α-lexicographic fairness produces the opposite behavior: %F is always larger than the guaranteed bound of 0.1, but the worst-case price of fairness grows steadily as edge probability decreases.\nTheory suggests that the price of fairness is small on denser random graphs (see Section 2). We empirically confirm this theoretical finding by calculating the worst-case price of fairness and %F for random graphs of various sizes generated from real data; these results are given in Section C. In this case—when the price of fairness is small— α-lexicographic fairness may be appropriate, as overall efficiency loss is not severe.\nBoth α-lexicographic and hybrid-lexicographic fairness\nare useful, depending on the desired outcome. Policymakers may choose between these rules, and set the parameters α and ∆ to guarantee either a minimum %F or a maximum price of fairness.\n6 Conclusion We addressed the classical problem of balancing fairness and efficiency in resource allocation, with a specific focus on the kidney exchange application area. Extending work by Ashlagi and Roth (2014) and Dickerson et al. (2014), we show that the theoretical price of fairness is small on a random graph model of kidney exchange, when both cycles and chains are used. However this model is too optimistic—real kidney exchanges are less certain and more sparse, and in reality the price of fairness can be unacceptably high.\nDrawing on work by Hooker and Williams (2012), which is not applicable to kidney exchange, we provided the first approach to incorporating fairness into kidney exchange in a way that prioritizes marginalized participants, but also comes with acceptable worst-case guarantees on overall efficiency loss. Furthermore, our method is easily applied as an objective in the mathematical-programming-based clearing methods used in today’s fielded exchanges. Using data from a large fielded kidney exchange, we showed that our method bounds efficiency loss while also prioritizing marginalized participants when possible.\nMoving forward, it would be of theoretical and practical interest to address fairness in a realistic dynamic model of a matching market like kidney exchange (Anshelevich et al. 2013; Akbarpour et al. 2014; Anderson et al. 2015; Dickerson and Sandholm 2015). For example, how does prioritizing a class of patients in the present affect their, or other groups’, long-term welfare? Similarly, exploring the effect on long-term efficiency of the single-shot ∆ we use in this paper would be of practical importance; to start, ∆ can be viewed as a hyperparameter to be tuned (Thornton et al. 2013)."
    }, {
      "heading" : "A Price of Fairness in the Random Graph Model",
      "text" : "Ashlagi and Roth (2014) characterize efficient matchings in a random graph model without chains, and Dickerson et al. (2014) build on this to show that the price of fairness without chains is bounded above by 2/33. Dickerson et al. (2012) extend the efficient matching of Ashlagi and Roth (2014) to include chains, but do not calculate the price of fairness. We close the remaining theory gap regarding the price of fairness with chains. Appendix A.1 describes the random graph model, and Appendix A.2 presents the theoretical price of fairness with chains.\nA.1 Random Graph Model Let all patient-donor pairs P be partitioned into subsets V X-Y for each patient blood type X and donor blood type Y . These subsets will be further partitioned into lowly- and highly sensitized pairs V X-YL and V X-Y H . Let µX be the fraction of both patients and donors of each blood type X . Let NX be the set of NDDs of blood type X . Let β|P | be the total number of NDDs, with the same blood type distribution as patients. That is, |NX | = βµX |P |, with X ∈ {A,B,AB,O}.\nPatient-donor vertices may be blood-type compatible, but will not be connected by a directed edge due to tissuetype incompatibility. Let p̄ be the fraction of patientdonor pairs that are blood-type-compatible, but tissue-typeincompatible.\nWe refer to certain blood-type vertex subsets of as follows:\n1. V A-B and V B-A: reciprocal pairs\n2. V X-X : self-demanded pairs\n3. V AB-B, V AB-A, V AB-O, V A-O, V B-O: over-demanded pairs\n4. V A-AB, V B-AB, V O-A, V O-B, V O-AB: under-demanded pairs\nTo reflect real-world exchanges, assume p̄ > 1 − λ, µO > µA > µB > µAB, and p̄ < 2/5. WLOG, let |V A-B| > |V B-A|, and assume that the absolute difference between these pools grows sublinearly with the size of the exchange, that is |V A-B| − |V B-A| = o(n).\nA.2 The Price of Fairness With Chains We calculate the price of fairness in this model by exploring all of the possible ways that the efficient matching can proceed, which depends on β. We state without proof that there are only four possible matchings with nonzero price of fairness, and several matchings with zero price of fairness. It is tedious, but straightforward, to confirm this statement, using the assumptions made while constructing these matchings. Figure 4 shows each possible matching on this model, and some of the impossible matchings.\nPropositions 2, 3, 4, and 5 give the price of fairness for each of the four matchings with nonzero price of fairness; for each of these cases, β < µAB(1− p̄). Proposition 1 states that the price of fairness is zero when β > µAB(1− p̄).\nIn all of these matchings, the price of fairness is bounded above by the price of fairness without NDDs, found by Dickerson et al. (2014); Theorem 1 states this finding, which uses by Lemmas 2 and 3.\nTheorem 2 states that the price of fairness is zero when β > 1/8, and Lemmas 4, 5, 6, and 7 give bounds on β for each matching with nonzero price of fairness.\nWe start with the efficient matching proposed in (Dickerson et al. 2012) using cycles and chains up to length 3. This matching may proceed in many different ways, depending on β. However, most outcomes are impossible based on the canonical assumptions for the random graph model. Figure 4 shows all possible ways that the matching can proceed.\nLemma 1 states that even without chains, all highlysensitized patients except for those in V O-AB are matched in the efficient matching, only using cycles; this Lemma will be used in all following propositions.\nLemma 1. Denote by M the set of matchings in G(n) using cycles and chains up to length 3. As n → ∞, a.s. all highly sensitized pairs can be matched with no efficiency loss under the lexicographic fairness rule, except for those of type O-AB.\n(This Lemma uses the same efficient matching introduced by Dickerson (Dickerson et al. 2012).)\nsketch. Begin with the efficient matching M∗ using only cycles up to length 3, proposed by Dickerson in (Dickerson et al. 2014). M∗ matches all over-demanded and selfdemanded vertices with high probability, but leaves some under-demanded vertices unmatched. We proceed through the initial steps of matching M∗ to show that all vertices in V O-AH , V O-B H , V A-AB H , and V B-AB H are matched.\n1. Match all vertices in V B-A in 2-cycles with V A-B, exhausting V B-A and leaving |V A-B| ∝ o(n). 2. Match all remaining vertices in V A-B in 3-cycles with V B-O and V O-A. There are only |V A-B| ∝ o(n) of these cycles, which will become negligible to the price of fairness as n→∞. 3. Match all remaining vertices in V A-O in 2-cycles with V O-A. Note that |V A-O| ∝ p̄µAµO and |V O-A| ∝ µAµO. The V A-O vertices are exhausted first if |V A-O| < |V O-A|, which holds almost surely because p̄µAµO < µAµO due to the assumption p̄ < 2/5. All highly sensitized vertices V O-AH are matched because (1−λ)µAµO < p̄µAµO holds under the assumption 1 − λ < p̄. Thus both V A-O and V O-AH are exhausted, and |V O-A| ∝ µAµO(1− p̄). 4. Match all remaining vertices in V B-O in 2-cycles with V O-B. Note that |V B-O| ∝ p̄µBµO and |V O-B| ∝ µBµO. As before, the a.s. |V O-B| > |V B-O|. All highly sensitized vertices V O-BH are matched a.s., because p̄µBµO > (1 − λ)µBµO holds under the assumption p̄ > 1−λ. Thus both V B-O and V O-BH are exhausted, and |V O-B| ∝ µBµO(1−p̄). 5. Match all vertices in V AB-A in 2-cycles with V A-AB. Note that, |V AB-A| ∝ p̄µAµAB and |V A-AB| ∝ µAµAB. As before, a.s. |V A-AB| > |V A-AB|. All highly sensitized vertices V A-ABH are matched, because p̄µAµAB >\n123456\n(1 − λ)µAµAB under the assumption p̄ > 1 − λ. Thus both V AB-A and V A-ABH are exhausted, and |V A-AB| ∝ µAµO(1− p̄). 6. Match all vertices in V AB-B in 2-cycles with V B-AB. Note that, |V AB-B| ∝ p̄µBµAB and |V B-AB| ∝ µBµAB, and a.s. |V B-AB| > |V AB-B|. All highly sensitized vertices V B-ABH are matched, because p̄µBµAB > (1 − λ)µBµAB under the assumption p̄ > 1 − λ. Thus both V AB-B and V B-ABH are exhausted, and |V B-AB| ∝ µBµO(1− p̄).\nThus, these initial steps of matching M∗ exhaust all highly sensitized pairs in V O-AH , V O-B H , V A-AB H , and V B-AB H .\nWith uniform edge weights, lexicographic fairness requires that we match the maximum possible number of highly sensitized vertices. Lemma 1 states that the efficient matching M∗ includes all highly sensitized patients, except for those in V O-AB. Therefore all efficiency loss–and price of fairness–is caused by matching vertices in V O-ABH .\nUsing both chains and cycles increases overall efficiency. In the dense graph model used in this Appendix, adding chains can only decrease the price of fairness.\nProposition 1 in (Dickerson et al. 2014) states that with only cycles up to length 3, and assuming p̄ > 1 − λ, and µO < 3µA/2, and µO > µA > µB > µAB, the price of\nfairness is at most 233 . In the dense graph model used here, adding chains tightens this upper bound.\nThe following propositions tighten the upper bound on the price of fairness, for every possible value of β.\nProposition 1. Assume\n1 β > (1− p̄)µAB. Denote by M the set of matchings in G(n) using cycles and chains up to length 3. As n → ∞, almost surely POF(M, uLEX) = 0.\nsketch. We begin by executing the initial steps of matching M∗ as done in the proof of Lemma 1, matching all highly sensitized vertices except for those in V O-ABH . The following steps continue the matching M∗ from Lemma 1.\n7. A- and B-type NDDs donate to V A-AB and V B-AB, respectively. Note that |NA| ∝ βµA and |V A-AB| ∝ (1 − p̄)µAµAB. Assuming β > (1 − p̄)µAB, the inequality βµA > µAµAB(1 − p̄) holds and a.s. |NA| > |V A-AB|. By the same argument, a.s. |NB| > |V B-AB|. Thus, both V A-AB and V B-AB are exhausted, and |NB| ∝ µB (β − (1− p̄)µAB) and |NA| ∝ µA (β − (1− p̄)µAB).\n8. Create cycles of the form (AB-O, O-X, X-AB), with X ∈ {A,B}. None of these cycles occur because both V A-AB and V B-AB have been exhausted in previous steps.\n9. Create chains of the form (O,O-X,X-AB), with X ∈ {A,B}. None of these cycles occur, because both V A-AB and V B-AB have been exhausted in previous steps.\n10. Remaining O-type NDDs donate to remaining underdemanded vertices, beginning with V O-AB. Note that no O-type NDDs have been used in previous steps, so |NO| ∝ βµO. 11. 2-cycles are created with V AB-O and remaining underdemanded vertices, beginning with V O-AB. Note that no vertices in V AB-O have been used in previous steps, so |V AB-O| ∝ p̄µOµAB.\nThe final two steps match up to |V AB-O|+ |NO| ∝ βµO + p̄µOµAB vertices in V O-AB. The only remaining highlysensitized vertices are in V |HOAB ∝ (1 − λ)µOµAB. Assuming that p̄ > 1 − λ, the inequality βµO + p̄µOµAB > p̄µOµAB > (1− λ)µOµAB holds, and a.s. |V AB-O|+ |NO| > |V |HOAB|. This exhausts all vertices in |V O-ABH |. All other highly-sensitized vertices were matched in steps 1-6 of, as in Lemma 1. Thus, all highly sensitized vertices can be matched with no efficiency loss, and the price of fairness is zero.\nProposition1 assumes that β is extremely large, specifically β > 1/4 > (1− p̄)µAB. In practice, β < 0.01 – that is, the number of NDDs in an exchange is often less than 1% of the size of the exchange. The following Propositions address the price of fairness when β < (1− p̄)µAB < 1/4. Proposition 2. Assume\nA.1 β < µA (1− p̄)− p̄µAB A.2 β < µAB(1− p̄)− p̄µABµO/µA A.3 β < µAB ( µA µA+µO − p̄ )\nThese constraints imply β ∈ [0, 1/8].Denote byM the set of matchings in G(n) using cycles and chains up to length 3. Almost surely as n→∞, the price of fairness is\nPOF(M, uLEX) = (1− λ)µOµAB\nuE\nwith\nuE = p̄ [ 2µABµB + 2µABµA + 3µABµO\n+2µAµO + 2µBµO + µ 2 O + µ 2 A + µ 2 B + µ 2 AB ] +2µAµB + β (µA + µB + 2µO)\nsketch. We begin with matching M∗ as done in the proof of Lemma 1, matching all highly sensitized vertices except for those in V AB-OH . We now complete the efficient matching using both 3-cycles and 3-chains as in (Dickerson et al. 2012).\n7. A- and B-type NDDs donate to V A-AB and V B-AB, respectively. Note that |NA| ∝ βµA and |V A-AB| ∝ (1 − p̄)µAµAB. The inequality βµA < µAµAB(1− p̄) holds due\nto assumption A.2, and a.s. |NA| < |V A-AB|. By the same argument, a.s. |NB| < |V B-AB|. Thus, both NA and NB are exhausted, and |V A-AB| ∝ µAµAB(1 − p̄) − βµA and |V B-AB| ∝ µBµAB(1− p̄)− βµB.\n8. Create cycles of the form (AB-O, O-A, A-AB). The current size of each vertex group is\n(1) |V AB-O| ∝ p̄µABµO (2) |V O-A| ∝ (1− p̄)µAµO (3) |V A-AB| ∝ µAµAB(1− p̄)− βµA\nThe inequality (1) < (2) holds due to the model assumptions, so a.s. |V AB-O| < |V O-A|. Note that the inequality (1) < (3) can be written as\nβ < µAB(1− p̄)− p̄µABµO/µA which holds by assumptions A.2, and a.s. |V AB-O| < |V A-AB|. Executing these cycles exhausts V AB-O and leaves the following vertices remaining\n(1) |V O-A| ∝ (1− p̄)µAµO − p̄µABµO. (2) |V A-AB| ∝ (1− p̄)µAµAB − p̄µABµO − βµA\n9. Create cycles of the form (AB-O, O-B, B-AB). The previous step exhausted V AB-O, so none of these cycles occur.\n10. Create chains of the form (O,O-A,A-AB). The current size of each vertex group is\n(1) |NO| ∝ βµO (2) |V O-A| ∝ (1− p̄)µAµO − p̄µABµO (3) |V A-AB| ∝ (1− p̄)µAµAB − p̄µABµO − βµA\nThe inequality (1) < (2) holds due to assumption A.1, so a.s. |NO| < |V O-A|. Note that inequality (1) < (3) can be written as\nβ < µAB\n( µA µA + µO − p̄ )\nwhich holds due to A.3. Thus a.s. |NO| < |V A-AB|, and |NO| is exhausted. The vertices unmatched by these chains are\n(1) |V O-A| ∝ (1− p̄)µAµO − p̄µABµO − βµO (2) |V A-AB| ∝ (1− p̄)µAµAB − p̄µABµO − β (µA + µO)\n11. Remaining O-type NDDs donate to remaining underdemanded vertices. The previous step exhausted NO, so none of these donations occur.\n12. 2-cycles are created with V AB-O and remaining underdemanded vertices. The previous step exhausted V AB-O, so none of these cycles occur.\nIn the efficient matching described above, the number of matched pairs in each under-demanded group is\n|V O-A| ∝ µO (β + p̄ (µA + µAB)) |V O-B| ∝ p̄µBµO |V A-AB| ∝ (β + p̄µAB)(µA + µO) |V B-AB| ∝ (β + p̄µAB)µB |V O-AB| = 0\nCombining these with the over-demanded and selfdemanded vertices, the total size of the efficient matching is\nuE = p̄ [ 2µABµB + 2µABµA + 3µABµO\n+2µAµO + 2µBµO + µ 2 O + µ 2 A + µ 2 B + µ 2 AB ] +2µAµB + β (µA + µB + 2µO)\nThis efficient matching includes all highly sensitized vertices except for those in V O-ABH . To calculate the price of fairness we now find the size of the fair matching. We match each vertex in V O-ABH by removing a 3-cycle of the form (AB-O, O-A, A-AB) and creating a 2-cycle (AB-O, O-AB). This matching used |V AB-O| ∝ p̄µOµAB 3-cycles of this form, while |V O-ABH | ∝ (1 − λ)µOµAB. The model assumption p̄ > 1 − λ ensures that |V AB-O| > |V O-ABH |, and all vertices in V O-ABH can be matched in this way.\nTo match each vertex in V O-ABH , we remove from the matching one vertex from both V O-A and V A-AB. Thus the total efficiency loss is |V O-ABH | ∝ (1 − λ)µOµAB. The price of fairness is\nPOF(M, uLEX) = (1− λ)µOµAB\nuE\nWith uE defined previously.\nProposition 3. Assume 1 β < µAB(1− p̄)− µABµOp̄/(µA + µB) 2 β < µAµAB(1−p̄)+µBµO(1−p̄)−p̄µOµABµA+µO 3 β > µAB(1− p̄)− µABµOp̄/µA 4 β < µAB(1− p̄)− p̄µABµO/µA + (1− p̄)µBµO/µA 5 β < µAB(1− p̄)− µOµAB/(1− µAB)\nNote that as written, constraint 4 is a looser bound than 5, and can be removed. However it is convenient to leave 4 for clarity. These constraints imply β ∈ [0, 1/12]. Denote by M the set of matchings in G(n) using cycles and chains up to length 3. Almost surely as n→∞, the price of fairness is\nPOF(M, uLEX) = (1− λ)µOµAB\nuE\nwith\nuE = p̄ [ 2µABµB + 2µABµA + 3µABµO\n+2µAµO + 2µBµO + µ 2 O + µ 2 A + µ 2 B + µ 2 AB ] +2µAµB + β (µA + µB + 2µO)\nsketch. We begin with matching M∗ as done in the proof of Lemma 1, matching all highly sensitized vertices except for those in V AB-OH . We now complete the efficient matching using both 3-cycles and 3-chains as in (Dickerson et al. 2012).\n7. A- and B-type NDDs donate to V A-AB and V B-AB, respectively. Note that |NA| ∝ βµA and |V A-AB| ∝ (1 − p̄)µAµAB. The inequality βµA < µAµAB(1− p̄) holds due to assumption A.1, and a.s. |NA| < |V A-AB|. By the same argument, a.s. |NB| < |V B-AB|. Thus, both NA and NB are exhausted, and |V A-AB| ∝ µAµAB(1 − p̄) − βµA and |V B-AB| ∝ µBµAB(1− p̄)− βµB.\n8. Create cycles of the form (AB-O, O-A, A-AB). The current size of each vertex group is\n(1) |V AB-O| ∝ p̄µABµO (2) |V O-A| ∝ (1− p̄)µAµO (3) |V A-AB| ∝ µAµAB(1− p̄)− βµA\nNote that the inequality (3) < (1) can be written as\nβ > µAB(1− p̄)− p̄µABµO/µA which holds by assumption 3, and a.s. |V A-AB| < |V AB-O|. The inequality (3) < (2) can be written as\nβ > (1− p̄)(µAB − µO)\nwhich holds by model assumptions, and a.s. |V A-AB| < |V O-A|. Executing these cycles exhausts V A-AB and leaves the following vertices remaining\n|V O-A| ∝ (1− p̄)µA(µO − µAB) + µAβ |V AB-O| ∝ p̄µABµO − µAµAB(1− p̄) + µAβ\n9. Create cycles of the form (AB-O, O-B, B-AB). The current size of each vertex group is\n(1) |V AB-O| ∝ p̄µABµO − µAµAB(1− p̄) + µAβ (2) |V O-B| ∝ (1− p̄)µBµO (3) |V B-AB| ∝ µBµAB(1− p̄)− βµB\nInequality (1) < (2) can be written as\nβ < µAB(1− p̄)− p̄µABµO/µA + (1− p̄)µBµO/µA\nwhich holds by assumption 4. Inequality (1) < (3) can be written as\nβ < µAB(1− p̄)− µABµOp̄/(µA + µB)\nwhich holds by assumption 1. Executing these cycles exhausts V AB-O and leaves the following vertices remaining\n|V O-B| ∝ µAµAB(1−p̄)+(µB−p̄(µAB +µB))µO−βµA |V B-AB| ∝ ((1− p̄)µAB − β) (µA + µB)− p̄µABµO\n10. Create chains of the form (O,O-A,A-AB). Previous steps exhausted V A-AB so none of these chains occur.\n11. Create chains of the form (O,O-B,B-AB). The current size of each vertex group is\n(1) |NO| ∝ βµO (2) |V O-B| ∝ µAµAB(1−p̄)+(µB−p̄(µAB +µB))µO−βµA (3) |V B-AB| ∝ ((1− p̄)µAB − β) (µA + µB)− p̄µABµO\nThe inequality (1) < (2) can be written as\nβ < µAµAB(1− p̄) + µBµO(1− p̄)− p̄µOµAB\nµA + µO\nwhich holds by assumption 2. The inequality (1) < (3) can be written as\nβ < µAB(1− p̄)− µOµAB/(1− µAB) which holds by assumption 5. Executing these chains exhausts NO and leaves the following vertices remaining\n|V O-B| ∝ µAµAB(1− p̄) + (µB − p̄(µAB + µB))µO − β(µA + µO)\n|V B-AB| ∝ (1− p̄)µAB−β)(µA +µB)− (β+ p̄µAB)µO 12. Remaining O-type NDDs donate to remaining under-\ndemanded vertices. The previous step exhausted NO, so none of these donations occur. 13. 2-cycles are created with V AB-O and remaining underdemanded vertices. The previous steps exhausted V AB-O, so none of these cycles occur.\nIn the efficient matching described above, the number of matched pairs in each under-demanded group is\n|V O-A| ∝ (1− p̄)µA(µO − µAB) + µAβ\n|V O-B| ∝ µAµAB(1− p̄) + (µB − p̄(µAB + µB))µO − β(µA + µO)\n|V A-AB| = 0 |V B-AB| ∝ (1− p̄)µAB − β)(µA + µB)− (β + p̄µAB)µO |V O-AB| = 0\nCombining these with the over-demanded and selfdemanded vertices, the total size of the efficient matching is\nuE = p̄ [ 2µABµB + 2µABµA + 3µABµO\n+2µAµO + 2µBµO + µ 2 O + µ 2 A + µ 2 B + µ 2 AB ] +2µAµB + β (µA + µB + 2µO)\nThis efficient matching includes all highly sensitized vertices except for those in V O-ABH . To calculate the price of fairness we now find the size of the fair matching. We match each vertex in V O-ABH by removing a 3-cycle of the form (AB-O, O-A, A-AB) and creating a 2-cycle (AB-O, O-AB). This matching used |V AB-O| ∝ p̄µOµAB 3-cycles of this form, while |V O-ABH | ∝ (1 − λ)µOµAB. The model assumptions ensure that |V AB-O| > |V O-ABH |, and all vertices in V O-ABH can be matched in this way.\nTo match each vertex in V O-ABH , we remove from the matching one vertex from both V O-A and V A-AB. Thus the\ntotal efficiency loss is |V O-ABH | ∝ (1 − λ)µOµAB. The price of fairness is\nPOF(M, uLEX) = (1− λ)µOµAB\nuE\nWith uE defined previously.\nProposition 4. Assume 1 β > µAB(1− p̄)− µABµOp̄/µA 2 β < µAB(1− p̄)− µABµOp̄/(µA + µB) 3 β < µAB(1− p̄)− p̄µABµO/µA + (1− p̄)µBµO/µA 4 β > µAB ( (1− p̄)− µO1−µAB\n) 5 β < µAB(1− p̄)− λµO µAB1−µAB\nThese constraints imply β ∈ [0, 1/8]. Denote by M the set of matchings in G(n) using cycles and chains up to length 3. Almost surely as n → ∞, the price of fairness is\nPOF(M, uLEX) = (1− µAB)((1− p̄)µAB − β)− λµABµO\nuE\nwith\nuE = µABµB + µA (µAB + 2µB) + βµO + p̄ [ µ2A + µAµAB + µ 2 AB + µABµB + µ 2 B\n+ 2(µA + µAB + µB)µO + µ 2 O ] sketch. We begin with matching M∗ as done in the proof of Lemma 1, matching all highly sensitized vertices except for those in V AB-OH . We now complete the efficient matching using both 3-cycles and 3-chains as in (Dickerson et al. 2012).\n7. A- and B-type NDDs donate to V A-AB and V B-AB, respectively. Note that |NA| ∝ βµA and |V A-AB| ∝ (1 − p̄)µAµAB. The inequality βµA < µAµAB(1 − p̄) holds due to assumption 2, and a.s. |NA| < |V A-AB|. By the same argument, a.s. |NB| < |V B-AB|. Thus, both NA and NB are exhausted, and |V A-AB| ∝ µAµAB(1 − p̄) − βµA and |V B-AB| ∝ µBµAB(1− p̄)− βµB. 8. Create cycles of the form (AB-O, O-A, A-AB). The current size of each vertex group is\n(1) |V AB-O| ∝ p̄µABµO (2) |V O-A| ∝ (1− p̄)µAµO (3) |V A-AB| ∝ µAµAB(1− p̄)− βµA\nNote that the inequality (3) < (1) can be written as\nβ > µAB(1− p̄)− p̄µABµO/µA which holds by assumption 1, and a.s. |V A-AB| < |V AB-O|. The inequality (3) < (2) can be written as\nβ > (1− p̄)(µAB − µO) which holds by model assumptions, and a.s. |V A-AB| < |V O-A|. Executing these cycles exhausts V A-AB and leaves the following vertices remaining\n|V O-A| ∝ (1− p̄)µA(µO − µAB) + µAβ |V AB-O| ∝ p̄µABµO − µAµAB(1− p̄) + µAβ\n9. Create cycles of the form (AB-O, O-B, B-AB). The current size of each vertex group is\n(1) |V AB-O| ∝ p̄µABµO − µAµAB(1− p̄) + µAβ (2) |V O-B| ∝ (1− p̄)µBµO (3) |V B-AB| ∝ µBµAB(1− p̄)− βµB\nInequality (1) < (2) can be written as\nβ < µAB(1− p̄)− p̄µABµO/µA + (1− p̄)µBµO/µA which holds by assumption 3. Inequality (1) < (3) can be written as\nβ < µAB(1− p̄)− µABµOp̄/(µA + µB) which holds by assumption 2. Executing these cycles exhausts V AB-O and leaves the following vertices remaining |V O-B| ∝ µAµAB(1−p̄)+(µB−p̄(µAB +µB))µO−βµA |V B-AB| ∝ ((1− p̄)µAB − β) (µA + µB)− p̄µABµO\n10. Create chains of the form (O,O-A,A-AB). Previous steps exhausted V A-AB so none of these chains occur.\n11. Create chains of the form (O,O-B,B-AB). The current size of each vertex group is\n(1) |NO| ∝ βµO (2) |V O-B| ∝ µAµAB(1−p̄)+(µB−p̄(µAB +µB))µO−βµA (3) |V B-AB| ∝ ((1− p̄)µAB − β) (µA + µB)− p̄µABµO\nThe inequality (3) < (1) can be written as\nβ > µAB\n( (1− p̄)− µO\n1− µAB ) which holds by assumption 4. The inequality (3) < (2) can be written as\nβ > (1− p̄)(µAB − µO) which holds by the model assumptions. Executing these chains exhausts V B-AB and leaves the following vertices remaining |NO| ∝ (β + p̄µAB)(µA + µB + µO)− µAB(µA + µB) |V O-B| ∝ µB ((β + (1− p̄)(µO − µAB)) 12. Remaining O-type NDDs and V AB-O vertices match with remaining under-demanded vertices, starting with V O-AB. The remaining size of each vertex group is\n(1) |NO| ∝ (β + p̄µAB)(µA + µB + µO)− µAB(µA + µB) (2) |V O-AB| ∝ µABµO (3) |V AB-O| = 0\nAfter simplifying, the inequality (1) < (2) can be written as\nβ < µAB(1− p̄) which holds by assumption 2. Thus O-type NDDs are exhausted first, leaving some vertices remaining in V O-AB, with\n|V O-AB| ∝ ((1− p̄)µAB − β) (1− µAB)\nIn the efficient matching described above, the number of matched pairs in each under-demanded group is\n|V O-A| ∝ µA (µAB(1− p̄) + p̄µO − β) |V O-B| ∝ µB (µAB(1− p̄) + p̄µO − β) |V A-AB| ∝ µAµAB |V B-AB| ∝ µBµAB |V O-AB| ∝ (β + µABp̄)(1− µAB)− µAB(µA + µB)\nCombining these with the over-demanded and selfdemanded vertices, the total size of the efficient matching is\nuE = µABµB + µA (µAB + 2µB) + βµO + p̄ [ µ2A + µAµAB + µ 2 AB + µABµB + µ 2 B\n+ 2(µA + µAB + µB)µO + µ 2 O ] To calculate the price of fairness we now find the size of the fair matching. The only unmatched highly sensitized patients are in V O-ABH , some of which were matched in step 12 above. We now show that the number of matched vertices in V O-AB is smaller than the initial size of V O-ABH , so not all vertices in V O-ABH can be matched. LetM\nO-AB be the number of matched vertices in V O-AB, and HO-AB be the initial size of V O-ABH . The inequality M O-AB < HO-AB can be written as\n(β + µABp̄)(1− µAB)− µAB(µA + µB) < (1− λ)µOµAB (7)\nβ < µAB(1− p̄)− λµO µAB\n1− µAB (8)\nThis inequality holds by assumption 5, and a.s. there are some unmatched vertices in V O-ABH . The number of unmatched highly sensitized vertices is\nHO-AB −MO-AB ∝ (1− µAB)((1− p̄)µAB − β)− λµABµO .\nWe match each of these remaining vertices by removing a 3-cycle of the form (AB-O, O-A, A-AB) and creating a 2-cycle (AB-O, O-AB). This matching used |V AB-O| ∝ p̄µOµAB 3-cycles of this form, while |V O-ABH | ∝ (1 − λ)µOµAB. The model assumptions ensure that |V AB-O| > |V O-ABH |, and all remaining vertices in V O-ABH can be matched in this way.\nTo match each remaining vertex in V O-ABH , we remove from the matching one vertex from both V O-A and V A-AB. Thus the total efficiency loss is HO-AB −MO-AB. The price of fairness is\nPOF(M, uLEX) = (1− µAB)((1− p̄)µAB − β)− λµABµO\nuE\nWith uE defined previously.\nProposition 5. Assume\n1 β > µAB(1− p̄)− µABµOp̄/(µA + µB) 2 β < µAB(1− p̄)− λµO µAB1−µAB\nThese constraints imply β ∈ [0, 1/10]. Denote by M the set of matchings in G(n) using cycles and chains up to length 3. Almost surely as n→∞, the price of fairness is\nPOF(M, uLEX) = (1− µAB)((1− p̄)µAB − β)− λµABµO\nuE\nwith\nuE = µABµB + µA (µAB + 2µB) + βµO + p̄ [ µ2A + µAµAB + µ 2 AB + µABµB + µ 2 B\n+ 2(µA + µAB + µB)µO + µ 2 O ] sketch. We begin with matching M∗ as done in the proof of Lemma 1, matching all highly sensitized vertices except for those in V AB-OH . We now complete the efficient matching using both 3-cycles and 3-chains as in (Dickerson et al. 2012).\n7. A- and B-type NDDs donate to V A-AB and V B-AB, respectively. Note that |NA| ∝ βµA and |V A-AB| ∝ (1 − p̄)µAµAB. The inequality βµA < µAµAB(1 − p̄) holds due to assumption 2, and a.s. |NA| < |V A-AB|. By the same argument, a.s. |NB| < |V B-AB|. Thus, both NA and NB are exhausted, and |V A-AB| ∝ µAµAB(1 − p̄) − βµA and |V B-AB| ∝ µBµAB(1− p̄)− βµB.\n8. Create cycles of the form (AB-O, O-A, A-AB). The current size of each vertex group is\n(1) |V AB-O| ∝ p̄µABµO (2) |V O-A| ∝ (1− p̄)µAµO (3) |V A-AB| ∝ µAµAB(1− p̄)− βµA\nNote that the inequality (3) < (1) can be written as\nβ > µAB(1− p̄)− p̄µABµO/µA which holds by assumption 1 and a.s. |V A-AB| < |V AB-O|. The inequality (3) < (2) can be written as\nβ > (1− p̄)(µAB − µO)\nwhich holds by the model assumptions, and a.s. |V A-AB| < |V O-A|. Executing these cycles exhausts V A-AB and leaves the following vertices remaining\n|V O-A| ∝ (1− p̄)µA(µO − µAB) + µAβ |V AB-O| ∝ p̄µABµO − µAµAB(1− p̄) + µAβ\n9. Create cycles of the form (AB-O, O-B, B-AB). The current size of each vertex group is\n(1) |V AB-O| ∝ p̄µABµO − µAµAB(1− p̄) + µAβ (2) |V O-B| ∝ (1− p̄)µBµO (3) |V B-AB| ∝ µBµAB(1− p̄)− βµB\nInequality (3) < (2) can be written as\nβ > (1− p̄)(µAB − µO) which holds by the model assumptions. Inequality (3) < (1) can be written as\nβ > µAB(1− p̄)− µABµOp̄/(µA + µB) which holds by assumption 1. Executing these cycles exhausts V B-AB and leaves the following vertices remaining |V AB-O| ∝ (β − (1− p̄)µAB)(µA + µB) + p̄µABµO |V B-AB| ∝ µB(β − (1− p̄)(µAB − µO))\n10. Create chains of the form (O,O-A,A-AB). Previous steps exhausted V A-AB so none of these chains occur.\n11. Create chains of the form (O,O-B,B-AB). Previous steps exhausted V B-AB so none of these chains occur. 12. O-type NDDs and V AB-O match with remaining underdemanded vertices, starting with V O-AB. The remaining size of each vertex group is\n(1) |NO| ∝ βµO (2) |V AB-O| ∝ (β − (1− p̄)µAB)(µA + µB) + p̄µABµO (3) |V O-AB| ∝ µOµAB\nNote that the inequality (1) + (2) < (3) can be written as\nβ < µAB(1− p̄) which holds by assumption 2 Thus O-type NDDs are exhausted first, leaving some vertices remaining in V O-AB, with\n|V O-AB| ∝ ((1− p̄)µAB − β)(1− µAB)\nIn the efficient matching described above, the number of matched pairs in each under-demanded group is\n|V O-A| ∝ µA(µAB + p̄(µO − µAB)− β) |V O-B| ∝ µB(µAB + p̄(µO − µAB)− β) |V A-AB| ∝ µAµAB |V B-AB| ∝ µBµAB. |V O-AB| ∝ (β + µABp̄)(1− µAB)− µAB(µA + µB)\nCombining these with the over-demanded and selfdemanded vertices, the total size of the efficient matching is\nuE = µABµB + µA (µAB + 2µB) + βµO + p̄ [ µ2A + µAµAB + µ 2 AB + µABµB + µ 2 B\n+ 2(µA + µAB + µB)µO + µ 2 O ] To calculate the price of fairness we now find the size of the fair matching. The only unmatched highly sensitized patients are in V O-ABH , some of which were matched in step 12 above. We now show that the number of matched vertices in V O-AB is smaller than the initial size of V O-ABH , so not all vertices in V O-ABH can be matched. LetM O-AB be the number\nof matched vertices in V O-AB, and HO-AB be the initial size of V O-ABH . The inequality M O-AB < HO-AB can be written as\n(β + µABp̄)(1− µAB)− µAB(µA + µB) < (1− λ)µOµAB (9)\nβ < µAB(1− p̄)− λµO µAB\n1− µAB (10)\nThis inequality holds by assumption 2, and a.s. there are some unmatched vertices in V O-ABH . The number of unmatched highly sensitized vertices is\nHO-AB −MO-AB ∝ (1− µAB)((1− p̄)µAB − β)− λµABµO. We match each of these remaining vertices by removing a 3-cycle of the form (AB-O, O-A, A-AB) and creating a 2-cycle (AB-O, O-AB). This matching used |V AB-O| ∝ p̄µOµAB 3-cycles of this form, while |V O-ABH | ∝ (1 − λ)µOµAB. The model assumptions ensure that |V AB-O| > |V O-ABH |, and all remaining vertices in V O-ABH can be matched in this way.\nTo match each remaining vertex in V O-ABH , we remove from the matching one vertex from both V O-A and V A-AB. Thus the total efficiency loss is HO-AB −MO-AB. The price of fairness is\nPOF(M, uLEX) = (1− µAB)((1− p̄)µAB − β)− λµABµO\nuE With uE defined previously.\nNext we compare the price of fairness in Propositions 2, 3, 4, and 5 to the price of fairness in the efficient matching without NDDs, given in Dickerson et al. (2014):\nPOF0 = (1− λ)µOµAB\nuE (11)\nuE = p̄ [ 2µABµB + 2µABµA + 3µABµO\n+2µAµO + 2µBµO + µ 2 O + µ 2 A + µ 2 B + µ 2 AB ] +2µAµB\nThe following Lemmas state that POF0 is an upper bound on the price of fairness when NDDs are used, for each of the four cases when the price of fairness is nonzero. Lemma 2. The price of fairness in Propositions 2 and 3 is bounded above by POF0.\nsketch. The price of fairness in Propositions 2 and 3 is\nPOFA = (1− λ)µOµAB\nuE\nuE = p̄ [ 2µABµB + 2µABµA + 3µABµO\n+2µAµO + 2µBµO + µ 2 O + µ 2 A + µ 2 B + µ 2 AB ] +2µAµB + β (µA + µB + 2µO)\nBoth POF0 and POFA have the same numerator, and the denominator of POFA is equal to the denominator of POF0, with the additional term β (µA + µB + 2µO). Thus when β = 0, POF0 = POFA, and when β > 0, POF0 > POFA, and the price of fairness in Propositions 2 and 3 is bounded above by POF0.\nLemma 3. The price of fairness in Propositions 4 and 5 is bounded above by POF0.\nsketch. The price of fairness in Propositions 4 and 5 is\nPOFB = (1− µAB)((1− p̄)µAB − β)− λµABµO\nuE\nuE = µABµB + µA (µAB + 2µB) + βµO + p̄ [ µ2A + µAµAB + µ 2 AB + µABµB + µ 2 B\n+ 2(µA + µAB + µB)µO + µ 2 O ] To show that POFB < POF0 holds, we first show both (1) the numerator of POFB is smaller than that of POF0, and (2) the denominator of POFB is larger than the denominator of POF0. (1) In both POF0 and POFB , the numerator is proportional to the number of remaining vertices in V O-ABH , after constructing the efficient matching. In Proposition 4 and 5 the efficient matching contains some vertices in V O-ABH ; without NDDs, the efficient matching contains no vertices in V O-ABH . Thus, the numerator of POFB is strictly smaller the numerator of POF0. (2) Let the D0 be the denominator of POF0, and DB be the denominator of POFB . We now show that the inequality D0 < DB holds. First, note that this inequality can be written as\nµAB − (1− p̄)µ2AB + βµO > µAB(p̄+ µO). Rearranging, we have\nβ > (µAB/µO) [ (1− p̄)µAB − (µA + µB + µAB − p̄) ] . (12)\nWe now show that inequality 12 is satisfied by the the following assumption on β, made in Propositions 4 and 5:\nA : β > µAB(1− p̄)− µABµOp̄/µA. Next, we show that assumption A implies inequality 12, and thus assumption A implies D0 < DB . Assumption A implies 12 if the right-hand side of A is larger than the right hand side of 12, that is,\nµAB(1− p̄)− µABµOp̄/µA > (µAB/µO)(1− p̄)µAB − (µAB/µO)(µA + µB + µAB − p̄)\nrearranging, we have\n1− p̄ p̄ > µO µA 1− µAB − µB 1− µB\nThe random graph model assumes p̄ ≤ 2/5, and µO ≤ (3/2)µA, thus we have\n1− p̄ p̄ ≥ 3 2 > 3 2 1− µAB − µB 1− µB ≥ µO µA 1− µAB − µB 1− µB .\nThis shows that assumption A implies D0 < DB . Thus, the numerator of POF0 is larger than the numerator of POFB , and the denominator of POF0 is smaller than the denominator of POFB , and therefore POFB < POF0.\nLemmas 2 and 3 show that with β > 0, the price of fairness has the same upper bound as when β = 0, given in Dickerson et al. (2014). That is, adding NDDs to the random graph model does not increase the price of fairness. Theorem 1. Adding NDDs to the random graph model (β > 0) does not increase the upper bound on the price of fairness found by Dickerson et al. (2014).\nProof. When β > 0, there are only four possible matchings with nonzero price of fairness, and the price of fairness for each case is given in Propositions 2, 3, 4, and 5. Lemmas 2 and 3 state that in each of these four cases, the matching with NDDs has a tighter bound on the price of fairness than the matching without NDDs, given in Dickerson et al. (2014).\nNext we show that the price of fairness is zero when β > 1/8, by finding the maximum possible β for each of the four cases with nonzero price of fairness. Lemma 4. In the matching described by Proposition 2, β < 1/8.\nProof. Proposition 2 makes the following assumptions on β:\n1 β < µA (1− p̄)− p̄µAB 2 β < µAB(1− p̄)− p̄µABµO/µA 3 β < µAB ( µA µA+µO − p̄ )\nTo determine an upper bound on β, we maximize the right hand side of constraint 3. Note that the model assumes µAB < 1/4, µA < 1/2, and µA + µO < 1. Using these bounds, and p̄→ 0, constraint 3 is bounded by\nβ < µAB\n( µA µA + µO − p̄ ) < (1/4) (1/2) 1 = 1/8\nβ < 1/8\nConstraints 1 and 2 are looser than constraint 3: with the values p̄→ 0, µA → 1/4, and µAB → 1/4, both constraints reduce to β < 1/4.\nLemma 5. In the matching described by Proposition 3, β < 1/12.\nProof. Proposition 3 makes the following assumptions\n1 β < µAB(1− p̄)− µABµOp̄/(µA + µB)\n2 β < µAµAB(1−p̄)+µBµO(1−p̄)−p̄µOµABµA+µO 3 β > µAB(1− p̄)− µABµOp̄/µA 4 β < µAB(1− p̄)− p̄µABµO/µA + (1− p̄)µBµO/µA 5 β < µAB(1− p̄)− µOµAB/(1− µAB)\nCombining 3 and 5, we have\nµOµAB/(1− µAB) < µAB(1− p̄)− β < µABµOp̄/µA µOµAB/(1− µAB) < µABµOp̄/µA A : µA/(1− µAB) < p̄\nCombining constraint A with 5 gives a new upper bound on β,\nβ < µAB(1− p̄)− µOµAB/(1− µAB) < µAB(1− µA/(1− µAB))− µOµAB/(1− µAB)\nβ < µAB\n( 1− µA + µO\n1− µAB ) This bound is maximized when when µAB is maximal, and (µA +µO) is minimal. In the random graph model, these values are µAB → 1/4 and (µA+µO)→ 1/2, and the numerical bound is\nβ < (1/4) ( 1− (1/2)\n1− 1/4\n) = 1/12\nβ < 1/12\nLemma 6. In the matching described by Proposition 4, β < 1/8.\nProof. Proposition 4 makes the following assumptions on β\n1 β > µAB(1− p̄)− µABµOp̄/µA 2 β < µAB(1− p̄)− µABµOp̄/(µA + µB) 3 β < µAB(1− p̄)− p̄µABµO/µA + (1− p̄)µBµO/µA 4 β > µAB ( (1− p̄)− µO1−µAB\n) 5 β < µAB(1− p̄)− λµO µAB1−µAB\nCombining 1 and 5 results in the following constraint, which is consistent with the above assumptions:\nA : λ µA\n1− µAB < p̄\nNote that 5 is maximized when λ is minimized; this occurs when λ+ p̄→ 1, and λ→ 1− p̄. In this case, 5 can be relaxed as\nβ < µAB(1− p̄)− λµO µAB\n1− µAB < µAB(1− p̄)− (1− p̄)µAB\nµO 1− µAB\nβ < µAB(1− p̄)− (1− p̄)µAB µO\n1− µAB\n= (1− p̄)µAB(µA + µB) 1− µAB\nFinally, we have\nβ < (1− p̄)µAB(µA + µB) 1− µAB\nThe right hand side of this constraint is maximal when p̄ is minimal; constraint A determines the lower bound for p̄, with λ→ 1− p̄:\n(1− p̄) µA 1− µAB < p̄\nµA 1− µAB < p̄\n( 1 +\nµA 1− µAB ) µA\n1− µAB + µA < p̄\nUsing this lower bound on p̄, we can further relax 5\nβ < (1− p̄)µAB(µA + µB) 1− µAB\n< (1− µA 1− µAB + µA ) µAB(µA + µB) 1− µAB = 1− µAB\n1− µAB + µA µAB(µA + µB) 1− µAB\n= µAB(µA + µB)\n1− µAB + µA\nβ < µAB(µA + µB)\n1− µAB + µA The right hand side is maximal when µAB is maximal, and\nµAB, µA, µB, µO → 1/4. This gives the final bound on β,\nβ < (1/4)(1/2)\n1 = 1/8\nβ < 1/8\nLemma 7. In the matching described by Proposition 5, β < 1/10.\nProof. Proposition 5 makes the following assumptions on β\n1 β > µAB(1− p̄)− µABµOp̄/(µA + µB) 2 β < µAB(1− p̄)− λµO µAB1−µAB\nCombining these assumptions results in the following constraint:\nA : λ µA + µB 1− µAB < p̄\nNote that assumption 2 is identical to assumption 5 in Lemma 6. Following the same procedure used in the proof of Lemma 6, 2 can be relaxed as\nβ < (1− p̄)µAB(µA + µB) 1− µAB\nThe right hand side of this constraint is maximal when p̄ is minimal; constraint A determines the lower bound for p̄, with λ→ 1− p̄:\n(1− p̄)µA + µB 1− µAB < p̄\nµA + µB 1− µAB < p̄\n( 1 +\nµA + µB 1− µAB ) µA + µB\n2µA + 2µB + µO < p̄\nUsing this lower bound on p̄, we can further relax 2\nβ < (1− p̄)µAB(µA + µB) 1− µAB\n< (1− µA + µB 2µA + 2µB + µO ) µAB(µA + µB) 1− µAB = 1− µAB\n2µA + 2µB + µO\nµAB(µA + µB)\n1− µAB\n= µAB(µA + µB)\n2µA + 2µB + µO\nβ < µAB(µA + µB)\n2µA + 2µB + µO\nThe right hand side is maximal when µAB is maximal, and µAB, µA, µB, µO → 1/4. This gives the final bound on β,\nβ < (1/4)(1/2)\n5/4 = 1/10\nβ < 1/10\nCombining Lemmas 4, 5, 6, and 7, we find that the price of fairness is zero when β > 1/8.\nTheorem 2. The price of fairness is zero when β > 1/8.\nProof. There are only four matchings with nonzero price of fairness and β > 0, which are described in Propositions 2, 3, 4, and 5. Lemmas 4, 5, 6, and 7 state that the maximum β for any of these matchings is 1/8. When β > 1/8, the matching is not one of these four cases, and the price of fairness is zero.\nTheorems 1 and 2 are the two main theoretical results of this paper: adding NDDs to the random graph model does not increase the upper bound on the price of fairness, and when the proportion of NDDs is high enough (β > 1/8), the price of fairness is zero. We show this by addressing each of the four efficient matchings on the random graph model with nonzero price of fairness. In each case, and β < 1/8, and the matching with NDDs has a smaller price of fairness than the matching without NDDs given in Dickerson et al. (2014).\nTo further explore these results, we numerically find the maximum price of fairness for the matchings given in Propositions 2, 3, 4, and 5. For each matching, we find the maximum price of fairness for a range of β, within the defined constraints, using the “NMaximize” function in Mathematica with the nonlinear interior point method.\nFigure A.2 confirms both of our main theoretical results: adding NDDs to the efficient matching decreases the upper bound on the price of fairness, and when β > 1/8 the price of fairness is zero."
    }, {
      "heading" : "B Price of Fairness for α-Lexicographic-, Weighted-, and Hybrid-Lexicographic Fairness",
      "text" : "This section presents Theorems and Proofs regarding the price of fairness for the lexicographic, weighted, and hybridlexicographic fairness rules.\nB.1 Lexicographic Fairness Theorem 3. For any cycle capL there exists a graphG such that the price of fairness of G under the α-lexicographic fairness rule with 0 < α ≤ 1 is bounded by POF(M, uα) ≥ L−2 L .\nProof. Consider a kidney exchange graph consisting of one highly-sensitized patient H and L non-highly-sensitized patients Vi that form a directed cycle of length L. A 2-cycle connects H with one Vi, as shown in Figure 6. With a cycle cap of L, the optimal utilitarian matching has utility L, while the optimal lexicographic matching has utility uα = 2, for any 0 < α ≤ 1. The price of fairness in this graph is POF(M, uα) = (L− 2)/L.\nTheorem 4. For any chain cap R there exists a graph G such that the price of fairness of G under the αlexicographic fairness rule with 0 < α ≤ 1 is bounded by POF(M, uα) ≥ R−1R .\nProof. Consider the graph used in the proof of Theorem 3, with vertex V2 as an NDD rather than a pair. With a chain cap of R, the optimal utilitarian matching has utility R, while the optimal α-lexicographic matching has utility uα = 1 for any 0 < α ≤ 1. The price of fairness in this graph is POF(M, uα) = (R− 1)/R.\nB.2 Weighted Fairness Theorem 5. For any cycle cap L and γ ≥ L − 1, there exists a graph G such that the price of fairness of G under the weighted fairness rule is bounded by POF(M, uWF ) ≥ L−2 L .\nProof. Consider the graph used in the proof of Theorem 3, with all edge weights equal to 1. Weighted fairness increases the weight of the edge ending in H to (1+γ). The weighted utility of the 2-cycle is 2 + γ, while the weighted utility of the L-cycle is L. If γ is chosen such that γ ≥ L − 2, then the 2-cycle will be chosen over the L-cycle, resulting in the price of fairness POF(M, uWF ) = (L− 2)/L.\nTheorem 6. For any chain cap R and γ ≥ R − 1, there exists a graph G such that the price of fairness of G under the weighted fairness rule is bounded by POF(M, uWF ) ≥ R−1 R .\nProof. Consider the graph used in the proof of Theorem 4, with all weights equal to 1. The weighted utility of the 1- chain is 1 + γ, while the weight of the R-chain is R. If γ is chosen such that γ ≥ R − 1, then the 1-chain will be\nchosen over the R-chain, resulting in the price of fairness POF(M, uWF ) = (R− 1)/R.\nTheorem 7. With no chain cap, there exists a graph G such that the price of fairness of G under the weighted fairness rule is bounded by POF(M, uWF ) ≥ γγ+1 .\nProof. Consider a graph with a single NDD connected to a chain with highly-sensitized patients Hi of length N , and a chain with non-highly sensitized patients Vi of length N ′ = b(γ + 1)Nc − 1. Under weighted fairness, the Vi chain receives utility uL = b(γ + 1)Nc − 1 while the Hi chain receives utility uH = (γ + 1)N , so uH > uL. The price of fairness for this graph is\nPOF(M, uWF ) = bγNHc − 1 bγNc+N − 1 ≥ γN − 2 (γ + 1)N − 1 .\nTaking the limit as N →∞ yields\nlim N→∞ γN − 2 (γ + 1)N − 1 = γ γ + 1 ,\nwhich implies POF(M, uWF ) ≥ γγ+1 .\nTheorem 8. With no cycle cap there exists a graph G such that the price of fairness of G under the weighted fairness rule is bounded by POF(M, uWF ) ≥ γγ+1 .\nProof. Consider the graph used in the proof of Theorem 7, where the NDD N is instead a highly-sensitized pair H0, and the end vertices of both chains both have edges ending in H0. Under weighted fairness, the Vi cycle receives utility uL = b(γ + 1)Nc, while theHi chain receives utility uH = (γ + 1)N + 1, so uH > uL. The price of fairness for this graph is\nPOF(M, uWF ) = bγcN − 1 bγNc+N ≥ γN − 1 (γ + 1)N + 1 .\nTaking the limit as N →∞ yields\nlim N→∞ γN − 1 (γ + 1)N + 1 = γ γ + 1 ,\nB.3 Hybrid-Lexicographic Theorem 9. Assume the optimal utilitarian outcome XE receives utility u(XE) = uE , with one disadvantaged class that receives utility u1, and Z non-disadvantaged classes such that u1(XE) > ui(XE). For |P| classes, POF(M, u∆) ≤ 2((|P|−1)−Z)∆uE .\nProof. Consider two outcomes, one in the fair regime (XF ), one in the utilitarian regime (XE). Let u∆(XF ) > u∆(XE), such that XE receives nearly the same utility as XF ; that is, u∆(XE) = u∆(XF ) − for some 0 < 1. WLOG, let there be Z classes i such that u1(XE) > ui(XE), and\nu∆(XE) = u∆(XF )−\n≤ |P|∑ i=1 ui(XF ) + (|P| − 1)∆− (13)\nUsing the definition of utilitarian utility uE = ∑|P| i=1 ui,\nuE(XE)− uE(XF ) ≤ (2(|P| − 1)− 2Z)∆−\nand the price of fairness is\nPOF(M, u∆) ≤ 2((P − 1)− Z)∆\nuE(XE) .\nC Experimental Results This section contains worst-case price of fairness (PoF) and worst-case fairness (%F ) for real UNOS graphs, and for simulated graphs; these results were produced using the method described in Section 5.\nC.1 UNOS Graphs\nFigure C.1 shows the worst-case (maximum) PoF of each fairness rule on the 314 UNOS graphs; Figure C.1 shows worst-case (minimum) %F .\nReal exchange graphs are relatively sparse, and have very few feasible matchings. Each fairness rule effectively chooses one of these matchings, based on a fairness criteria. Especially with sparse graphs, fairness is often achieved by using longer cycles or cycles to match highly sensitized vertices. When edge success probability p is high, fairness has little effect on overall utility, and PoF is often below 0.3. With lower edge success probability, using longer cycles and chains causes a huge loss in efficiency: the expected utility of n-cycles and chains is proportional to pn, which incurs a huge penalty for long cycles and chains when p is small. Thus as p decreases, very small α and β values result in a high PoF. Our results show that for p ≤ 0.8, even the smallest parameters for α-lexicographic and weighted fairness (α = 0.1 and β = 2) achieve the worst-case PoF. As expected, hybrid-lexicographic fairness limits PoF according to Theorem 9. With two classes of patients (highly- and lowly-sensitized), the theoretical price of fairness is bounded by POF(M, u∆) ≤ 2∆/u(ME); in the Figures, ∆ is scaled by u(ME), so the upper bound on the price of fairness has a slope of two.\n0. 0 0. 2 0. 4 0. 6 0. 8\nMax.PoF\np =\n0. 1\np =\n0. 2\np =\n0 .3\np =\n0. 4\np =\n0 .5\np =\n0 .6\np =\n0. 7\np =\n0 .8\np =\n0. 9\nChainCap=0.0\np =\n1. 0\n0. 0 0. 2 0. 4 0. 6 0. 8\nMax.PoF\nChainCap=3.0\n0. 0 0. 2 0. 4 0. 6 0. 8\nMax.PoF\nChainCap=10.0\n0 1 F ra ct io n of m ax . p a ra m et er\n0. 0 0. 2 0. 4 0. 6 0. 8\nMax.PoF\n0 1 F ra ct io n of m ax . p a ra m et er\n0 1 F ra ct io n of m ax . p ar am et er\n0 1 F ra ct io n o f m a x . p ar am et er\n0 1 F ra ct io n o f m ax . p ar am et er\n0 1 F ra ct io n of m ax . p ar am et er\n0 1 F ra ct io n of m a x . p a ra m et er\n0 1 F ra ct io n o f m ax . p ar am et er\n0 1 F ra ct io n of m ax . p ar am et er\n0 1 F ra ct io n of m ax . p ar am et er\nChainCap=20.0\nF a ir\nn es\ns ru\nle\nw ei\ngh te\nd\nα -l\nex .\nh y b\nri d\nle x .\nFi gu\nre 8:\nM ax\nim um\nPo F\nfo r\nea ch\nfa ir\nne ss\nru le\n.P ar\nam et\ner s\nfo r\nea ch\nru le\nar e α ∈\n[0 ,1\n], β ∈\n[0 ,2\n0 ],\nan d\n∆ ∈\n[0 ,u\n(M E\n)] .R\now s\nco rr\nes po\nnd to\ned ge\nsu cc\nes s\npr ob\nab ili\ntie s\nfr om\n0. 1\nto 1.\n0; co\nlu m\nns co\nrr es\npo nd\nto di\nff er\nen tc\nha in\nca ps\n:0 ,3\n,a nd\n2 0\n.\nTo illustrate the other side of the fairness-efficiency tradeoff, we consider worst case %F . Figure C.1 shows the minimum (worst case) %F over all UNOS graphs for each fairness rule, and for various edge success probabilities and chain caps.\nAs expected, α-lexicographic fairness guarantees at %F ≥ α; weighted and hybrid-lexicogrpahic fairness do not make this guarantee. Small edge success probabilities make it impossible to match highly sensitized patients without large efficiency loss; when p becomes small hybridlexicographic fairness matches no highly sensitized patients in the worst case.\nThese results demonstrate the balance between fairness and efficiency offered by both α-lexicographic and hybridlexicographic fairness. If fairness is more important than efficiency, then the α-lexicographic rule can be used to guarantee that the resulting matching achieves at least fraction α of the maximum possible fair score. Alternatively, if efficiency is more important than fairness, hybrid-lexicographic fairness can bound the price of fairness using parameter ∆.\nC.2 Simulated Exchange Graphs Simulated exchange graphs were drawn from previous UNOS exchanges, using the same method as Dickerson et al. (2013). These graphs are typically denser than real graphs, and have a much lower price of fairness. Figures 10 and 11 show the worst-case PoF and %F on 32 simulated exchanges of size 64 and 128.\n0. 0 0 0. 2 5 0. 5 0 0. 7 5 1. 0 0\nMin.%F\np =\n0 .1\np =\n0. 2\np =\n0. 3\np =\n0. 4\np =\n0. 5\np =\n0. 6\np =\n0. 7\np =\n0. 8\np =\n0. 9\nChainCap=0.0\np =\n1. 0\n0. 0 0 0. 2 5 0. 5 0 0. 7 5 1. 0 0\nMin.%F\nChainCap=3.0\n0. 0 0 0. 2 5 0. 5 0 0. 7 5 1. 0 0\nMin.%F\nChainCap=10.0\n0 1 F ra ct io n of m ax . p ar am et er\n0. 0 0 0. 2 5 0. 5 0 0. 7 5 1. 0 0\nMin.%F\n0 1 F ra ct io n of m ax . p ar am et er\n0 1 F ra ct io n of m ax . p a ra m et er\n0 1 F ra ct io n of m a x . p ar am et er\n0 1 F ra ct io n o f m a x . p ar am et er\n0 1 F ra ct io n of m ax . p ar am et er\n0 1 F ra ct io n of m ax . p ar am et er\n0 1 F ra ct io n o f m ax . p ar am et er\n0 1 F ra ct io n of m ax . p ar am et er\n0 1 F ra ct io n of m ax . p ar am et er\nChainCap=20.0\nF a ir\nn es\ns ru\nle\nw ei\ngh te\nd\nα -l\nex .\nh y b\nri d\nle x .\nFi gu\nre 9:\nM in\nim um\nfr ac\ntio n\nof th\ne fa\nir sc\nor e\nfo r\nea ch\nfa ir\nne ss\nru le\n.P ar\nam et\ner s\nfo r\nea ch\nru le\nar e α ∈\n[0 ,1\n], β ∈\n[0 ,2\n0 ],\nan d\n∆ ∈\n[0 ,u\n(M E\n)] .R\now s\nco rr\nes po\nnd to\ned ge\nsu cc\nes s\npr ob\nab ili\ntie s\nfr om\n0. 1\nto 1 .0\n;c ol\num ns\nco rr\nes po\nnd to\ndi ff\ner en\ntc ha\nin ca\nps :0\n,3 ,a\nnd 2 0.\n0. 0 0. 1 0. 2 0. 3\nMax.PoF\np =\n0. 2\np =\n0. 5\np =\n0. 8\nChainCap=0.0\np =\n1 .0\n0. 0 0. 1 0. 2 0. 3\nMax.PoF\nChainCap=5.0\n0. 0 0. 1 0. 2 0. 3\nMax.PoF\nChainCap=10.0\n0 1 F ra ct io n of m ax . p ar am et er\n0. 0 0. 1 0. 2 0. 3\nMax.PoF\n0 1 F ra ct io n of m ax . p ar am et er\n0 1 F ra ct io n of m ax . p ar am et er\n0 1 F ra ct io n of m a x . p ar a m et er\nChainCap=20.0\nF a ir\nn es\ns ru\nle\nw ei\ngh te\nd\nα -l\nex .\nh y b\nri d\nle x .\n(a )\nM ax\nim um\nPo F.\n0. 00 0. 25 0. 50 0. 75 1. 00\nMin.%F\np =\n0. 2\np =\n0 .5\np =\n0. 8\nChainCap=0.0 p = 1. 0\n0. 00 0. 25 0. 50 0. 75 1. 00\nMin.%F\nChainCap=5.0\n0. 00 0. 25 0. 50 0. 75 1. 00\nMin.%F\nChainCap=10.0\n0 1 F ra ct io n of m ax . p ar am et er\n0. 00 0. 25 0. 50 0. 75 1. 00 Min.%F 0\n1\nF ra\nct io\nn o f\nm ax\n. p\nar a m\net er\n0 1 F ra ct io n o f m ax . p a ra m et er\n0 1 F ra ct io n o f m a x . p a ra m et er\nChainCap=20.0\nF a ir\nn es\ns ru\nle\nw ei\ng h te\nd\nα -l\nex .\nh y b\nri d\nle x .\n(b )\nM in\nim um\n% F\n.\nFi gu\nre 10\n:W or\nst -c\nas e\nPo F\nan d\n% F\nfo r3\n2 64\n-v er\nte x\nra nd\nom gr\nap hs\n.P ar\nam et\ner s\nfo re\nac h\nru le\nar e α ∈\n[0 ,1\n], β ∈\n[0 ,2\n0 ],\nan d\n∆ ∈\n[0 ,u\n(M E\n)] .R\now s\nco rr\nes po\nnd to\ned ge\nsu cc\nes s\npr ob\nab ili\ntie s\nfr om\n0. 1\nto 1 .0\n;c ol\num ns\nco rr\nes po\nnd to\ndi ff\ner en\ntc ha\nin ca\nps :0\n,3 ,a\nnd 2 0.\n0. 0 0. 2 0. 4\nMax.PoF\np =\n0. 2\np =\n0. 5\np =\n0. 8\nChainCap=0.0\np =\n1 .0\n0. 0 0. 2 0. 4\nMax.PoF\nChainCap=5.0\n0. 0 0. 2 0. 4\nMax.PoF\nChainCap=10.0\n0 1 F ra ct io n of m ax . p ar am et er\n0. 0 0. 2 0. 4\nMax.PoF\n0 1 F ra ct io n of m ax . p ar am et er\n0 1 F ra ct io n of m ax . p ar am et er\n0 1 F ra ct io n of m a x . p ar a m et er\nChainCap=20.0\nF a ir\nn es\ns ru\nle\nw ei\ngh te\nd\nα -l\nex .\nh y b\nri d\nle x .\n(a )\nM ax\nim um\nPo F.\n0. 2 0. 4 0. 6 0. 8 1. 0\nMin.%F\np =\n0 .2\np =\n0. 5\np =\n0. 8\nChainCap=0.0 p = 1. 0\n0. 2 0. 4 0. 6 0. 8 1. 0\nMin.%F\nChainCap=5.0\n0. 2 0. 4 0. 6 0. 8 1. 0\nMin.%F\nChainCap=10.0\n0 1 F ra ct io n of m ax . p a ra m et er\n0. 2 0. 4 0. 6 0. 8 1. 0 Min.%F 0\n1\nF ra\nct io\nn o f\nm ax\n. p\nar a m\net er\n0 1 F ra ct io n of m ax . p ar am et er\n0 1 F ra ct io n of m ax . p ar am et er\nChainCap=20.0\nF a ir\nn es\ns ru\nle\nw ei\ngh te\nd\nα -l\nex .\nh y b\nri d\nle x .\n(b )\nM in\nim um\n% F\n.\nFi gu\nre 11\n:W or\nst -c\nas e\nPo F\nan d\n% F\nfo r3\n2 12\n8- ve\nrt ex\nra nd\nom gr\nap hs\n.P ar\nam et\ner s\nfo re\nac h\nru le\nar e α ∈\n[0 ,1\n], β ∈\n[0 ,2\n0 ],\nan d\n∆ ∈\n[0 ,u\n(M E\n)] .R\now s\nco rr\nes po nd to ed ge su cc es s pr ob ab ili tie s fr om 0 .1 to 1. 0 ;c ol um ns co rr es po nd to di ff er en tc ha in ca ps :0 ,3 ,a nd 2 0 ."
    } ],
    "references" : [ {
      "title" : "Clearing algorithms for barter exchange markets: Enabling nationwide kidney exchanges",
      "author" : [ "David Abraham", "Avrim Blum", "Tuomas Sandholm" ],
      "venue" : "Proceedings of the ACM Conference on Electronic Commerce (EC), pages 295–304,",
      "citeRegEx" : "Abraham et al. 2007",
      "shortCiteRegEx" : null,
      "year" : 2007
    }, {
      "title" : "In Proceedings of the ACM Conference on Economics and Computation (EC)",
      "author" : [ "Mohammad Akbarpour", "Shengwu Li", "Shayan Oveis Gharan. Dynamic matching market design" ],
      "venue" : "page 355,",
      "citeRegEx" : "Akbarpour et al. 2014",
      "shortCiteRegEx" : null,
      "year" : 2014
    }, {
      "title" : "In Annual ACM-SIAM Symposium on Discrete Algorithms (SODA)",
      "author" : [ "Ross Anderson", "Itai Ashlagi", "David Gamarnik", "Yash Kanoria. A dynamic model of barter exchange" ],
      "venue" : "pages 1925–1933,",
      "citeRegEx" : "Anderson et al. 2015",
      "shortCiteRegEx" : null,
      "year" : 2015
    }, {
      "title" : "In AAAI Conference on Artificial Intelligence (AAAI)",
      "author" : [ "Elliot Anshelevich", "Meenal Chhabra", "Sanmay Das", "Matthew Gerrior. On the social welfare of mechanisms for repeated batch matching" ],
      "venue" : "pages 60–66,",
      "citeRegEx" : "Anshelevich et al. 2013",
      "shortCiteRegEx" : null,
      "year" : 2013
    }, {
      "title" : "multi-hospital kidney exchange",
      "author" : [ "Itai Ashlagi", "Alvin E Roth. Free riding", "participation in large scale" ],
      "venue" : "Theoretical Economics, 9(3):817–863,",
      "citeRegEx" : "Ashlagi and Roth 2014",
      "shortCiteRegEx" : null,
      "year" : 2014
    }, {
      "title" : "In Proceedings of the ACM Conference on Electronic Commerce (EC)",
      "author" : [ "Itai Ashlagi", "Patrick Jaillet", "Vahideh H. Manshadi. Kidney exchange in dynamic sparse heterogenous pools" ],
      "venue" : "pages 25–26,",
      "citeRegEx" : "Ashlagi et al. 2013",
      "shortCiteRegEx" : null,
      "year" : 2013
    }, {
      "title" : "Egalitarianism of random assignment mechanisms",
      "author" : [ "Haris Aziz", "Aris Filos-Ratsikas", "Jiashu Chen", "Simon Mackenzie", "Nicholas Mattei" ],
      "venue" : "International Conference on Autonomous Agents and Multi-Agent Systems (AAMAS),",
      "citeRegEx" : "Aziz et al. 2016",
      "shortCiteRegEx" : null,
      "year" : 2016
    }, {
      "title" : "Operations Research",
      "author" : [ "Dimitris Bertsimas", "Vivek F Farias", "Nikolaos Trichakis. The price of fairness" ],
      "venue" : "59(1):17–31,",
      "citeRegEx" : "Bertsimas et al. 2011",
      "shortCiteRegEx" : null,
      "year" : 2011
    }, {
      "title" : "The efficiency of fair division",
      "author" : [ "Ioannis Caragiannis", "Christos Kaklamanis", "Panagiotis Kanellopoulos", "Maria Kyropoulou" ],
      "venue" : "International Workshop on Internet and Network Economics (WINE),",
      "citeRegEx" : "Caragiannis et al. 2009",
      "shortCiteRegEx" : null,
      "year" : 2009
    }, {
      "title" : "FutureMatch: Combining human value judgments and machine learning to match in dynamic environments",
      "author" : [ "John P. Dickerson", "Tuomas Sandholm" ],
      "venue" : "AAAI Conference on Artificial Intelligence (AAAI), pages 622–628,",
      "citeRegEx" : "Dickerson and Sandholm 2015",
      "shortCiteRegEx" : null,
      "year" : 2015
    }, {
      "title" : "Optimizing kidney exchange with transplant chains: Theory and reality",
      "author" : [ "John P. Dickerson", "Ariel D. Procaccia", "Tuomas Sandholm" ],
      "venue" : "International Conference on Autonomous Agents and Multi-Agent Systems (AAMAS), pages 711–718,",
      "citeRegEx" : "Dickerson et al. 2012",
      "shortCiteRegEx" : null,
      "year" : 2012
    }, {
      "title" : "In Proceedings of the ACM Conference on Electronic Commerce (EC)",
      "author" : [ "John P. Dickerson", "Ariel D. Procaccia", "Tuomas Sandholm. Failure-aware kidney exchange" ],
      "venue" : "pages 323–340,",
      "citeRegEx" : "Dickerson et al. 2013",
      "shortCiteRegEx" : null,
      "year" : 2013
    }, {
      "title" : "Price of fairness in kidney exchange",
      "author" : [ "Dickerson" ],
      "venue" : "In International Conference on Autonomous",
      "citeRegEx" : "Dickerson,? \\Q2014\\E",
      "shortCiteRegEx" : "Dickerson",
      "year" : 2014
    }, {
      "title" : "Position-indexed formulations for kidney exchange",
      "author" : [ "John P. Dickerson", "David Manlove", "Benjamin Plaut", "Tuomas Sandholm", "James Trimble" ],
      "venue" : "Proceedings of the ACM Conference on Economics and Computation (EC),",
      "citeRegEx" : "Dickerson et al. 2016",
      "shortCiteRegEx" : null,
      "year" : 2016
    }, {
      "title" : "and M Utku Ünver",
      "author" : [ "Haluk Ergin", "Tayfun Sönmez" ],
      "venue" : "Multi-donor organ exchange,",
      "citeRegEx" : "Ergin et al. 2017",
      "shortCiteRegEx" : null,
      "year" : 2017
    }, {
      "title" : "Randomized assignments for barter exchanges: Fairness vs",
      "author" : [ "Wenyi Fang", "Aris Filos-Ratsikas", "Søren Kristoffer Stiil Frederiksen", "Pingzhong Tang", "Song Zuo" ],
      "venue" : "efficiency. In International Conference on Algorithmic Decision Theory (ADT),",
      "citeRegEx" : "Fang et al. 2015",
      "shortCiteRegEx" : null,
      "year" : 2015
    }, {
      "title" : "Operation frames and clubs in kidney exchange",
      "author" : [ "Gabriele Farina", "John P. Dickerson", "Tuomas Sandholm" ],
      "venue" : "Proceedings of the International Joint Conference on Artificial Intelligence (IJCAI),",
      "citeRegEx" : "Farina et al. 2017",
      "shortCiteRegEx" : null,
      "year" : 2017
    }, {
      "title" : "Management Science",
      "author" : [ "John N Hooker", "H Paul Williams. Combining equity", "utilitarianism in a mathematical programming model" ],
      "venue" : "58(9):1682–1693,",
      "citeRegEx" : "Hooker and Williams 2012",
      "shortCiteRegEx" : null,
      "year" : 2012
    }, {
      "title" : "OPTN KPD pilot program cumulative match report (CMR) for KPD match runs: Oct 27",
      "author" : [ "Kidney Paired Donation Work Group" ],
      "venue" : "2010 – Apr 15, 2013,",
      "citeRegEx" : "Kidney Paired Donation Work Group 2013",
      "shortCiteRegEx" : null,
      "year" : 2013
    }, {
      "title" : "Egalitarian pairwise kidney exchange: Fast algorithms via linear programming and parametric flow",
      "author" : [ "Jian Li", "Yicheng Liu", "Lingxiao Huang", "Pingzhong Tang" ],
      "venue" : "International Conference on Autonomous Agents and MultiAgent Systems (AAMAS), pages 445–452,",
      "citeRegEx" : "Li et al. 2014",
      "shortCiteRegEx" : null,
      "year" : 2014
    }, {
      "title" : "In AAAI Conference on Artificial Intelligence (AAAI)",
      "author" : [ "Yicheng Liu", "Pingzhong Tang", "Wenyi Fang. Internally stable matchings", "exchanges" ],
      "venue" : "pages 1433– 1439,",
      "citeRegEx" : "Liu et al. 2014",
      "shortCiteRegEx" : null,
      "year" : 2014
    }, {
      "title" : "Mechanisms for online organ matching",
      "author" : [ "Nicholas Mattei", "Abdallah Saffidine", "Toby Walsh" ],
      "venue" : "Proceedings of the International Joint Conference on Artificial Intelligence (IJCAI),",
      "citeRegEx" : "Mattei et al. 2017",
      "shortCiteRegEx" : null,
      "year" : 2017
    }, {
      "title" : "Domino paired kidney donation: a strategy",
      "author" : [ "Montgomery" ],
      "venue" : null,
      "citeRegEx" : "Montgomery,? \\Q2006\\E",
      "shortCiteRegEx" : "Montgomery",
      "year" : 2006
    }, {
      "title" : "The Lancet",
      "author" : [ "Brendon L Neuen", "Georgina E Taylor", "Alessandro R Demaio", "Vlado Perkovic. Global kidney disease" ],
      "venue" : "382(9900):1243,",
      "citeRegEx" : "Neuen et al. 2013",
      "shortCiteRegEx" : null,
      "year" : 2013
    }, {
      "title" : "The case for a living emotionally related international kidney donor exchange registry",
      "author" : [ "F.T. Rapaport" ],
      "venue" : "Transplantation Proceedings, 18:5–9",
      "citeRegEx" : "Rapaport 1986",
      "shortCiteRegEx" : null,
      "year" : 1986
    }, {
      "title" : "A nonsimultaneous, extended, altruistic-donor",
      "author" : [ "Rees" ],
      "venue" : null,
      "citeRegEx" : "Rees,? \\Q2009\\E",
      "shortCiteRegEx" : "Rees",
      "year" : 2009
    }, {
      "title" : "Quarterly Journal of Economics",
      "author" : [ "Alvin Roth", "Tayfun Sönmez", "Utku Ünver. Kidney exchange" ],
      "venue" : "119(2):457–488,",
      "citeRegEx" : "Roth et al. 2004",
      "shortCiteRegEx" : null,
      "year" : 2004
    }, {
      "title" : "American Economic Review",
      "author" : [ "Alvin Roth", "Tayfun Sönmez", "Utku Ünver. A kidney exchange clearinghouse in New England" ],
      "venue" : "95(2):376–380,",
      "citeRegEx" : "Roth et al. 2005a",
      "shortCiteRegEx" : null,
      "year" : 2005
    }, {
      "title" : "Journal of Economic Theory",
      "author" : [ "Alvin Roth", "Tayfun Sönmez", "Utku Ünver. Pairwise kidney exchange" ],
      "venue" : "125(2):151–188,",
      "citeRegEx" : "Roth et al. 2005b",
      "shortCiteRegEx" : null,
      "year" : 2005
    }, {
      "title" : "Auto-WEKA: Combined selection and hyperparameter optimization of classification algorithms",
      "author" : [ "Thornton" ],
      "venue" : "In International Conference on Knowledge Discovery and Data Mining (KDD),",
      "citeRegEx" : "Thornton,? \\Q2013\\E",
      "shortCiteRegEx" : "Thornton",
      "year" : 2013
    }, {
      "title" : "Kidney exchange: An egalitarian mechanism",
      "author" : [ "Özgür Yılmaz" ],
      "venue" : "Journal of Economic Theory, 146(2):592–618,",
      "citeRegEx" : "Yılmaz 2011",
      "shortCiteRegEx" : null,
      "year" : 2011
    }, {
      "title" : "extend the efficient matching of Ashlagi and Roth (2014) to include chains, but do not calculate the price of fairness. We close the remaining theory gap regarding the price of fairness with chains",
      "author" : [ "Dickerson" ],
      "venue" : null,
      "citeRegEx" : "Dickerson,? \\Q2012\\E",
      "shortCiteRegEx" : "Dickerson",
      "year" : 2012
    }, {
      "title" : "2012).) sketch. Begin with the efficient matching M∗ using only cycles up to length 3, proposed by Dickerson in (Dickerson et al. 2014). M∗ matches all over-demanded and selfdemanded vertices with high probability, but leaves",
      "author" : [ "Dickerson (Dickerson" ],
      "venue" : null,
      "citeRegEx" : ".Dickerson,? \\Q2014\\E",
      "shortCiteRegEx" : ".Dickerson",
      "year" : 2014
    }, {
      "title" : "We now complete the efficient matching using both 3-cycles and 3-chains as in (Dickerson et al",
      "author" : [ ],
      "venue" : null,
      "citeRegEx" : ".,? \\Q2012\\E",
      "shortCiteRegEx" : ".",
      "year" : 2012
    }, {
      "title" : "We now complete the efficient matching using both 3-cycles and 3-chains as in (Dickerson et al",
      "author" : [ ],
      "venue" : null,
      "citeRegEx" : ".,? \\Q2012\\E",
      "shortCiteRegEx" : ".",
      "year" : 2012
    }, {
      "title" : "We now complete the efficient matching using both 3-cycles and 3-chains as in (Dickerson et al",
      "author" : [ ],
      "venue" : null,
      "citeRegEx" : ".,? \\Q2012\\E",
      "shortCiteRegEx" : ".",
      "year" : 2012
    }, {
      "title" : "Proof. When β > 0, there are only four possible matchings with nonzero price of fairness, and the price of fairness for each case is given in Propositions",
      "author" : [ "Dickerson" ],
      "venue" : null,
      "citeRegEx" : "Dickerson,? \\Q2014\\E",
      "shortCiteRegEx" : "Dickerson",
      "year" : 2014
    }, {
      "title" : "and 3 state that in each of these four cases, the matching with NDDs has a tighter bound on the price of fairness than the matching without NDDs",
      "author" : [ "Dickerson" ],
      "venue" : null,
      "citeRegEx" : "Dickerson,? \\Q2014\\E",
      "shortCiteRegEx" : "Dickerson",
      "year" : 2014
    }, {
      "title" : "These graphs are typically denser than real graphs, and have a much lower price of fairness. Figures 10 and 11 show the worst-case PoF and %F on 32 simulated exchanges of size 64 and 128",
      "author" : [ "Dickerson" ],
      "venue" : "UNOS exchanges,",
      "citeRegEx" : "Dickerson,? \\Q2013\\E",
      "shortCiteRegEx" : "Dickerson",
      "year" : 2013
    } ],
    "referenceMentions" : [ {
      "referenceID" : 0,
      "context" : "[Abraham et al. 2007] David Abraham, Avrim Blum, and Tuomas Sandholm.",
      "startOffset" : 0,
      "endOffset" : 21
    }, {
      "referenceID" : 1,
      "context" : "[Akbarpour et al. 2014] Mohammad Akbarpour, Shengwu Li, and Shayan Oveis Gharan.",
      "startOffset" : 0,
      "endOffset" : 23
    }, {
      "referenceID" : 2,
      "context" : "[Anderson et al. 2015] Ross Anderson, Itai Ashlagi, David Gamarnik, and Yash Kanoria.",
      "startOffset" : 0,
      "endOffset" : 22
    }, {
      "referenceID" : 3,
      "context" : "[Anshelevich et al. 2013] Elliot Anshelevich, Meenal Chhabra, Sanmay Das, and Matthew Gerrior.",
      "startOffset" : 0,
      "endOffset" : 25
    }, {
      "referenceID" : 4,
      "context" : "[Ashlagi and Roth 2014] Itai Ashlagi and Alvin E Roth.",
      "startOffset" : 0,
      "endOffset" : 23
    }, {
      "referenceID" : 5,
      "context" : "[Ashlagi et al. 2013] Itai Ashlagi, Patrick Jaillet, and Vahideh H.",
      "startOffset" : 0,
      "endOffset" : 21
    }, {
      "referenceID" : 6,
      "context" : "[Aziz et al. 2016] Haris Aziz, Aris Filos-Ratsikas, Jiashu Chen, Simon Mackenzie, and Nicholas Mattei.",
      "startOffset" : 0,
      "endOffset" : 18
    }, {
      "referenceID" : 7,
      "context" : "[Bertsimas et al. 2011] Dimitris Bertsimas, Vivek F Farias, and Nikolaos Trichakis.",
      "startOffset" : 0,
      "endOffset" : 23
    }, {
      "referenceID" : 8,
      "context" : "[Caragiannis et al. 2009] Ioannis Caragiannis, Christos Kaklamanis, Panagiotis Kanellopoulos, and Maria Kyropoulou.",
      "startOffset" : 0,
      "endOffset" : 25
    }, {
      "referenceID" : 9,
      "context" : "[Dickerson and Sandholm 2015] John P.",
      "startOffset" : 0,
      "endOffset" : 29
    }, {
      "referenceID" : 10,
      "context" : "[Dickerson et al. 2012] John P.",
      "startOffset" : 0,
      "endOffset" : 23
    }, {
      "referenceID" : 11,
      "context" : "[Dickerson et al. 2013] John P.",
      "startOffset" : 0,
      "endOffset" : 23
    }, {
      "referenceID" : 13,
      "context" : "[Dickerson et al. 2016] John P.",
      "startOffset" : 0,
      "endOffset" : 23
    }, {
      "referenceID" : 14,
      "context" : "[Ergin et al. 2017] Haluk Ergin, Tayfun Sönmez, and M Utku Ünver.",
      "startOffset" : 0,
      "endOffset" : 19
    }, {
      "referenceID" : 15,
      "context" : "[Fang et al. 2015] Wenyi Fang, Aris Filos-Ratsikas, Søren Kristoffer Stiil Frederiksen, Pingzhong Tang, and Song Zuo.",
      "startOffset" : 0,
      "endOffset" : 18
    }, {
      "referenceID" : 16,
      "context" : "[Farina et al. 2017] Gabriele Farina, John P.",
      "startOffset" : 0,
      "endOffset" : 20
    }, {
      "referenceID" : 17,
      "context" : "[Hooker and Williams 2012] John N Hooker and H Paul Williams.",
      "startOffset" : 0,
      "endOffset" : 26
    }, {
      "referenceID" : 18,
      "context" : "[Kidney Paired Donation Work Group 2013] Kidney Paired Donation Work Group.",
      "startOffset" : 0,
      "endOffset" : 40
    }, {
      "referenceID" : 19,
      "context" : "[Li et al. 2014] Jian Li, Yicheng Liu, Lingxiao Huang, and Pingzhong Tang.",
      "startOffset" : 0,
      "endOffset" : 16
    }, {
      "referenceID" : 20,
      "context" : "[Liu et al. 2014] Yicheng Liu, Pingzhong Tang, and Wenyi Fang.",
      "startOffset" : 0,
      "endOffset" : 17
    }, {
      "referenceID" : 21,
      "context" : "[Mattei et al. 2017] Nicholas Mattei, Abdallah Saffidine, and Toby Walsh.",
      "startOffset" : 0,
      "endOffset" : 20
    }, {
      "referenceID" : 23,
      "context" : "[Neuen et al. 2013] Brendon L Neuen, Georgina E Taylor, Alessandro R Demaio, and Vlado Perkovic.",
      "startOffset" : 0,
      "endOffset" : 19
    }, {
      "referenceID" : 24,
      "context" : "[Rapaport 1986] F.",
      "startOffset" : 0,
      "endOffset" : 15
    }, {
      "referenceID" : 26,
      "context" : "[Roth et al. 2004] Alvin Roth, Tayfun Sönmez, and Utku Ünver.",
      "startOffset" : 0,
      "endOffset" : 18
    }, {
      "referenceID" : 27,
      "context" : "[Roth et al. 2005a] Alvin Roth, Tayfun Sönmez, and Utku Ünver.",
      "startOffset" : 0,
      "endOffset" : 19
    }, {
      "referenceID" : 28,
      "context" : "[Roth et al. 2005b] Alvin Roth, Tayfun Sönmez, and Utku Ünver.",
      "startOffset" : 0,
      "endOffset" : 19
    }, {
      "referenceID" : 30,
      "context" : "[Yılmaz 2011] Özgür Yılmaz.",
      "startOffset" : 0,
      "endOffset" : 13
    } ],
    "year" : 2017,
    "abstractText" : "Balancing fairness and efficiency in resource allocation is a classical economic and computational problem. The price of fairness measures the worst-case loss of economic efficiency when using an inefficient but fair allocation rule; for indivisible goods in many settings, this price is unacceptably high. One such setting is kidney exchange, where needy patients swap willing but incompatible kidney donors. In this work, we close an open problem regarding the theoretical price of fairness in modern kidney exchanges. We then propose a general hybrid fairness rule that balances a strict lexicographic preference ordering over classes of agents, and a utilitarian objective that maximizes economic efficiency. We develop a utility function for this rule that favors disadvantaged groups lexicographically; but if cost to overall efficiency becomes too high, it switches to a utilitarian objective. This rule has only one parameter which is proportional to a bound on the price of fairness, and can be adjusted by policymakers. We apply this rule to real data from a large kidney exchange and show that our hybrid rule produces more reliable outcomes than other fairness rules.",
    "creator" : "LaTeX with hyperref package"
  }
}